/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},12:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,i=0;n<t.length;n++,i+=8)e[i>>>5]|=t[n]<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],i=0;i<t.length;i+=3)for(var r=t[i]<<16|t[i+1]<<8|t[i+2],o=0;o<4;o++)8*i+6*o<=8*t.length?n.push(e.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,r=0;i<t.length;r=++i%4)0!=r&&n.push((e.indexOf(t.charAt(i-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(i))>>>6-2*r);return n}},t.exports=n},738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},733:(t,e,n)=>{t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,(function(t){return r(e[s][1][t]||t)}),u,u.exports,t,e,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";var i=t("./utils"),r=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,s,a,l,u,h=[],c=0,d=t.length,f=d,p="string"!==i.getTypeOf(t);c<t.length;)f=d-c,r=p?(e=t[c++],n=c<d?t[c++]:0,c<d?t[c++]:0):(e=t.charCodeAt(c++),n=c<d?t.charCodeAt(c++):0,c<d?t.charCodeAt(c++):0),s=e>>2,a=(3&e)<<4|n>>4,l=1<f?(15&n)<<2|r>>6:64,u=2<f?63&r:64,h.push(o.charAt(s)+o.charAt(a)+o.charAt(l)+o.charAt(u));return h.join("")},n.decode=function(t){var e,n,i,s,a,l,u=0,h=0,c="data:";if(t.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&f--,t.charAt(t.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=r.uint8array?new Uint8Array(0|f):new Array(0|f);u<t.length;)e=o.indexOf(t.charAt(u++))<<2|(s=o.indexOf(t.charAt(u++)))>>4,n=(15&s)<<4|(a=o.indexOf(t.charAt(u++)))>>2,i=(3&a)<<6|(l=o.indexOf(t.charAt(u++))),d[h++]=e,64!==a&&(d[h++]=n),64!==l&&(d[h++]=i);return d}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var i=t("./external"),r=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}a.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new s("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var i=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(t){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var i=t("./utils"),r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n,i){var o=r,s=0+n;t^=-1;for(var a=0;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,n,i){var o=r,s=0+n;t^=-1;for(var a=0;a<s;a++)t=t>>>8^o[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var i;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=i?"uint8array":"array";function l(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new l("Deflate",t)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function i(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i}function r(t,e,n,r,s,h){var c,d,f=t.file,p=t.compression,_=h!==a.utf8encode,v=o.transformTo("string",h(f.name)),m=o.transformTo("string",a.utf8encode(f.name)),g=f.comment,y=o.transformTo("string",h(g)),b=o.transformTo("string",a.utf8encode(g)),w=m.length!==f.name.length,x=b.length!==g.length,k="",E="",S="",T=f.dir,A=f.date,P={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(P.crc32=t.crc32,P.compressedSize=t.compressedSize,P.uncompressedSize=t.uncompressedSize);var I=0;e&&(I|=8),_||!w&&!x||(I|=2048);var L=0,z=0;T&&(L|=16),"UNIX"===s?(z=798,L|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(f.unixPermissions,T)):(z=20,L|=function(t){return 63&(t||0)}(f.dosPermissions)),c=A.getUTCHours(),c<<=6,c|=A.getUTCMinutes(),c<<=5,c|=A.getUTCSeconds()/2,d=A.getUTCFullYear()-1980,d<<=4,d|=A.getUTCMonth()+1,d<<=5,d|=A.getUTCDate(),w&&(E=i(1,1)+i(l(v),4)+m,k+="up"+i(E.length,2)+E),x&&(S=i(1,1)+i(l(y),4)+b,k+="uc"+i(S.length,2)+S);var M="";return M+="\n\0",M+=i(I,2),M+=p.magic,M+=i(c,2),M+=i(d,2),M+=i(P.crc32,4),M+=i(P.compressedSize,4),M+=i(P.uncompressedSize,4),M+=i(v.length,2),M+=i(k.length,2),{fileRecord:u.LOCAL_FILE_HEADER+M+v+k,dirRecord:u.CENTRAL_FILE_HEADER+i(z,2)+M+i(y.length,2)+"\0\0\0\0"+i(L,4)+i(r,4)+v+k+y}}var o=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),u=t("../signature");function h(t,e,n,i){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,s),h.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},h.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,s){var a=o.transformTo("string",s(r));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(t,2)+i(t,2)+i(e,4)+i(n,4)+i(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},h.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var i=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new r(e.streamFiles,n,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,n){s++;var r=function(t,e){var n=t||e,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},l=n.dir,u=n.date;n._compressWorker(r,a).withStreamInfo("file",{name:t,dir:l,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.7.1",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var i=t("./utils"),r=t("./external"),o=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function u(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new a);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(u(i[o]));return r.Promise.all(n)})).then((function(t){for(var i=t.shift(),r=i.files,o=0;o<r.length;o++){var s=r[o];n.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var i=t("../utils"),r=t("../stream/GenericWorker");function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var i=t("readable-stream").Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){"use strict";function i(t,e,n){var i,r=o.getTypeOf(e),a=o.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=_(t)),a.createFolders&&(i=p(t))&&v.call(this,i,!0);var c="string"===r&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!c),(e instanceof u&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",r="string");var m;m=e instanceof u||e instanceof s?e:d.isNode&&d.isStream(e)?new f(t,e):o.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var g=new h(t,m,a);this.files[t]=g}var r=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),l=t("./defaults"),u=t("./compressedObject"),h=t("./zipObject"),c=t("./generate"),d=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},_=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},v=function(t,e){return e=void 0!==e?e:l.createFolders,t=_(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var g={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i)},filter:function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,i.call(this,t,e,n),this;if(m(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(m(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=v.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=c.generateWorker(this,n,i)}catch(t){(e=new s("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=g},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var i=t("./DataReader");function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var i=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,n){"use strict";var i=t("./Uint8ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var i=t("./DataReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var i=t("./ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var i=t("../utils"),r=t("../support"),o=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new l(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){"use strict";var i=t("./GenericWorker"),r=t("../utils");function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var i=t("./GenericWorker"),r=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./ConvertWorker"),o=t("./GenericWorker"),s=t("../base64"),a=t("../support"),l=t("../external"),u=null;if(a.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function h(t,e,n){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=n,i.checkSupport(s),this._worker=t.pipe(new r(s)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}h.prototype={accumulate:function(t){return function(t,e){return new l.Promise((function(n,r){var o=[],a=t._internalType,l=t._outputType,u=t._mimeType;t.on("data",(function(t,n){o.push(t),e&&e(n)})).on("error",(function(t){o=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return s.encode(e);default:return i.transformTo(t,e)}}(l,function(t,e){var n,i=0,r=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,o),u);n(t)}catch(t){r(t)}o=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),n.blob=0===r.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var i=t("./utils"),r=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function h(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,i,o,s,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(l):new Array(l),o=s=0;s<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e}(t)},n.utf8decode=function(t){return r.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,o,s=t.length,l=new Array(2*s);for(e=n=0;e<s;)if((r=t[e++])<128)l[n++]=r;else if(4<(o=a[r]))l[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&e<s;)r=r<<6|63&t[e++],o--;1<o?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)}(t=i.transformTo(r.uint8array?"uint8array":"array",t))},i.inherits(u,s),u.prototype.processChunk=function(t){var e=i.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(e),l=e;s!==e.length&&(r.uint8array?(l=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(l=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:n.utf8decode(l),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,i.inherits(h,s),h.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){"use strict";var i=t("./support"),r=t("./base64"),o=t("./nodejsUtils"),s=t("set-immediate-shim"),a=t("./external");function l(t){return t}function u(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var e=65536,i=n.getTypeOf(t),r=!0;if("uint8array"===i?r=h.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=h.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return h.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return h.stringifyByChar(t)}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=c;var f={};f.string={string:l,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,o.allocBuffer(t.length))}},f.array={string:c,array:l,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},f.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:l,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:c,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:l,nodebuffer:function(t){return o.newBufferFrom(t)}},f.nodebuffer={string:c,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:l},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var i=n.getTypeOf(e);return f[i][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&o.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},n.delay=function(t,e,n){s((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,o,s,l){return a.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var h=n.getTypeOf(e);return h?("arraybuffer"===h?e=n.transformTo("uint8array",e):"string"===h&&(l?e=r.decode(e):o&&!0!==s&&(e=function(t){return u(t,i.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,n){"use strict";var i=t("./reader/readerFor"),r=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",n=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(0<i)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var i=t("./reader/readerFor"),r=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),l=t("./compressions"),u=t("./support");function h(t,e){this.options=t,this.loadOptions=e}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i};t.setIndex(r)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function i(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(e=e.pipe(new s.Utf8EncodeWorker)),!o&&i&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<u.length;c++)i.prototype[u[c]]=h;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){(function(t){"use strict";var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,s=new r(h),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){h(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(h,0)};else{var l=new t.MessageChannel;l.port1.onmessage=h,n=function(){l.port2.postMessage(0)}}var u=[];function h(){var t,e;i=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}i=!1}e.exports=function(t){1!==u.push(t)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){"use strict";var i=t("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==r&&f(this,t)}function h(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function c(t,e,n){i((function(){var i;try{i=e(n)}catch(i){return o.reject(t,i)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=p((function(){e(r,i)}));"error"===s.status&&i(s.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);return this.state!==l?c(n,this.state===a?t:e,this.outcome):this.queue.push(new h(n,t,e)),n},h.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){o.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)f(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},u.reject=function(t){var e=new this(r);return o.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,u=new this(r);++l<n;)h(t[l],l);return u;function h(t,r){e.resolve(t).then((function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(u,s))}),(function(t){i||(i=!0,o.reject(u,t))}))}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var i,s=-1,a=new this(r);++s<e;)i=t[s],this.resolve(i).then((function(t){n||(n=!0,o.resolve(a,t))}),(function(t){n||(n=!0,o.reject(a,t))}));return a}},{immediate:36}],38:[function(t,e,n){"use strict";var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var i=t("./zlib/deflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(s[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var h;if(h="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=i.deflateSetDictionary(this.strm,h)))throw new Error(s[n]);this._dict_set=!0}}function h(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}u.prototype.push=function(t,e){var n,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=i.deflate(a,s))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==s||(this.onEnd(0),!(a.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=u,n.deflate=h,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,h(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var i=t("./zlib/inflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),u=t("./zlib/gzheader"),h=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function d(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(t,e){var n,a,l,u,c,d,f=this.strm,p=this.options.chunkSize,_=this.options.dictionary,v=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(p),f.next_out=0,f.avail_out=p),(n=i.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&_&&(d="string"==typeof _?o.string2buf(_):"[object ArrayBuffer]"===h.call(_)?new Uint8Array(_):_,n=i.inflateSetDictionary(this.strm,d)),n===s.Z_BUF_ERROR&&!0===v&&(n=s.Z_OK,v=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==s.Z_STREAM_END&&(0!==f.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),u=f.next_out-l,c=o.buf2string(f.output,l),f.next_out=u,f.avail_out=p-u,u&&r.arraySet(f.output,f.output,l,u,0),this.onData(c)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(f.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=c,n.inflate=d,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(t,e,n){"use strict";var i=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,n.string2buf=function(t){var e,n,r,o,s,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(l),o=s=0;s<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e},n.buf2binstring=function(t){return l(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,r,o,a=e||t.length,u=new Array(2*a);for(n=i=0;n<a;)if((r=t[n++])<128)u[i++]=r;else if(4<(o=s[r]))u[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<a;)r=r<<6|63&t[n++],o--;1<o?u[i++]=65533:r<65536?u[i++]=r:(r-=65536,u[i++]=55296|r>>10&1023,u[i++]=56320|1023&r)}return l(u,i)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--s;);r%=65521,o%=65521}return r|o<<16|0}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,n){"use strict";var i,r=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),l=t("./messages"),u=-2,h=258,c=262,d=113;function f(t,e){return t.msg=l[e],e}function p(t){return(t<<1)-(4<t?9:0)}function _(t){for(var e=t.length;0<=--e;)t[e]=0}function v(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function m(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,v(t.strm)}function g(t,e){t.pending_buf[t.pending++]=e}function y(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function b(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-c?t.strstart-(t.w_size-c):0,u=t.window,d=t.w_mask,f=t.prev,p=t.strstart+h,_=u[o+s-1],v=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(n=e)+s]===v&&u[n+s-1]===_&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<p);if(i=h-(p-o),o=p-h,s<i){if(t.match_start=e,a<=(s=i))break;_=u[o+s-1],v=u[o+s]}}}while((e=f[e&d])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function w(t){var e,n,i,o,l,u,h,d,f,p,_=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=_+(_-c)){for(r.arraySet(t.window,t.window,_,_,0),t.match_start-=_,t.strstart-=_,t.block_start-=_,e=n=t.hash_size;i=t.head[--e],t.head[e]=_<=i?i-_:0,--n;);for(e=n=_;i=t.prev[--e],t.prev[e]=_<=i?i-_:0,--n;);o+=_}if(0===t.strm.avail_in)break;if(u=t.strm,h=t.window,d=t.strstart+t.lookahead,p=void 0,(f=o)<(p=u.avail_in)&&(p=f),n=0===p?0:(u.avail_in-=p,r.arraySet(h,u.input,u.next_in,p,d),1===u.state.wrap?u.adler=s(u.adler,h,p,d):2===u.state.wrap&&(u.adler=a(u.adler,h,p,d)),u.next_in+=p,u.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<c&&0!==t.strm.avail_in)}function x(t,e){for(var n,i;;){if(t.lookahead<c){if(w(t),t.lookahead<c&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-c&&(t.match_length=b(t,n)),t.match_length>=3)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}function k(t,e){for(var n,i,r;;){if(t.lookahead<c){if(w(t),t.lookahead<c&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-c&&(t.match_length=b(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-3,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(m(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&m(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}function E(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),_(this.dyn_ltree),_(this.dyn_dtree),_(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),_(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),_(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function T(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:d,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):f(t,u)}function A(t){var e=T(t);return 0===e&&function(t){t.window_size=2*t.w_size,_(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function P(t,e,n,i,o,s){if(!t)return u;var a=1;if(-1===e&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),o<1||9<o||8!==n||i<8||15<i||e<0||9<e||s<0||4<s)return f(t,u);8===i&&(i=9);var l=new S;return(t.state=l).strm=t,l.wrap=a,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=n,A(t)}i=[new E(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(w(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,m(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-c&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(m(t,!1),t.strm.avail_out),1)})),new E(4,4,8,4,x),new E(4,5,16,8,x),new E(4,6,32,32,x),new E(4,4,16,16,k),new E(8,16,32,32,k),new E(8,16,128,128,k),new E(8,32,128,256,k),new E(32,128,258,1024,k),new E(32,258,258,4096,k)],n.deflateInit=function(t,e){return P(t,e,8,15,8,0)},n.deflateInit2=P,n.deflateReset=A,n.deflateResetKeep=T,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,0):u},n.deflate=function(t,e){var n,r,s,l;if(!t||!t.state||5<e||e<0)return t?f(t,u):u;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return f(t,0===t.avail_out?-5:u);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,g(r,31),g(r,139),g(r,8),r.gzhead?(g(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),g(r,255&r.gzhead.time),g(r,r.gzhead.time>>8&255),g(r,r.gzhead.time>>16&255),g(r,r.gzhead.time>>24&255),g(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),g(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(g(r,255&r.gzhead.extra.length),g(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(g(r,0),g(r,0),g(r,0),g(r,0),g(r,0),g(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),g(r,3),r.status=d);else{var c=8+(r.w_bits-8<<4)<<8;c|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(c|=32),c+=31-c%31,r.status=d,y(r,c),0!==r.strstart&&(y(r,t.adler>>>16),y(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),v(t),s=r.pending,r.pending!==r.pending_buf_size));)g(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),v(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,g(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),v(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,g(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&v(t),r.pending+2<=r.pending_buf_size&&(g(r,255&t.adler),g(r,t.adler>>8&255),t.adler=0,r.status=d)):r.status=d),0!==r.pending){if(v(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(n)&&4!==e)return f(t,-5);if(666===r.status&&0!==t.avail_in)return f(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var b=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(w(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=h){if(w(t),t.lookahead<=h&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){s=t.strstart+h;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=h-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}(r,e):i[r.level].func(r,e);if(3!==b&&4!==b||(r.status=666),1===b||3===b)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===b&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(_(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),v(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(g(r,255&t.adler),g(r,t.adler>>8&255),g(r,t.adler>>16&255),g(r,t.adler>>24&255),g(r,255&t.total_in),g(r,t.total_in>>8&255),g(r,t.total_in>>16&255),g(r,t.total_in>>24&255)):(y(r,t.adler>>>16),y(r,65535&t.adler)),v(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?0:1)},n.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==d&&666!==e?f(t,u):(t.state=null,e===d?f(t,-3):0):u},n.deflateSetDictionary=function(t,e){var n,i,o,a,l,h,c,d,f=e.length;if(!t||!t.state)return u;if(2===(a=(n=t.state).wrap)||1===a&&42!==n.status||n.lookahead)return u;for(1===a&&(t.adler=s(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(_(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,e,f-n.w_size,n.w_size,0),e=d,f=n.w_size),l=t.avail_in,h=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,w(n);n.lookahead>=3;){for(i=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--o;);n.strstart=i,n.lookahead=2,w(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=h,t.input=c,t.avail_in=l,n.wrap=a,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n,i,r,o,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,k,E,S,T;n=t.state,i=t.next_in,S=t.input,r=i+(t.avail_in-5),o=t.next_out,T=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),l=n.dmax,u=n.wsize,h=n.whave,c=n.wnext,d=n.window,f=n.hold,p=n.bits,_=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{p<15&&(f+=S[i++]<<p,p+=8,f+=S[i++]<<p,p+=8),y=_[f&m];e:for(;;){if(f>>>=b=y>>>24,p-=b,0==(b=y>>>16&255))T[o++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=_[(65535&y)+(f&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&y,(b&=15)&&(p<b&&(f+=S[i++]<<p,p+=8),w+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=S[i++]<<p,p+=8,f+=S[i++]<<p,p+=8),y=v[f&g];n:for(;;){if(f>>>=b=y>>>24,p-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=v[(65535&y)+(f&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&y,p<(b&=15)&&(f+=S[i++]<<p,(p+=8)<b&&(f+=S[i++]<<p,p+=8)),l<(x+=f&(1<<b)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=b,p-=b,(b=o-s)<x){if(h<(b=x-b)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(E=d,(k=0)===c){if(k+=u-b,b<w){for(w-=b;T[o++]=d[k++],--b;);k=o-x,E=T}}else if(c<b){if(k+=u+c-b,(b-=c)<w){for(w-=b;T[o++]=d[k++],--b;);if(k=0,c<w){for(w-=b=c;T[o++]=d[k++],--b;);k=o-x,E=T}}}else if(k+=c-b,b<w){for(w-=b;T[o++]=d[k++],--b;);k=o-x,E=T}for(;2<w;)T[o++]=E[k++],T[o++]=E[k++],T[o++]=E[k++],w-=3;w&&(T[o++]=E[k++],1<w&&(T[o++]=E[k++]))}else{for(k=o-x;T[o++]=T[k++],T[o++]=T[k++],T[o++]=T[k++],2<(w-=3););w&&(T[o++]=T[k++],1<w&&(T[o++]=T[k++]))}break}}break}}while(i<r&&o<a);i-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=f,n.bits=p}},{}],49:[function(t,e,n){"use strict";var i=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),l=-2;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(852),e.distcode=e.distdyn=new i.Buf32(592),e.sane=1,e.back=-1,0):l}function d(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):l}function f(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?l:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,d(t))):l}function p(t,e){var n,i;return t?(i=new h,(t.state=i).window=null,0!==(n=f(t,e))&&(t.state=null),n):l}var _,v,m=!0;function g(t){if(m){var e;for(_=new i.Buf32(512),v=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,_,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,v,0,t.work,{bits:5}),m=!1}t.lencode=_,t.lenbits=9,t.distcode=v,t.distbits=5}function y(t,e,n,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r<(o=s.wsize-s.wnext)&&(o=r),i.arraySet(s.window,e,n-r,o,s.wnext),(r-=o)?(i.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=d,n.inflateReset2=f,n.inflateResetKeep=c,n.inflateInit=function(t){return p(t,15)},n.inflateInit2=p,n.inflate=function(t,e){var n,h,c,d,f,p,_,v,m,b,w,x,k,E,S,T,A,P,I,L,z,M,C,N,O=0,B=new i.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return l;12===(n=t.state).mode&&(n.mode=13),f=t.next_out,c=t.output,_=t.avail_out,d=t.next_in,h=t.input,p=t.avail_in,v=n.hold,m=n.bits,b=p,w=_,M=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;m<16;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(2&n.wrap&&35615===v){B[n.check=0]=255&v,B[1]=v>>>8&255,n.check=o(n.check,B,2,0),m=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",n.mode=30;break}if(m-=4,z=8+(15&(v>>>=4)),0===n.wbits)n.wbits=z;else if(z>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<z,t.adler=n.check=1,n.mode=512&v?10:12,m=v=0;break;case 2:for(;m<16;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(n.flags=v,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(B[0]=255&v,B[1]=v>>>8&255,n.check=o(n.check,B,2,0)),m=v=0,n.mode=3;case 3:for(;m<32;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}n.head&&(n.head.time=v),512&n.flags&&(B[0]=255&v,B[1]=v>>>8&255,B[2]=v>>>16&255,B[3]=v>>>24&255,n.check=o(n.check,B,4,0)),m=v=0,n.mode=4;case 4:for(;m<16;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(B[0]=255&v,B[1]=v>>>8&255,n.check=o(n.check,B,2,0)),m=v=0,n.mode=5;case 5:if(1024&n.flags){for(;m<16;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(B[0]=255&v,B[1]=v>>>8&255,n.check=o(n.check,B,2,0)),m=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(x=n.length)&&(x=p),x&&(n.head&&(z=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,h,d,x,z)),512&n.flags&&(n.check=o(n.check,h,x,d)),p-=x,d+=x,n.length-=x),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break t;for(x=0;z=h[d+x++],n.head&&z&&n.length<65536&&(n.head.name+=String.fromCharCode(z)),z&&x<p;);if(512&n.flags&&(n.check=o(n.check,h,x,d)),p-=x,d+=x,z)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break t;for(x=0;z=h[d+x++],n.head&&z&&n.length<65536&&(n.head.comment+=String.fromCharCode(z)),z&&x<p;);if(512&n.flags&&(n.check=o(n.check,h,x,d)),p-=x,d+=x,z)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;m<16;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(v!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}m=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;m<32;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}t.adler=n.check=u(v),m=v=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=f,t.avail_out=_,t.next_in=d,t.avail_in=p,n.hold=v,n.bits=m,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){v>>>=7&m,m-=7&m,n.mode=27;break}for(;m<3;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}switch(n.last=1&v,m-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(g(n),n.mode=20,6!==e)break;v>>>=2,m-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}v>>>=2,m-=2;break;case 14:for(v>>>=7&m,m-=7&m;m<32;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,m=v=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(x=n.length){if(p<x&&(x=p),_<x&&(x=_),0===x)break t;i.arraySet(c,h,d,x,f),p-=x,d+=x,_-=x,f+=x,n.length-=x;break}n.mode=12;break;case 17:for(;m<14;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(n.nlen=257+(31&v),v>>>=5,m-=5,n.ndist=1+(31&v),v>>>=5,m-=5,n.ncode=4+(15&v),v>>>=4,m-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;m<3;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}n.lens[R[n.have++]]=7&v,v>>>=3,m-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},M=a(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,M){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=(O=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,A=65535&O,!((S=O>>>24)<=m);){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(A<16)v>>>=S,m-=S,n.lens[n.have++]=A;else{if(16===A){for(N=S+2;m<N;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(v>>>=S,m-=S,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}z=n.lens[n.have-1],x=3+(3&v),v>>>=2,m-=2}else if(17===A){for(N=S+3;m<N;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}m-=S,z=0,x=3+(7&(v>>>=S)),v>>>=3,m-=3}else{for(N=S+7;m<N;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}m-=S,z=0,x=11+(127&(v>>>=S)),v>>>=7,m-=7}if(n.have+x>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;x--;)n.lens[n.have++]=z}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C={bits:n.lenbits},M=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,M){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},M=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,M){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=p&&258<=_){t.next_out=f,t.avail_out=_,t.next_in=d,t.avail_in=p,n.hold=v,n.bits=m,s(t,w),f=t.next_out,c=t.output,_=t.avail_out,d=t.next_in,h=t.input,p=t.avail_in,v=n.hold,m=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;T=(O=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,A=65535&O,!((S=O>>>24)<=m);){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(T&&0==(240&T)){for(P=S,I=T,L=A;T=(O=n.lencode[L+((v&(1<<P+I)-1)>>P)])>>>16&255,A=65535&O,!(P+(S=O>>>24)<=m);){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}v>>>=P,m-=P,n.back+=P}if(v>>>=S,m-=S,n.back+=S,n.length=A,0===T){n.mode=26;break}if(32&T){n.back=-1,n.mode=12;break}if(64&T){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&T,n.mode=22;case 22:if(n.extra){for(N=n.extra;m<N;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=(O=n.distcode[v&(1<<n.distbits)-1])>>>16&255,A=65535&O,!((S=O>>>24)<=m);){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(0==(240&T)){for(P=S,I=T,L=A;T=(O=n.distcode[L+((v&(1<<P+I)-1)>>P)])>>>16&255,A=65535&O,!(P+(S=O>>>24)<=m);){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}v>>>=P,m-=P,n.back+=P}if(v>>>=S,m-=S,n.back+=S,64&T){t.msg="invalid distance code",n.mode=30;break}n.offset=A,n.extra=15&T,n.mode=24;case 24:if(n.extra){for(N=n.extra;m<N;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===_)break t;if(x=w-_,n.offset>x){if((x=n.offset-x)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}k=x>n.wnext?(x-=n.wnext,n.wsize-x):n.wnext-x,x>n.length&&(x=n.length),E=n.window}else E=c,k=f-n.offset,x=n.length;for(_<x&&(x=_),_-=x,n.length-=x;c[f++]=E[k++],--x;);0===n.length&&(n.mode=21);break;case 26:if(0===_)break t;c[f++]=n.length,_--,n.mode=21;break;case 27:if(n.wrap){for(;m<32;){if(0===p)break t;p--,v|=h[d++]<<m,m+=8}if(w-=_,t.total_out+=w,n.total+=w,w&&(t.adler=n.check=n.flags?o(n.check,c,w,f-w):r(n.check,c,w,f-w)),w=_,(n.flags?v:u(v))!==n.check){t.msg="incorrect data check",n.mode=30;break}m=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;m<32;){if(0===p)break t;p--,v+=h[d++]<<m,m+=8}if(v!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}m=v=0}n.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;default:return l}return t.next_out=f,t.avail_out=_,t.next_in=d,t.avail_in=p,n.hold=v,n.bits=m,(n.wsize||w!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&y(t,t.output,t.next_out,w-t.avail_out)?(n.mode=31,-4):(b-=t.avail_in,w-=t.avail_out,t.total_in+=b,t.total_out+=w,n.total+=w,n.wrap&&w&&(t.adler=n.check=n.flags?o(n.check,c,w,t.next_out-w):r(n.check,c,w,t.next_out-w)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==b&&0===w||4===e)&&0===M&&(M=-5),M)},n.inflateEnd=function(t){if(!t||!t.state)return l;var e=t.state;return e.window&&(e.window=null),t.state=null,0},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?l:((n.head=e).done=!1,0):l},n.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?l:11===n.mode&&r(1,e,i,0)!==n.check?-3:y(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var i=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,l,u,h,c,d){var f,p,_,v,m,g,y,b,w,x=d.bits,k=0,E=0,S=0,T=0,A=0,P=0,I=0,L=0,z=0,M=0,C=null,N=0,O=new i.Buf16(16),B=new i.Buf16(16),R=null,D=0;for(k=0;k<=15;k++)O[k]=0;for(E=0;E<l;E++)O[e[n+E]]++;for(A=x,T=15;1<=T&&0===O[T];T--);if(T<A&&(A=T),0===T)return u[h++]=20971520,u[h++]=20971520,d.bits=1,0;for(S=1;S<T&&0===O[S];S++);for(A<S&&(A=S),k=L=1;k<=15;k++)if(L<<=1,(L-=O[k])<0)return-1;if(0<L&&(0===t||1!==T))return-1;for(B[1]=0,k=1;k<15;k++)B[k+1]=B[k]+O[k];for(E=0;E<l;E++)0!==e[n+E]&&(c[B[e[n+E]]++]=E);if(g=0===t?(C=R=c,19):1===t?(C=r,N-=257,R=o,D-=257,256):(C=s,R=a,-1),k=S,m=h,I=E=M=0,_=-1,v=(z=1<<(P=A))-1,1===t&&852<z||2===t&&592<z)return 1;for(;;){for(y=k-I,w=c[E]<g?(b=0,c[E]):c[E]>g?(b=R[D+c[E]],C[N+c[E]]):(b=96,0),f=1<<k-I,S=p=1<<P;u[m+(M>>I)+(p-=f)]=y<<24|b<<16|w|0,0!==p;);for(f=1<<k-1;M&f;)f>>=1;if(0!==f?(M&=f-1,M+=f):M=0,E++,0==--O[k]){if(k===T)break;k=e[n+c[E]]}if(A<k&&(M&v)!==_){for(0===I&&(I=A),m+=S,L=1<<(P=k-I);P+I<T&&!((L-=O[P+I])<=0);)P++,L<<=1;if(z+=1<<P,1===t&&852<z||2===t&&592<z)return 1;u[_=M&v]=A<<24|P<<16|m-h|0}}return 0!==M&&(u[m+M]=k-I<<24|64<<16|0),d.bits=A,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var i=t("../utils/common");function r(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,s=286,a=30,l=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);r(f);var p=new Array(60);r(p);var _=new Array(512);r(_);var v=new Array(256);r(v);var m=new Array(29);r(m);var g,y,b,w=new Array(a);function x(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function k(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function E(t){return t<256?_[t]:_[256+(t>>>7)]}function S(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function T(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function A(t,e,n){T(t,n[2*e],n[2*e+1])}function P(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function I(t,e,n){var i,r,o=new Array(16),s=0;for(i=1;i<=l;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=P(o[a]++,a))}}function L(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function z(t){8<t.bi_valid?S(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function M(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function C(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&M(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!M(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function N(t,e,n){var i,r,s,a,l=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===i?A(t,r,e):(A(t,(s=v[r])+o+1,e),0!==(a=u[s])&&T(t,r-=m[s],a),A(t,s=E(--i),n),0!==(a=h[s])&&T(t,i-=w[s],a)),l<t.last_lit;);A(t,256,e)}function O(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=h=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=h,n=t.heap_len>>1;1<=n;n--)C(t,o,n);for(r=u;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,C(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,u=e.dyn_tree,h=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,_=e.stat_desc.max_length,v=0;for(o=0;o<=l;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)_<(o=u[2*u[2*(i=t.heap[n])+1]+1]+1)&&(o=_,v++),u[2*i+1]=o,h<i||(t.bl_count[o]++,s=0,p<=i&&(s=f[i-p]),a=u[2*i],t.opt_len+=a*(o+s),d&&(t.static_len+=a*(c[2*i+1]+s)));if(0!==v){do{for(o=_-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[_]--,v-=2}while(0<v);for(o=_;0!==o;o--)for(i=t.bl_count[o];0!==i;)h<(r=t.heap[--n])||(u[2*r+1]!==o&&(t.opt_len+=(o-u[2*r+1])*u[2*r],u[2*r+1]=o),i--)}}(t,e),I(o,h,t.bl_count)}function B(t,e,n){var i,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<l&&r===s||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=r,u=(a=0)===s?(l=138,3):r===s?(l=6,3):(l=7,4))}function R(t,e,n){var i,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<l&&r===s)){if(a<u)for(;A(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==o&&(A(t,r,t.bl_tree),a--),A(t,16,t.bl_tree),T(t,a-3,2)):a<=10?(A(t,17,t.bl_tree),T(t,a-3,3)):(A(t,18,t.bl_tree),T(t,a-11,7));o=r,u=(a=0)===s?(l=138,3):r===s?(l=6,3):(l=7,4)}}r(w);var D=!1;function F(t,e,n,r){T(t,0+(r?1:0),3),function(t,e,n,r){z(t),S(t,n),S(t,~n),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}n._tr_init=function(t){D||(function(){var t,e,n,i,r,o=new Array(16);for(i=n=0;i<28;i++)for(m[i]=n,t=0;t<1<<u[i];t++)v[n++]=i;for(v[n-1]=i,i=r=0;i<16;i++)for(w[i]=r,t=0;t<1<<h[i];t++)_[r++]=i;for(r>>=7;i<a;i++)for(w[i]=r<<7,t=0;t<1<<h[i]-7;t++)_[256+r++]=i;for(e=0;e<=l;e++)o[e]=0;for(t=0;t<=143;)f[2*t+1]=8,t++,o[8]++;for(;t<=255;)f[2*t+1]=9,t++,o[9]++;for(;t<=279;)f[2*t+1]=7,t++,o[7]++;for(;t<=287;)f[2*t+1]=8,t++,o[8]++;for(I(f,287,o),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=P(t,5);g=new x(f,u,257,s,l),y=new x(p,h,0,a,l),b=new x(new Array(0),c,0,19,7)}(),D=!0),t.l_desc=new k(t.dyn_ltree,g),t.d_desc=new k(t.dyn_dtree,y),t.bl_desc=new k(t.bl_tree,b),t.bi_buf=0,t.bi_valid=0,L(t)},n._tr_stored_block=F,n._tr_flush_block=function(t,e,n,i){var r,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),O(t,t.l_desc),O(t,t.d_desc),a=function(t){var e;for(B(t,t.dyn_ltree,t.l_desc.max_code),B(t,t.dyn_dtree,t.d_desc.max_code),O(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*d[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==e?F(t,e,n,i):4===t.strategy||s===r?(T(t,2+(i?1:0),3),N(t,f,p)):(T(t,4+(i?1:0),3),function(t,e,n,i){var r;for(T(t,e-257,5),T(t,n-1,5),T(t,i-4,4),r=0;r<i;r++)T(t,t.bl_tree[2*d[r]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),N(t,t.dyn_ltree,t.dyn_dtree)),L(t),i&&z(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(v[n]+o+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){T(t,2,3),A(t,256,f),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){"use strict";e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)},243:function(t,e){!function(t){"use strict";function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function o(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function s(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)},o}function a(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return h(t).split(/\s+/)}function d(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var p=/\{ *([\w_-]+) *\}/g;function _(t,e){return t.replace(p,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function m(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var g="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function y(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||y("RequestAnimationFrame")||w,k=window.cancelAnimationFrame||y("CancelAnimationFrame")||y("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||x!==w)return x.call(window,i(t,e));t.call(e)}function S(t){t&&k.call(window,t)}var T={extend:e,create:n,bind:i,lastId:r,stamp:o,throttle:s,wrapNum:a,falseFn:l,formatNum:u,trim:h,splitWords:c,setOptions:d,getParamString:f,template:_,isArray:v,indexOf:m,emptyImageUrl:g,requestFn:x,cancelFn:k,requestAnimFrame:E,cancelAnimFrame:S};function A(){}A.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=i.__super__=this.prototype,o=n(r);for(var s in o.constructor=i,i.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(i[s]=this[s]);return t.statics&&(e(i,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(n(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},i},A.include=function(t){return e(this.prototype,t),this},A.mergeOptions=function(t){return e(this.prototype.options,t),this},A.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var P={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var s=i[r];if(s.ctx===n&&s.fn===e)return s.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=l;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var l=o[s];l.fn.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var I=A.extend(P);function z(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var M=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function C(t,e,n){return t instanceof z?t:v(t)?new z(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new z(t.x,t.y):new z(t,e,n)}function N(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function O(t,e){return!t||t instanceof N?t:new N(t,e)}function B(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function R(t,e){return t instanceof B?t:new B(t,e)}function D(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof D?t:v(t)&&"object"!=typeof t[0]?3===t.length?new D(t[0],t[1],t[2]):2===t.length?new D(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new D(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new D(t,e,n)}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(t){return this.clone()._add(C(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(C(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=M(this.x),this.y=M(this.y),this},distanceTo:function(t){var e=(t=C(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=C(t)).x===this.x&&t.y===this.y},contains:function(t){return t=C(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},N.prototype={extend:function(t){return t=C(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new z(this.min.x,this.max.y)},getTopRight:function(){return new z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof z?C(t):O(t))instanceof N?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=O(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y;return o&&s},overlaps:function(t){t=O(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof D)e=t,n=t;else{if(!(t instanceof B))return t?this.extend(F(t)||R(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new D(e.lat,e.lng),this._northEast=new D(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new B(new D(e.lat-i,e.lng-r),new D(n.lat+i,n.lng+r))},getCenter:function(){return new D((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new D(this.getNorth(),this.getWest())},getSouthEast:function(){return new D(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof D||"lat"in t?F(t):R(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof B?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=R(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng;return o&&s},overlaps:function(t){t=R(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=R(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},D.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,F(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return R([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new D(this.lat,this.lng,this.alt)}};var Z,j={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new N(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng;return new D(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),s=t.getNorthEast();return new B(new D(o.lat-i,o.lng-r),new D(s.lat-i,s.lng-r))}},U=e({},j,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),H=6378137,W={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new z(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new D((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(Z=H*Math.PI,new N([-Z,-Z],[Z,Z]))};function G(t,e,n,i){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function V(t,e,n,i){return new G(t,e,n,i)}G.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new z((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var K=e({},U,{code:"EPSG:3857",projection:W,transformation:function(){var t=.5/(Math.PI*W.R);return V(t,.5,-t,.5)}()}),J=e({},K,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t,e){var n,i,r,o,s,a,l="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(s=t[n]).length;i<o;i++)l+=(i?"L":"M")+(a=s[i]).x+" "+a.y;l+=e?Pt?"z":"x":""}return l||"M0 0"}var Y=document.documentElement.style,$="ActiveXObject"in window,Q=$&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=Lt("webkit"),nt=Lt("android"),it=Lt("android 2")||Lt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&Lt("Google")&&rt<537&&!("AudioNode"in window),st=!!window.opera,at=!tt&&Lt("chrome"),lt=Lt("gecko")&&!et&&!st&&!$,ut=!at&&Lt("safari"),ht=Lt("phantom"),ct="OTransition"in Y,dt=0===navigator.platform.indexOf("Win"),ft=$&&"transition"in Y,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,_t="MozPerspective"in Y,vt=!window.L_DISABLE_3D&&(ft||pt||_t)&&!ct&&!ht,mt="undefined"!=typeof orientation||Lt("mobile"),gt=mt&&et,yt=mt&&pt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),xt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),kt=mt&&st,Et=mt&&lt,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),At=!!document.createElement("canvas").getContext,Pt=!(!document.createElementNS||!X("svg").createSVGRect),It=!Pt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Lt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var zt={ie:$,ielt9:Q,edge:tt,webkit:et,android:nt,android23:it,androidStock:ot,opera:st,chrome:at,gecko:lt,safari:ut,phantom:ht,opera12:ct,win:dt,ie3d:ft,webkit3d:pt,gecko3d:_t,any3d:vt,mobile:mt,mobileWebkit:gt,mobileWebkit3d:yt,msPointer:bt,pointer:wt,touch:xt,mobileOpera:kt,mobileGecko:Et,retina:St,passiveEvents:Tt,canvas:At,svg:Pt,vml:It},Mt=bt?"MSPointerDown":"pointerdown",Ct=bt?"MSPointerMove":"pointermove",Nt=bt?"MSPointerUp":"pointerup",Ot=bt?"MSPointerCancel":"pointercancel",Bt={},Rt=!1;function Dt(t,e,n,r){return"touchstart"===e?function(t,e,n){var r=i((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Oe(t),Ut(t,e)}));t["_leaflet_touchstart"+n]=r,t.addEventListener(Mt,r,!1),Rt||(document.addEventListener(Mt,Ft,!0),document.addEventListener(Ct,Zt,!0),document.addEventListener(Nt,jt,!0),document.addEventListener(Ot,jt,!0),Rt=!0)}(t,n,r):"touchmove"===e?function(t,e,n){var i=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ut(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Ct,i,!1)}(t,n,r):"touchend"===e&&function(t,e,n){var i=function(t){Ut(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Nt,i,!1),t.addEventListener(Ot,i,!1)}(t,n,r),this}function Ft(t){Bt[t.pointerId]=t}function Zt(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function jt(t){delete Bt[t.pointerId]}function Ut(t,e){for(var n in t.touches=[],Bt)t.touches.push(Bt[n]);t.changedTouches=[t],e(t)}var Ht=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Wt=bt?"MSPointerUp":wt?"pointerup":"touchend",Gt="_leaflet_";var Vt,Kt,Jt,Xt,qt,Yt=fe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$t=fe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Qt="webkitTransition"===$t||"OTransition"===$t?$t+"End":"transitionend";function te(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ne(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ie(t){var e=t.parentNode;e&&e.removeChild(t)}function re(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function oe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function se(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ae(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ce(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function le(t,e){if(void 0!==t.classList)for(var n=c(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!ae(t,e)){var o=ce(t);he(t,(o?o+" ":"")+e)}}function ue(t,e){void 0!==t.classList?t.classList.remove(e):he(t,h((" "+ce(t)+" ").replace(" "+e+" "," ")))}function he(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function fe(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function pe(t,e,n){var i=e||new z(0,0);t.style[Yt]=(ft?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function _e(t,e){t._leaflet_pos=e,vt?pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ve(t){return t._leaflet_pos||new z(0,0)}if("onselectstart"in document)Vt=function(){Se(window,"selectstart",Oe)},Kt=function(){Ae(window,"selectstart",Oe)};else{var me=fe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vt=function(){if(me){var t=document.documentElement.style;Jt=t[me],t[me]="none"}},Kt=function(){me&&(document.documentElement.style[me]=Jt,Jt=void 0)}}function ge(){Se(window,"dragstart",Oe)}function ye(){Ae(window,"dragstart",Oe)}function be(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(we(),Xt=t,qt=t.style.outline,t.style.outline="none",Se(window,"keydown",we))}function we(){Xt&&(Xt.style.outline=qt,Xt=void 0,qt=void 0,Ae(window,"keydown",we))}function xe(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function ke(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ee={TRANSFORM:Yt,TRANSITION:$t,TRANSITION_END:Qt,get:te,getStyle:ee,create:ne,remove:ie,empty:re,toFront:oe,toBack:se,hasClass:ae,addClass:le,removeClass:ue,setClass:he,getClass:ce,setOpacity:de,testProp:fe,setTransform:pe,setPosition:_e,getPosition:ve,disableTextSelection:Vt,enableTextSelection:Kt,disableImageDrag:ge,enableImageDrag:ye,preventOutline:be,restoreOutline:we,getSizedParentNode:xe,getScale:ke};function Se(t,e,n,i){if("object"==typeof e)for(var r in e)Le(t,r,e[r],n);else for(var o=0,s=(e=c(e)).length;o<s;o++)Le(t,e[o],n,i);return this}var Te="_leaflet_events";function Ae(t,e,n,i){if("object"==typeof e)for(var r in e)ze(t,r,e[r],n);else if(e)for(var o=0,s=(e=c(e)).length;o<s;o++)ze(t,e[o],n,i);else{for(var a in t[Te])ze(t,a,t[Te][a]);delete t[Te]}return this}function Pe(){if(wt)return!(tt||ut)}var Ie={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Le(t,e,n,i){var r=e+o(n)+(i?"_"+o(i):"");if(t[Te]&&t[Te][r])return this;var s=function(e){return n.call(i||t,e||window.event)},a=s;wt&&0===e.indexOf("touch")?Dt(t,e,s,r):xt&&"dblclick"===e&&!Pe()?function(t,e,n){var i,r,o=!1;function s(t){if(wt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(i||e);r=t.touches?t.touches[0]:t,o=n>0&&n<=250,i=e}function a(t){if(o&&!r.cancelBubble){if(wt){if("mouse"===t.pointerType)return;var n,s,a={};for(s in r)n=r[s],a[s]=n&&n.bind?n.bind(r):n;r=a}r.type="dblclick",r.button=0,e(r),i=null}}t[Gt+Ht+n]=s,t[Gt+Wt+n]=a,t[Gt+"dblclick"+n]=e,t.addEventListener(Ht,s,!!Tt&&{passive:!1}),t.addEventListener(Wt,a,!!Tt&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,s,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ie[e]||e,s,!!Tt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,He(t,e)&&a(e)},t.addEventListener(Ie[e],s,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[Te]=t[Te]||{},t[Te][r]=s}function ze(t,e,n,i){var r=e+o(n)+(i?"_"+o(i):""),s=t[Te]&&t[Te][r];if(!s)return this;wt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Mt,i,!1):"touchmove"===e?t.removeEventListener(Ct,i,!1):"touchend"===e&&(t.removeEventListener(Nt,i,!1),t.removeEventListener(Ot,i,!1))}(t,e,r):xt&&"dblclick"===e&&!Pe()?function(t,e){var n=t[Gt+Ht+e],i=t[Gt+Wt+e],r=t[Gt+"dblclick"+e];t.removeEventListener(Ht,n,!!Tt&&{passive:!1}),t.removeEventListener(Wt,i,!!Tt&&{passive:!1}),t.removeEventListener("dblclick",r,!1)}(t,r):"removeEventListener"in t?t.removeEventListener(Ie[e]||e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[Te][r]=null}function Me(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ue(t),this}function Ce(t){return Le(t,"wheel",Me),this}function Ne(t){return Se(t,"mousedown touchstart dblclick",Me),Le(t,"click",je),this}function Oe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Be(t){return Oe(t),Me(t),this}function Re(t,e){if(!e)return new z(t.clientX,t.clientY);var n=ke(e),i=n.boundingClientRect;return new z((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var De=dt&&at?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function Fe(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/De:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ze={};function je(t){Ze[t.type]=!0}function Ue(t){var e=Ze[t.type];return Ze[t.type]=!1,e}function He(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var We={on:Se,off:Ae,stopPropagation:Me,disableScrollPropagation:Ce,disableClickPropagation:Ne,preventDefault:Oe,stop:Be,getMousePosition:Re,getWheelDelta:Fe,fakeStop:je,skipped:Ue,isExternalTarget:He,addListener:Se,removeListener:Ae},Ge=I.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=ve(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),_e(this._el,n),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ve=I.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$t&&vt&&!kt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,Qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(F(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof z?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),s=this.containerPointToLatLng(r.add(o));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():R(t);var n=C(e.paddingTopLeft||e.padding||[0,0]),i=C(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r);return{center:this.unproject(s.add(a).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=R(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=C(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ge,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){le(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!vt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),s=this._zoom;t=F(t),e=void 0===e?s:e;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,e),u=r.distanceTo(i)||1,h=1.42,c=2.0164;function d(t){var e=(l*l-a*a+(t?-1:1)*c*c*u*u)/(2*(t?l:a)*c*u),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var _=d(0);function v(t){return a*(p(_)*(f(e=_+h*t)/p(e))-f(_))/c;var e}var m=Date.now(),g=(d(1)-_)/h,y=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-m)/y,l=function(t){return 1-Math.pow(1-t,1.5)}(o)*g;o<=1?(this._flyToFrame=E(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(v(l)/u)),s),this.getScaleZoom(a/function(t){return a*(p(_)/p(_+h*t))}(l),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=R(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,R(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=C((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=C(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),s=this.project(t),a=this.getPixelBounds(),l=a.getSize().divideBy(2),u=O([a.min.add(n),a.max.subtract(i)]);if(!u.contains(s)){this._enforcingBounds=!0;var h=o.subtract(s),c=C(s.x+h.x,s.y+h.y);(s.x<u.min.x||s.x>u.max.x)&&(c.x=o.x-h.x,h.x>0?c.x+=l.x-n.x:c.x-=l.x-i.x),(s.y<u.min.y||s.y>u.max.y)&&(c.y=o.y-h.y,h.y>0?c.y+=l.y-n.y:c.y-=l.y-i.y),this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=n.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new D(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(o[s]=t.coords[s]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ie(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ne("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=R(t),n=C(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),u=O(this.project(a,i),this.project(s,i)).getSize(),h=vt?this.options.zoomSnap:1,c=l.x/u.x,d=l.y/u.y,f=e?Math.max(c,d):Math.min(c,d);return i=this.getScaleZoom(f,i),h&&(i=Math.round(i/(h/100))*(h/100),i=e?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(C(t),e)},layerPointToLatLng:function(t){var e=C(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(R(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return C(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return C(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(C(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return Re(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=te(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Se(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,le(t,"leaflet-container"+(xt?" leaflet-touch":"")+(St?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(t.markerPane,"leaflet-zoom-hide"),le(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){_e(this._mapPane,new z(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_e(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Ae:Se;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=E((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[o(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!He(s,t))break;if(i.push(n),r)break}if(s===this._container)break;s=s.parentNode}return i.length||a||r||!He(s,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ue(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||be(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var o=i[0];"contextmenu"===n&&o.listens(n,!0)&&Oe(t);var s={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=o.getLatLng&&(!o._radius||o._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(n,s,!0),s.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==m(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ve(this._mapPane)||new z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return O([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new N(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new N(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=O(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new z(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=vt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Yt,n=this._proxy.style[e];pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(E((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),E((function(){this._moveEnd(!0)}),this))}});var Ke=A.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return le(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Je=function(t){return new Ke(t)};Ve.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ne("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=ne("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ie(this._controlCorners[t]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xe=Ke.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ke.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ne("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ne(e),Ce(e);var i=this._section=ne("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Se(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ne("a",t+"-toggle",e);r.href="#",r.title="Layers",xt?(Se(r,"click",Be),Se(r,"click",this.expand,this)):Se(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ne("div",t+"-base",i),this._separator=ne("div",t+"-separator",i),this._overlaysList=ne("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;re(this._baseLayersList),re(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(e),e.layerId=o(t.layer),Se(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var s=document.createElement("div");return n.appendChild(s),s.appendChild(e),s.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),qe=Ke.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ne("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=ne("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ne(o),Se(o,"click",Be),Se(o,"click",r,this),Se(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ue(this._zoomInButton,e),ue(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&le(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&le(this._zoomInButton,e)}});Ve.mergeOptions({zoomControl:!0}),Ve.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new qe,this.addControl(this.zoomControl))}));var Ye=Ke.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ne("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ne("div",e,n)),t.imperial&&(this._iScale=ne("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),$e=Ke.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ne("div","leaflet-control-attribution"),Ne(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ve.mergeOptions({attributionControl:!0}),Ve.addInitHook((function(){this.options.attributionControl&&(new $e).addTo(this)}));Ke.Layers=Xe,Ke.Zoom=qe,Ke.Scale=Ye,Ke.Attribution=$e,Je.layers=function(t,e,n){return new Xe(t,e,n)},Je.zoom=function(t){return new qe(t)},Je.scale=function(t){return new Ye(t)},Je.attribution=function(t){return new $e(t)};var Qe=A.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qe.addTo=function(t,e){return t.addHandler(e,this),this};var tn,en={Events:P},nn=xt?"touchstart mousedown":"mousedown",rn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},on={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},sn=I.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){d(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Se(this._dragStartTarget,nn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sn._dragging===this&&this.finishDrag(),Ae(this._dragStartTarget,nn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!ae(this._element,"leaflet-zoom-anim")&&!(sn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(sn._dragging=this,this._preventOutline&&be(this._element),ge(),Vt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=xe(this._element);this._startPoint=new z(e.clientX,e.clientY),this._parentScale=ke(n),Se(document,on[t.type],this._onMove,this),Se(document,rn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new z(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Oe(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ve(this._element).subtract(n),le(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=E(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_e(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ue(document.body,"leaflet-dragging"),this._lastTarget&&(ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),on)Ae(document,on[t],this._onMove,this),Ae(document,rn[t],this._onUp,this);ye(),Kt(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,sn._dragging=!1}});function an(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,un(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)fn(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function ln(t,e,n){return Math.sqrt(pn(t,e,n,!0))}function un(t,e,n,i,r){var o,s,a,l=0;for(s=i+1;s<=r-1;s++)(a=pn(t[s],t[i],t[r],!0))>l&&(o=s,l=a);l>n&&(e[o]=1,un(t,e,n,i,o),un(t,e,n,o,r))}function hn(t,e,n,i,r){var o,s,a,l=i?tn:dn(t,n),u=dn(e,n);for(tn=u;;){if(!(l|u))return[t,e];if(l&u)return!1;a=dn(s=cn(t,e,o=l||u,n,r),n),o===l?(t=s,l=a):(e=s,u=a)}}function cn(t,e,n,i,r){var o,s,a=e.x-t.x,l=e.y-t.y,u=i.min,h=i.max;return 8&n?(o=t.x+a*(h.y-t.y)/l,s=h.y):4&n?(o=t.x+a*(u.y-t.y)/l,s=u.y):2&n?(o=h.x,s=t.y+l*(h.x-t.x)/a):1&n&&(o=u.x,s=t.y+l*(u.x-t.x)/a),new z(o,s,r)}function dn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function fn(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function pn(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,l=n.y-s,u=a*a+l*l;return u>0&&((r=((t.x-o)*a+(t.y-s)*l)/u)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=l*r)),a=t.x-o,l=t.y-s,i?a*a+l*l:new z(o,s)}function _n(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_n(t)}var mn={simplify:an,pointToSegmentDistance:ln,closestPointOnSegment:function(t,e,n){return pn(t,e,n)},clipSegment:hn,_getEdgeIntersection:cn,_getBitCode:dn,_sqClosestPointOnSegment:pn,isFlat:_n,_flat:vn};function gn(t,e,n){var i,r,o,s,a,l,u,h,c,d=[1,4,2,8];for(r=0,u=t.length;r<u;r++)t[r]._code=dn(t[r],e);for(s=0;s<4;s++){for(h=d[s],i=[],r=0,o=(u=t.length)-1;r<u;o=r++)a=t[r],l=t[o],a._code&h?l._code&h||((c=cn(l,a,h,e,n))._code=dn(c,e),i.push(c)):(l._code&h&&((c=cn(l,a,h,e,n))._code=dn(c,e),i.push(c)),i.push(a));t=i}return t}var yn={clipPolygon:gn},bn={project:function(t){return new z(t.lng,t.lat)},unproject:function(t){return new D(t.y,t.x)},bounds:new N([-180,-90],[180,90])},wn={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-n*Math.log(Math.max(a,1e-10)),new z(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),a+=u=Math.PI/2-2*Math.atan(s*e)-a;return new D(a*n,t.x*n/i)}},xn={LonLat:bn,Mercator:wn,SphericalMercator:W},kn=e({},U,{code:"EPSG:3395",projection:wn,transformation:function(){var t=.5/(Math.PI*wn.R);return V(t,.5,-t,.5)}()}),En=e({},U,{code:"EPSG:4326",projection:bn,transformation:V(1/180,1,-1/180,.5)}),Sn=e({},j,{projection:bn,transformation:V(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});j.Earth=U,j.EPSG3395=kn,j.EPSG3857=K,j.EPSG900913=J,j.EPSG4326=En,j.Simple=Sn;var Tn=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ve.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var An=Tn.extend({initialize:function(t,e){var n,i;if(d(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Pn=An.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),An.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),An.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new B;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),In=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=C(i),o=C("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return St&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Ln=In.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ln.imagePath||(Ln.imagePath=this._detectIconPath()),(this.options.imagePath||Ln.imagePath)+In.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ne("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),zn=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new sn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=ve(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=O(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r));if(!l.contains(o)){var u=C((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(i);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),_e(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=ve(e._icon),r=e._map.layerPointToLatLng(i);n&&_e(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Mn=Tn.extend({options:{icon:new Ln,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),le(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(le(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_e(this._icon,t),this._shadow&&_e(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Cn=Tn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Nn=Cn.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Cn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new N(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var On=Nn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),d(this,n),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Cn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===U.distance){var r=Math.PI/180,o=this._mRadius/U.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),l=s.add(a).divideBy(2),u=n.unproject(l).lat,h=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(u*r))/(Math.cos(e*r)*Math.cos(u*r)))/r;(isNaN(h)||0===h)&&(h=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-n.project([u,t-h]).x,this._radiusY=l.y-s.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}});var Bn=Cn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=pn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],u=1,h=l.length;u<h;u++){var c=o(t,e=l[u-1],n=l[u],!0);c<i&&(i=c,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<l-1;t++)if(r=a[t],o=a[t+1],(i+=n=r.distanceTo(o))>e)return s=(i-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-r.x),o.y-s*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return _n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=_n(t),i=0,r=t.length;i<r;i++)n?(e[i]=F(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new z(t,t);this._pxBounds=new N([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof D,s=t.length;if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,s,a,l=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(a=this._rings[e]).length;n<o-1;n++)(s=hn(a[n],a[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=an(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(s=(a=this._parts[n]).length)-1;i<s;r=i++)if((e||0!==i)&&ln(t,a[r],a[i])<=l)return!0;return!1}});Bn._flat=vn;var Rn=Bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a,l,u=this._rings[0],h=u.length;if(!h)return null;for(o=s=a=0,t=0,e=h-1;t<h;e=t++)n=u[t],i=u[e],r=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*r,a+=(n.y+i.y)*r,o+=3*r;return l=0===o?u[0]:[s/o,a/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Bn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof D&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Bn.prototype._setLatLngs.call(this,t),_n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new z(e,e);if(t=new N(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=gn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(o=0,s=(l=(e=this._parts[r]).length)-1;o<l;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||Bn.prototype._containsPoint.call(this,t,!0)}});var Dn=Pn.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=v(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=Fn(t,o);return s?(s.feature=Vn(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Fn(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],u=e&&e.pointToLayer,h=e&&e.coordsToLatLng||jn;if(!a&&!s)return null;switch(s.type){case"Point":return Zn(u,t,n=h(a),e);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=h(a[r]),l.push(Zn(u,t,n,e));return new Pn(l);case"LineString":case"MultiLineString":return i=Un(a,"LineString"===s.type?0:1,h),new Bn(i,e);case"Polygon":case"MultiPolygon":return i=Un(a,"Polygon"===s.type?1:2,h),new Rn(i,e);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var c=Fn({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new Pn(l);default:throw new Error("Invalid GeoJSON object.")}}function Zn(t,e,n,i){return t?t(e,n):new Mn(n,i&&i.markersInheritOptions&&i)}function jn(t){return new D(t[1],t[0],t[2])}function Un(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)i=e?Un(t[o],e-1,n):(n||jn)(t[o]),r.push(i);return r}function Hn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function Wn(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Wn(t[o],e-1,n,i):Hn(t[o],i));return!e&&n&&r.push(r[0]),r}function Gn(t,n){return t.feature?e({},t.feature,{geometry:n}):Vn(n)}function Vn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Kn={toGeoJSON:function(t){return Gn(this,{type:"Point",coordinates:Hn(this.getLatLng(),t)})}};function Jn(t,e){return new Dn(t,e)}Mn.include(Kn),On.include(Kn),Nn.include(Kn),Bn.include({toGeoJSON:function(t){var e=!_n(this._latlngs);return Gn(this,{type:(e?"Multi":"")+"LineString",coordinates:Wn(this._latlngs,e?1:0,!1,t)})}}),Rn.include({toGeoJSON:function(t){var e=!_n(this._latlngs),n=e&&!_n(this._latlngs[0]),i=Wn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Gn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),An.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Gn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=Vn(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}})),n?Gn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Xn=Jn,qn=Tn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=R(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&oe(this._image),this},bringToBack:function(){return this._map&&se(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=R(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ne("img");le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;pe(this._image,n,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();_e(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Yn=qn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ne("video");if(le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var s=0;s<this._url.length;s++){var a=ne("source");a.src=this._url[s],e.appendChild(a)}}}});var $n=qn.extend({_initImage:function(){var t=this._image=this._url;le(t,"leaflet-image-layer"),this._zoomAnimated&&le(t,"leaflet-zoom-animated"),this.options.className&&le(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});var Qn=Tn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(i(ie,void 0,this._container),200)):ie(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oe(this._container),this},bringToBack:function(){return this._map&&se(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Tn||(n=e,e=t),e instanceof Pn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=C(this.options.offset),n=this._getAnchor();this._zoomAnimated?_e(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),ti=Qn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Qn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Cn||this._source.on("preclick",Me))},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Cn||this._source.off("preclick",Me))},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ne("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ne("div",t+"-content-wrapper",e);if(this._contentNode=ne("div",t+"-content",n),Ne(e),Ce(this._contentNode),Se(e,"contextmenu",Me),this._tipContainer=ne("div",t+"-tip-container",e),this._tip=ne("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ne("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Se(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",le(t,o)):ue(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();_e(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ee(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new z(this._containerLeft,-n-this._containerBottom);r._add(ve(this._container));var o=t.layerPointToContainerPoint(r),s=C(this.options.autoPanPadding),a=C(this.options.autoPanPaddingTopLeft||s),l=C(this.options.autoPanPaddingBottomRight||s),u=t.getSize(),h=0,c=0;o.x+i+l.x>u.x&&(h=o.x+i-u.x+l.x),o.x-h-a.x<0&&(h=o.x-a.x),o.y+n+l.y>u.y&&(c=o.y+n-u.y+l.y),o.y-c-a.y<0&&(c=o.y-a.y),(h||c)&&t.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(t){this._close(),Be(t)},_getAnchor:function(){return C(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ve.mergeOptions({closePopupOnClick:!0}),Ve.include({openPopup:function(t,e,n){return t instanceof ti||(t=new ti(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Tn.include({bindPopup:function(t,e){return t instanceof ti?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new ti(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Be(t),e instanceof Cn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ei=Qn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Qn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ne("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(t),a=this.options.direction,l=r.offsetWidth,u=r.offsetHeight,h=C(this.options.offset),c=this._getAnchor();"top"===a?(e=l/2,n=u):"bottom"===a?(e=l/2,n=0):"center"===a?(e=l/2,n=u/2):"right"===a?(e=0,n=u/2):"left"===a?(e=l,n=u/2):s.x<o.x?(a="right",e=0,n=u/2):(a="left",e=l+2*(h.x+c.x),n=u/2),t=t.subtract(C(e,n,!0)).add(h).add(c),ue(r,"leaflet-tooltip-right"),ue(r,"leaflet-tooltip-left"),ue(r,"leaflet-tooltip-top"),ue(r,"leaflet-tooltip-bottom"),le(r,"leaflet-tooltip-"+a),_e(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return C(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ve.include({openTooltip:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Tn.include({bindTooltip:function(t,e){return t instanceof ei?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new ei(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),xt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(le(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ue(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ni=In.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(re(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=C(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});In.Default=Ln;var ii=Tn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ie(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(se(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof z?t:new z(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){de(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);de(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(S(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ie(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ie(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new z(+r,+o);a.z=+s;var l=this._tileCoordsToKey(a),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new z(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?pe(t.el,r,i):_e(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new N(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,l=new N(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var h=this._tiles[u].coords;h.z===this._tileZoom&&l.contains(new z(h.x,h.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var c=r.min.y;c<=r.max.y;c++)for(var d=r.min.x;d<=r.max.x;d++){var f=new z(d,c);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:s.push(f)}}if(s.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var _=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],_);this._level.el.appendChild(_)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return R(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new B(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new z(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ie(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){le(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Q&&this.options.opacity<1&&de(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&E(i(this._tileReady,this,t,null,o)),_e(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(de(n.el,0),S(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(le(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new z(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var ri=ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&St&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Se(n,"load",i(this._tileOnLoad,this,e,n)),Se(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:St?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return _(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Q?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=g,ie(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",g),ii.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==g))return ii.prototype._tileReady.call(this,t,e,n)}});function oi(t,e){return new ri(t,e)}var si=ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);var o=(n=d(this,n)).detectRetina&&St?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ri.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=O(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===En?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=ri.prototype.getTileUrl.call(this,t);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ri.WMS=si,oi.wms=function(t,e){return new si(t,e)};var ai=Tn.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=ve(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),s=this._map.project(t,e).subtract(o),a=r.multiplyBy(-n).add(i).add(r).subtract(s);vt?pe(this._container,a,n):_e(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new N(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),li=ai.extend({getEvents:function(){var t=ai.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ai.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",this._onMouseMove,this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,ie(this._container),Ae(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ai.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=St?2:1;_e(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",St&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ai.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],l[i?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(je(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ue(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(le(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ui(t){return At?new li(t):null}var hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ci={_initContainer:function(){this._container=ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ai.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hi("shape");le(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ie(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=hi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=hi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){oe(t._container)},_bringToBack:function(t){se(t._container)}},di=It?hi:X,fi=ai.extend({getEvents:function(){var t=ai.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=di("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=di("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),Ae(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ai.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),_e(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=di("path");t.options.className&&le(e,t.options.className),t.options.interactive&&le(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ie(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){oe(t._path)},_bringToBack:function(t){se(t._path)}});function pi(t){return Pt||It?new fi(t):null}It&&fi.include(ci),Ve.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ui(t)||pi(t)}});var _i=Rn.extend({initialize:function(t,e){Rn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=R(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});fi.create=di,fi.pointsToPath=q,Dn.geometryToLayer=Fn,Dn.coordsToLatLng=jn,Dn.coordsToLatLngs=Un,Dn.latLngToCoords=Hn,Dn.latLngsToCoords=Wn,Dn.getFeature=Gn,Dn.asFeature=Vn,Ve.mergeOptions({boxZoom:!0});var vi=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Vt(),ge(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:Be,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ne("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new N(this._point,this._startPoint),n=e.getSize();_e(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ie(this._box),ue(this._container,"leaflet-crosshair")),Kt(),ye(),Ae(document,{contextmenu:Be,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ve.addInitHook("addHandler","boxZoom",vi),Ve.mergeOptions({doubleClickZoom:!0});var mi=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Ve.addInitHook("addHandler","doubleClickZoom",mi),Ve.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gi=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new sn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ue(this._map._container,"leaflet-grab"),ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=R(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),l=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),h=a.multiplyBy(u/l),c=u/(n.inertiaDeceleration*s),d=h.multiplyBy(-c/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),E((function(){e.panBy(d,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ve.addInitHook("addHandler","dragging",gi),Ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yi=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ae(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=C(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Be(t)}}});Ve.addInitHook("addHandler","keyboard",yi),Ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bi=Qe.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Fe(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Be(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Ve.addInitHook("addHandler","scrollWheelZoom",bi),Ve.mergeOptions({tap:!0,tapTolerance:15});var wi=Qe.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Oe(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new z(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&le(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Se(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ae(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ue(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new z(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!xt||wt&&!ut||Ve.addInitHook("addHandler","tap",wi),Ve.mergeOptions({touchZoom:xt&&!it,bounceAtZoomLimits:!0});var xi=Qe.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend",this._onTouchEnd,this),Oe(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=E(a,this,!0),Oe(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ve.addInitHook("addHandler","touchZoom",xi),Ve.BoxZoom=vi,Ve.DoubleClickZoom=mi,Ve.Drag=gi,Ve.Keyboard=yi,Ve.ScrollWheelZoom=bi,Ve.Tap=wi,Ve.TouchZoom=xi,t.version="1.7.1",t.Control=Ke,t.control=Je,t.Browser=zt,t.Evented=I,t.Mixin=en,t.Util=T,t.Class=A,t.Handler=Qe,t.extend=e,t.bind=i,t.stamp=o,t.setOptions=d,t.DomEvent=We,t.DomUtil=Ee,t.PosAnimation=Ge,t.Draggable=sn,t.LineUtil=mn,t.PolyUtil=yn,t.Point=z,t.point=C,t.Bounds=N,t.bounds=O,t.Transformation=G,t.transformation=V,t.Projection=xn,t.LatLng=D,t.latLng=F,t.LatLngBounds=B,t.latLngBounds=R,t.CRS=j,t.GeoJSON=Dn,t.geoJSON=Jn,t.geoJson=Xn,t.Layer=Tn,t.LayerGroup=An,t.layerGroup=function(t,e){return new An(t,e)},t.FeatureGroup=Pn,t.featureGroup=function(t,e){return new Pn(t,e)},t.ImageOverlay=qn,t.imageOverlay=function(t,e,n){return new qn(t,e,n)},t.VideoOverlay=Yn,t.videoOverlay=function(t,e,n){return new Yn(t,e,n)},t.SVGOverlay=$n,t.svgOverlay=function(t,e,n){return new $n(t,e,n)},t.DivOverlay=Qn,t.Popup=ti,t.popup=function(t,e){return new ti(t,e)},t.Tooltip=ei,t.tooltip=function(t,e){return new ei(t,e)},t.Icon=In,t.icon=function(t){return new In(t)},t.DivIcon=ni,t.divIcon=function(t){return new ni(t)},t.Marker=Mn,t.marker=function(t,e){return new Mn(t,e)},t.TileLayer=ri,t.tileLayer=oi,t.GridLayer=ii,t.gridLayer=function(t){return new ii(t)},t.SVG=fi,t.svg=pi,t.Renderer=ai,t.Canvas=li,t.canvas=ui,t.Path=Cn,t.CircleMarker=Nn,t.circleMarker=function(t,e){return new Nn(t,e)},t.Circle=On,t.circle=function(t,e,n){return new On(t,e,n)},t.Polyline=Bn,t.polyline=function(t,e){return new Bn(t,e)},t.Polygon=Rn,t.polygon=function(t,e){return new Rn(t,e)},t.Rectangle=_i,t.rectangle=function(t,e){return new _i(t,e)},t.Map=Ve,t.map=function(t,e){return new Ve(t,e)};var ki=window.L;t.noConflict=function(){return window.L=ki,this},window.L=t}(e)},486:function(t,e,n){var i;t=n.nmd(t),function(){var r,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,u=128,h=1/0,c=9007199254740991,d=NaN,f=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],_="[object Arguments]",v="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",b="[object Function]",w="[object GeneratorFunction]",x="[object Map]",k="[object Number]",E="[object Object]",S="[object Promise]",T="[object RegExp]",A="[object Set]",P="[object String]",I="[object Symbol]",L="[object WeakMap]",z="[object ArrayBuffer]",M="[object DataView]",C="[object Float32Array]",N="[object Float64Array]",O="[object Int8Array]",B="[object Int16Array]",R="[object Int32Array]",D="[object Uint8Array]",F="[object Uint8ClampedArray]",Z="[object Uint16Array]",j="[object Uint32Array]",U=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,K=RegExp(G.source),J=RegExp(V.source),X=/<%-([\s\S]+?)%>/g,q=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+/,rt=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",kt="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="["+Et+"]",Tt="["+wt+"]",At="\\d+",Pt="["+xt+"]",It="[^\\ud800-\\udfff"+Et+At+"\\u2700-\\u27bf"+xt+kt+"]",Lt="\\ud83c[\\udffb-\\udfff]",zt="[^\\ud800-\\udfff]",Mt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ct="[\\ud800-\\udbff][\\udc00-\\udfff]",Nt="["+kt+"]",Ot="(?:"+Pt+"|"+It+")",Bt="(?:"+Nt+"|"+It+")",Rt="(?:['’](?:d|ll|m|re|s|t|ve))?",Dt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ft="(?:"+Tt+"|"+Lt+")?",Zt="[\\ufe0e\\ufe0f]?",jt=Zt+Ft+"(?:\\u200d(?:"+[zt,Mt,Ct].join("|")+")"+Zt+Ft+")*",Ut="(?:"+["[\\u2700-\\u27bf]",Mt,Ct].join("|")+")"+jt,Ht="(?:"+[zt+Tt+"?",Tt,Mt,Ct,"[\\ud800-\\udfff]"].join("|")+")",Wt=RegExp("['’]","g"),Gt=RegExp(Tt,"g"),Vt=RegExp(Lt+"(?="+Lt+")|"+Ht+jt,"g"),Kt=RegExp([Nt+"?"+Pt+"+"+Rt+"(?="+[St,Nt,"$"].join("|")+")",Bt+"+"+Dt+"(?="+[St,Nt+Ot,"$"].join("|")+")",Nt+"?"+Ot+"+"+Rt,Nt+"+"+Dt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",At,Ut].join("|"),"g"),Jt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Xt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yt=-1,$t={};$t[C]=$t[N]=$t[O]=$t[B]=$t[R]=$t[D]=$t[F]=$t[Z]=$t[j]=!0,$t[_]=$t[v]=$t[z]=$t[m]=$t[M]=$t[g]=$t[y]=$t[b]=$t[x]=$t[k]=$t[E]=$t[T]=$t[A]=$t[P]=$t[L]=!1;var Qt={};Qt[_]=Qt[v]=Qt[z]=Qt[M]=Qt[m]=Qt[g]=Qt[C]=Qt[N]=Qt[O]=Qt[B]=Qt[R]=Qt[x]=Qt[k]=Qt[E]=Qt[T]=Qt[A]=Qt[P]=Qt[I]=Qt[D]=Qt[F]=Qt[Z]=Qt[j]=!0,Qt[y]=Qt[b]=Qt[L]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,ie="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,re="object"==typeof self&&self&&self.Object===Object&&self,oe=ie||re||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,le=ae&&ae.exports===se,ue=le&&ie.process,he=function(){try{return ae&&ae.require&&ae.require("util").types||ue&&ue.binding&&ue.binding("util")}catch(t){}}(),ce=he&&he.isArrayBuffer,de=he&&he.isDate,fe=he&&he.isMap,pe=he&&he.isRegExp,_e=he&&he.isSet,ve=he&&he.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ge(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function ye(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function ke(t,e){return!(null==t||!t.length)&&Ce(t,e,0)>-1}function Ee(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Se(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Te(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Ae(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Pe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ie(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Le=Re("length");function ze(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Me(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Ce(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Me(t,Oe,n)}function Ne(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Oe(t){return t!=t}function Be(t,e){var n=null==t?0:t.length;return n?Ze(t,e)/n:d}function Re(t){return function(e){return null==e?r:e[t]}}function De(t){return function(e){return null==t?r:t[e]}}function Fe(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function Ze(t,e){for(var n,i=-1,o=t.length;++i<o;){var s=e(t[i]);s!==r&&(n=n===r?s:n+s)}return n}function je(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ue(t){return t?t.slice(0,an(t)+1).replace(it,""):t}function He(t){return function(e){return t(e)}}function We(t,e){return Se(e,(function(e){return t[e]}))}function Ge(t,e){return t.has(e)}function Ve(t,e){for(var n=-1,i=t.length;++n<i&&Ce(e,t[n],0)>-1;);return n}function Ke(t,e){for(var n=t.length;n--&&Ce(e,t[n],0)>-1;);return n}function Je(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var Xe=De({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),qe=De({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ye(t){return"\\"+te[t]}function $e(t){return Jt.test(t)}function Qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[r++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return $e(t)?function(t){for(var e=Vt.lastIndex=0;Vt.test(t);)++e;return e}(t):Le(t)}function sn(t){return $e(t)?function(t){return t.match(Vt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var ln=De({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),un=function t(e){var n,i=(e=null==e?oe:un.defaults(oe.Object(),e,un.pick(oe,qt))).Array,rt=e.Date,wt=e.Error,xt=e.Function,kt=e.Math,Et=e.Object,St=e.RegExp,Tt=e.String,At=e.TypeError,Pt=i.prototype,It=xt.prototype,Lt=Et.prototype,zt=e["__core-js_shared__"],Mt=It.toString,Ct=Lt.hasOwnProperty,Nt=0,Ot=(n=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Bt=Lt.toString,Rt=Mt.call(Et),Dt=oe._,Ft=St("^"+Mt.call(Ct).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=le?e.Buffer:r,jt=e.Symbol,Ut=e.Uint8Array,Ht=Zt?Zt.allocUnsafe:r,Vt=tn(Et.getPrototypeOf,Et),Jt=Et.create,te=Lt.propertyIsEnumerable,ie=Pt.splice,re=jt?jt.isConcatSpreadable:r,se=jt?jt.iterator:r,ae=jt?jt.toStringTag:r,ue=function(){try{var t=uo(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Le=rt&&rt.now!==oe.Date.now&&rt.now,De=e.setTimeout!==oe.setTimeout&&e.setTimeout,hn=kt.ceil,cn=kt.floor,dn=Et.getOwnPropertySymbols,fn=Zt?Zt.isBuffer:r,pn=e.isFinite,_n=Pt.join,vn=tn(Et.keys,Et),mn=kt.max,gn=kt.min,yn=rt.now,bn=e.parseInt,wn=kt.random,xn=Pt.reverse,kn=uo(e,"DataView"),En=uo(e,"Map"),Sn=uo(e,"Promise"),Tn=uo(e,"Set"),An=uo(e,"WeakMap"),Pn=uo(Et,"create"),In=An&&new An,Ln={},zn=Fo(kn),Mn=Fo(En),Cn=Fo(Sn),Nn=Fo(Tn),On=Fo(An),Bn=jt?jt.prototype:r,Rn=Bn?Bn.valueOf:r,Dn=Bn?Bn.toString:r;function Fn(t){if(na(t)&&!Gs(t)&&!(t instanceof Hn)){if(t instanceof Un)return t;if(Ct.call(t,"__wrapped__"))return Zo(t)}return new Un(t)}var Zn=function(){function t(){}return function(e){if(!ea(e))return{};if(Jt)return Jt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function jn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Vn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Xn(t,e){var n=Gs(t),i=!n&&Ws(t),r=!n&&!i&&Xs(t),o=!n&&!i&&!r&&ha(t),s=n||i||r||o,a=s?je(t.length,Tt):[],l=a.length;for(var u in t)!e&&!Ct.call(t,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mo(u,l))||a.push(u);return a}function qn(t){var e=t.length;return e?t[Vi(0,e-1)]:r}function Yn(t,e){return No(Ar(t),si(e,0,t.length))}function $n(t){return No(Ar(t))}function Qn(t,e,n){(n!==r&&!js(t[e],n)||n===r&&!(e in t))&&ri(t,e,n)}function ti(t,e,n){var i=t[e];Ct.call(t,e)&&js(i,n)&&(n!==r||e in t)||ri(t,e,n)}function ei(t,e){for(var n=t.length;n--;)if(js(t[n][0],e))return n;return-1}function ni(t,e,n,i){return ci(t,(function(t,r,o){e(i,t,n(t),o)})),i}function ii(t,e){return t&&Pr(e,Ma(e),t)}function ri(t,e,n){"__proto__"==e&&ue?ue(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function oi(t,e){for(var n=-1,o=e.length,s=i(o),a=null==t;++n<o;)s[n]=a?r:Aa(t,e[n]);return s}function si(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function ai(t,e,n,i,o,s){var a,l=1&e,u=2&e,h=4&e;if(n&&(a=o?n(t,i,o,s):n(t)),a!==r)return a;if(!ea(t))return t;var c=Gs(t);if(c){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ct.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Ar(t,a)}else{var d=fo(t),f=d==b||d==w;if(Xs(t))return wr(t,l);if(d==E||d==_||f&&!o){if(a=u||f?{}:_o(t),!l)return u?function(t,e){return Pr(t,co(t),e)}(t,function(t,e){return t&&Pr(e,Ca(e),t)}(a,t)):function(t,e){return Pr(t,ho(t),e)}(t,ii(a,t))}else{if(!Qt[d])return o?t:{};a=function(t,e,n){var i,r=t.constructor;switch(e){case z:return xr(t);case m:case g:return new r(+t);case M:return function(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case C:case N:case O:case B:case R:case D:case F:case Z:case j:return kr(t,n);case x:return new r;case k:case P:return new r(t);case T:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new r;case I:return i=t,Rn?Et(Rn.call(i)):{}}}(t,d,l)}}s||(s=new Jn);var p=s.get(t);if(p)return p;s.set(t,a),aa(t)?t.forEach((function(i){a.add(ai(i,e,n,i,t,s))})):ia(t)&&t.forEach((function(i,r){a.set(r,ai(i,e,n,r,t,s))}));var v=c?r:(h?u?no:eo:u?Ca:Ma)(t);return ye(v||t,(function(i,r){v&&(i=t[r=i]),ti(a,r,ai(i,e,n,r,t,s))})),a}function li(t,e,n){var i=n.length;if(null==t)return!i;for(t=Et(t);i--;){var o=n[i],s=e[o],a=t[o];if(a===r&&!(o in t)||!s(a))return!1}return!0}function ui(t,e,n){if("function"!=typeof t)throw new At(o);return Lo((function(){t.apply(r,n)}),e)}function hi(t,e,n,i){var r=-1,o=ke,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;n&&(e=Se(e,He(n))),i?(o=Ee,s=!1):e.length>=200&&(o=Ge,s=!1,e=new Kn(e));t:for(;++r<a;){var h=t[r],c=null==n?h:n(h);if(h=i||0!==h?h:0,s&&c==c){for(var d=u;d--;)if(e[d]===c)continue t;l.push(h)}else o(e,c,i)||l.push(h)}return l}Fn.templateSettings={escape:X,evaluate:q,interpolate:Y,variable:"",imports:{_:Fn}},Fn.prototype=jn.prototype,Fn.prototype.constructor=Fn,Un.prototype=Zn(jn.prototype),Un.prototype.constructor=Un,Hn.prototype=Zn(jn.prototype),Hn.prototype.constructor=Hn,Wn.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(Pn){var n=e[t];return n===s?r:n}return Ct.call(e,t)?e[t]:r},Wn.prototype.has=function(t){var e=this.__data__;return Pn?e[t]!==r:Ct.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pn&&e===r?s:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=ei(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},Gn.prototype.get=function(t){var e=this.__data__,n=ei(e,t);return n<0?r:e[n][1]},Gn.prototype.has=function(t){return ei(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,i=ei(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(En||Gn),string:new Wn}},Vn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Vn.prototype.get=function(t){return ao(this,t).get(t)},Vn.prototype.has=function(t){return ao(this,t).has(t)},Vn.prototype.set=function(t,e){var n=ao(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,s),this},Kn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var i=n.__data__;if(!En||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Vn(i)}return n.set(t,e),this.size=n.size,this};var ci=zr(yi),di=zr(bi,!0);function fi(t,e){var n=!0;return ci(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function pi(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(l===r?a==a&&!ua(a):n(a,l)))var l=a,u=s}return u}function _i(t,e){var n=[];return ci(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function vi(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=vo),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?vi(a,e-1,n,i,r):Te(r,a):i||(r[r.length]=a)}return r}var mi=Mr(),gi=Mr(!0);function yi(t,e){return t&&mi(t,e,Ma)}function bi(t,e){return t&&gi(t,e,Ma)}function wi(t,e){return xe(e,(function(e){return $s(t[e])}))}function xi(t,e){for(var n=0,i=(e=mr(e,t)).length;null!=t&&n<i;)t=t[Do(e[n++])];return n&&n==i?t:r}function ki(t,e,n){var i=e(t);return Gs(t)?i:Te(i,n(t))}function Ei(t){return null==t?t===r?"[object Undefined]":"[object Null]":ae&&ae in Et(t)?function(t){var e=Ct.call(t,ae),n=t[ae];try{t[ae]=r;var i=!0}catch(t){}var o=Bt.call(t);return i&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return Bt.call(t)}(t)}function Si(t,e){return t>e}function Ti(t,e){return null!=t&&Ct.call(t,e)}function Ai(t,e){return null!=t&&e in Et(t)}function Pi(t,e,n){for(var o=n?Ee:ke,s=t[0].length,a=t.length,l=a,u=i(a),h=1/0,c=[];l--;){var d=t[l];l&&e&&(d=Se(d,He(e))),h=gn(d.length,h),u[l]=!n&&(e||s>=120&&d.length>=120)?new Kn(l&&d):r}d=t[0];var f=-1,p=u[0];t:for(;++f<s&&c.length<h;){var _=d[f],v=e?e(_):_;if(_=n||0!==_?_:0,!(p?Ge(p,v):o(c,v,n))){for(l=a;--l;){var m=u[l];if(!(m?Ge(m,v):o(t[l],v,n)))continue t}p&&p.push(v),c.push(_)}}return c}function Ii(t,e,n){var i=null==(t=To(t,e=mr(e,t)))?t:t[Do(Yo(e))];return null==i?r:me(i,t,n)}function Li(t){return na(t)&&Ei(t)==_}function zi(t,e,n,i,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,i,o,s){var a=Gs(t),l=Gs(e),u=a?v:fo(t),h=l?v:fo(e),c=(u=u==_?E:u)==E,d=(h=h==_?E:h)==E,f=u==h;if(f&&Xs(t)){if(!Xs(e))return!1;a=!0,c=!1}if(f&&!c)return s||(s=new Jn),a||ha(t)?Qr(t,e,n,i,o,s):function(t,e,n,i,r,o,s){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case z:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case m:case g:case k:return js(+t,+e);case y:return t.name==e.name&&t.message==e.message;case T:case P:return t==e+"";case x:var a=Qe;case A:var l=1&i;if(a||(a=nn),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;i|=2,s.set(t,e);var h=Qr(a(t),a(e),i,r,o,s);return s.delete(t),h;case I:if(Rn)return Rn.call(t)==Rn.call(e)}return!1}(t,e,u,n,i,o,s);if(!(1&n)){var p=c&&Ct.call(t,"__wrapped__"),b=d&&Ct.call(e,"__wrapped__");if(p||b){var w=p?t.value():t,S=b?e.value():e;return s||(s=new Jn),o(w,S,n,i,s)}}return!!f&&(s||(s=new Jn),function(t,e,n,i,o,s){var a=1&n,l=eo(t),u=l.length;if(u!=eo(e).length&&!a)return!1;for(var h=u;h--;){var c=l[h];if(!(a?c in e:Ct.call(e,c)))return!1}var d=s.get(t),f=s.get(e);if(d&&f)return d==e&&f==t;var p=!0;s.set(t,e),s.set(e,t);for(var _=a;++h<u;){var v=t[c=l[h]],m=e[c];if(i)var g=a?i(m,v,c,e,t,s):i(v,m,c,t,e,s);if(!(g===r?v===m||o(v,m,n,i,s):g)){p=!1;break}_||(_="constructor"==c)}if(p&&!_){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,i,o,s))}(t,e,n,i,zi,o))}function Mi(t,e,n,i){var o=n.length,s=o,a=!i;if(null==t)return!s;for(t=Et(t);o--;){var l=n[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var u=(l=n[o])[0],h=t[u],c=l[1];if(a&&l[2]){if(h===r&&!(u in t))return!1}else{var d=new Jn;if(i)var f=i(h,c,u,t,e,d);if(!(f===r?zi(c,h,3,i,d):f))return!1}}return!0}function Ci(t){return!(!ea(t)||(e=t,Ot&&Ot in e))&&($s(t)?Ft:_t).test(Fo(t));var e}function Ni(t){return"function"==typeof t?t:null==t?rl:"object"==typeof t?Gs(t)?Fi(t[0],t[1]):Di(t):fl(t)}function Oi(t){if(!xo(t))return vn(t);var e=[];for(var n in Et(t))Ct.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Bi(t,e){return t<e}function Ri(t,e){var n=-1,r=Ks(t)?i(t.length):[];return ci(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Di(t){var e=lo(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||Mi(n,t,e)}}function Fi(t,e){return yo(t)&&ko(e)?Eo(Do(t),e):function(n){var i=Aa(n,t);return i===r&&i===e?Pa(n,t):zi(e,i,3)}}function Zi(t,e,n,i,o){t!==e&&mi(e,(function(s,a){if(o||(o=new Jn),ea(s))!function(t,e,n,i,o,s,a){var l=Po(t,n),u=Po(e,n),h=a.get(u);if(h)Qn(t,n,h);else{var c=s?s(l,u,n+"",t,e,a):r,d=c===r;if(d){var f=Gs(u),p=!f&&Xs(u),_=!f&&!p&&ha(u);c=u,f||p||_?Gs(l)?c=l:Js(l)?c=Ar(l):p?(d=!1,c=wr(u,!0)):_?(d=!1,c=kr(u,!0)):c=[]:oa(u)||Ws(u)?(c=l,Ws(l)?c=ga(l):ea(l)&&!$s(l)||(c=_o(u))):d=!1}d&&(a.set(u,c),o(c,u,i,s,a),a.delete(u)),Qn(t,n,c)}}(t,e,a,n,Zi,i,o);else{var l=i?i(Po(t,a),s,a+"",t,e,o):r;l===r&&(l=s),Qn(t,a,l)}}),Ca)}function ji(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:r}function Ui(t,e,n){e=e.length?Se(e,(function(t){return Gs(t)?function(e){return xi(e,1===t.length?t[0]:t)}:t})):[rl];var i=-1;e=Se(e,He(so()));var r=Ri(t,(function(t,n,r){var o=Se(e,(function(e){return e(t)}));return{criteria:o,index:++i,value:t}}));return function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var l=Er(r[i],o[i]);if(l)return i>=a?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(r)}function Hi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=xi(t,s);n(a,s)&&Yi(o,mr(s,t),a)}return o}function Wi(t,e,n,i){var r=i?Ne:Ce,o=-1,s=e.length,a=t;for(t===e&&(e=Ar(e)),n&&(a=Se(t,He(n)));++o<s;)for(var l=0,u=e[o],h=n?n(u):u;(l=r(a,h,l,i))>-1;)a!==t&&ie.call(a,l,1),ie.call(t,l,1);return t}function Gi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;mo(r)?ie.call(t,r,1):ur(t,r)}}return t}function Vi(t,e){return t+cn(wn()*(e-t+1))}function Ki(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=cn(e/2))&&(t+=t)}while(e);return n}function Ji(t,e){return zo(So(t,e,rl),t+"")}function Xi(t){return qn(ja(t))}function qi(t,e){var n=ja(t);return No(n,si(e,0,n.length))}function Yi(t,e,n,i){if(!ea(t))return t;for(var o=-1,s=(e=mr(e,t)).length,a=s-1,l=t;null!=l&&++o<s;){var u=Do(e[o]),h=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var c=l[u];(h=i?i(c,u,l):r)===r&&(h=ea(c)?c:mo(e[o+1])?[]:{})}ti(l,u,h),l=l[u]}return t}var $i=In?function(t,e){return In.set(t,e),t}:rl,Qi=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:rl;function tr(t){return No(ja(t))}function er(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=i(o);++r<o;)s[r]=t[r+e];return s}function nr(t,e){var n;return ci(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function ir(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!ua(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return rr(t,e,rl,n)}function rr(t,e,n,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,l=null===e,u=ua(e),h=e===r;o<s;){var c=cn((o+s)/2),d=n(t[c]),f=d!==r,p=null===d,_=d==d,v=ua(d);if(a)var m=i||_;else m=h?_&&(i||f):l?_&&f&&(i||!p):u?_&&f&&!p&&(i||!v):!p&&!v&&(i?d<=e:d<e);m?o=c+1:s=c}return gn(s,4294967294)}function or(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!js(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function sr(t){return"number"==typeof t?t:ua(t)?d:+t}function ar(t){if("string"==typeof t)return t;if(Gs(t))return Se(t,ar)+"";if(ua(t))return Dn?Dn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function lr(t,e,n){var i=-1,r=ke,o=t.length,s=!0,a=[],l=a;if(n)s=!1,r=Ee;else if(o>=200){var u=e?null:Kr(t);if(u)return nn(u);s=!1,r=Ge,l=new Kn}else l=e?[]:a;t:for(;++i<o;){var h=t[i],c=e?e(h):h;if(h=n||0!==h?h:0,s&&c==c){for(var d=l.length;d--;)if(l[d]===c)continue t;e&&l.push(c),a.push(h)}else r(l,c,n)||(l!==a&&l.push(c),a.push(h))}return a}function ur(t,e){return null==(t=To(t,e=mr(e,t)))||delete t[Do(Yo(e))]}function hr(t,e,n,i){return Yi(t,e,n(xi(t,e)),i)}function cr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?er(t,i?0:o,i?o+1:r):er(t,i?o+1:0,i?r:o)}function dr(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Ae(e,(function(t,e){return e.func.apply(e.thisArg,Te([t],e.args))}),n)}function fr(t,e,n){var r=t.length;if(r<2)return r?lr(t[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=t[o],l=-1;++l<r;)l!=o&&(s[o]=hi(s[o]||a,t[l],e,n));return lr(vi(s,1),e,n)}function pr(t,e,n){for(var i=-1,o=t.length,s=e.length,a={};++i<o;){var l=i<s?e[i]:r;n(a,t[i],l)}return a}function _r(t){return Js(t)?t:[]}function vr(t){return"function"==typeof t?t:rl}function mr(t,e){return Gs(t)?t:yo(t,e)?[t]:Ro(ya(t))}var gr=Ji;function yr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:er(t,e,n)}var br=he||function(t){return oe.clearTimeout(t)};function wr(t,e){if(e)return t.slice();var n=t.length,i=Ht?Ht(n):new t.constructor(n);return t.copy(i),i}function xr(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function kr(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Er(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,s=ua(t),a=e!==r,l=null===e,u=e==e,h=ua(e);if(!l&&!h&&!s&&t>e||s&&a&&u&&!l&&!h||i&&a&&u||!n&&u||!o)return 1;if(!i&&!s&&!h&&t<e||h&&n&&o&&!i&&!s||l&&n&&o||!a&&o||!u)return-1}return 0}function Sr(t,e,n,r){for(var o=-1,s=t.length,a=n.length,l=-1,u=e.length,h=mn(s-a,0),c=i(u+h),d=!r;++l<u;)c[l]=e[l];for(;++o<a;)(d||o<s)&&(c[n[o]]=t[o]);for(;h--;)c[l++]=t[o++];return c}function Tr(t,e,n,r){for(var o=-1,s=t.length,a=-1,l=n.length,u=-1,h=e.length,c=mn(s-l,0),d=i(c+h),f=!r;++o<c;)d[o]=t[o];for(var p=o;++u<h;)d[p+u]=e[u];for(;++a<l;)(f||o<s)&&(d[p+n[a]]=t[o++]);return d}function Ar(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function Pr(t,e,n,i){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var l=e[s],u=i?i(n[l],t[l],l,n,t):r;u===r&&(u=t[l]),o?ri(n,l,u):ti(n,l,u)}return n}function Ir(t,e){return function(n,i){var r=Gs(n)?ge:ni,o=e?e():{};return r(n,t,so(i,2),o)}}function Lr(t){return Ji((function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=t.length>3&&"function"==typeof s?(o--,s):r,a&&go(n[0],n[1],a)&&(s=o<3?r:s,o=1),e=Et(e);++i<o;){var l=n[i];l&&t(e,l,i,s)}return e}))}function zr(t,e){return function(n,i){if(null==n)return n;if(!Ks(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=Et(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Mr(t){return function(e,n,i){for(var r=-1,o=Et(e),s=i(e),a=s.length;a--;){var l=s[t?a:++r];if(!1===n(o[l],l,o))break}return e}}function Cr(t){return function(e){var n=$e(e=ya(e))?sn(e):r,i=n?n[0]:e.charAt(0),o=n?yr(n,1).join(""):e.slice(1);return i[t]()+o}}function Nr(t){return function(e){return Ae($a(Wa(e).replace(Wt,"")),t,"")}}function Or(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Zn(t.prototype),i=t.apply(n,e);return ea(i)?i:n}}function Br(t){return function(e,n,i){var o=Et(e);if(!Ks(e)){var s=so(n,3);e=Ma(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,i);return a>-1?o[s?e[a]:a]:r}}function Rr(t){return to((function(e){var n=e.length,i=n,s=Un.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new At(o);if(s&&!l&&"wrapper"==ro(a))var l=new Un([],!0)}for(i=l?i:n;++i<n;){var u=ro(a=e[i]),h="wrapper"==u?io(a):r;l=h&&bo(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?l[ro(h[0])].apply(l,h[3]):1==a.length&&bo(a)?l[u]():l.thru(a)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&Gs(i))return l.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function Dr(t,e,n,o,s,a,l,h,c,d){var f=e&u,p=1&e,_=2&e,v=24&e,m=512&e,g=_?r:Or(t);return function r(){for(var u=arguments.length,y=i(u),b=u;b--;)y[b]=arguments[b];if(v)var w=oo(r),x=Je(y,w);if(o&&(y=Sr(y,o,s,v)),a&&(y=Tr(y,a,l,v)),u-=x,v&&u<d){var k=en(y,w);return Gr(t,e,Dr,r.placeholder,n,y,k,h,c,d-u)}var E=p?n:this,S=_?E[t]:t;return u=y.length,h?y=Ao(y,h):m&&u>1&&y.reverse(),f&&c<u&&(y.length=c),this&&this!==oe&&this instanceof r&&(S=g||Or(S)),S.apply(E,y)}}function Fr(t,e){return function(n,i){return function(t,e,n,i){return yi(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Zr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=ar(n),i=ar(i)):(n=sr(n),i=sr(i)),o=t(n,i)}return o}}function jr(t){return to((function(e){return e=Se(e,He(so())),Ji((function(n){var i=this;return t(e,(function(t){return me(t,i,n)}))}))}))}function Ur(t,e){var n=(e=e===r?" ":ar(e)).length;if(n<2)return n?Ki(e,t):e;var i=Ki(e,hn(t/on(e)));return $e(e)?yr(sn(i),0,t).join(""):i.slice(0,t)}function Hr(t){return function(e,n,o){return o&&"number"!=typeof o&&go(e,n,o)&&(n=o=r),e=pa(e),n===r?(n=e,e=0):n=pa(n),function(t,e,n,r){for(var o=-1,s=mn(hn((e-t)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=t,t+=n;return a}(e,n,o=o===r?e<n?1:-1:pa(o),t)}}function Wr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Gr(t,e,n,i,o,s,a,u,h,c){var d=8&e;e|=d?l:64,4&(e&=~(d?64:l))||(e&=-4);var f=[t,e,o,d?s:r,d?a:r,d?r:s,d?r:a,u,h,c],p=n.apply(r,f);return bo(t)&&Io(p,f),p.placeholder=i,Mo(p,t,e)}function Vr(t){var e=kt[t];return function(t,n){if(t=ma(t),(n=null==n?0:gn(_a(n),292))&&pn(t)){var i=(ya(t)+"e").split("e");return+((i=(ya(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Kr=Tn&&1/nn(new Tn([,-0]))[1]==h?function(t){return new Tn(t)}:ul;function Jr(t){return function(e){var n=fo(e);return n==x?Qe(e):n==A?rn(e):function(t,e){return Se(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xr(t,e,n,s,h,c,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new At(o);var _=s?s.length:0;if(_||(e&=-97,s=h=r),d=d===r?d:mn(_a(d),0),f=f===r?f:_a(f),_-=h?h.length:0,64&e){var v=s,m=h;s=h=r}var g=p?r:io(t),y=[t,e,n,s,h,v,m,c,d,f];if(g&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,s=i==u&&8==n||i==u&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?Sr(h,l,e[4]):l,t[4]=h?en(t[3],a):e[4]}(l=e[5])&&(h=t[5],t[5]=h?Tr(h,l,e[6]):l,t[6]=h?en(t[5],a):e[6]),(l=e[7])&&(t[7]=l),i&u&&(t[8]=null==t[8]?e[8]:gn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(y,g),t=y[0],e=y[1],n=y[2],s=y[3],h=y[4],!(f=y[9]=y[9]===r?p?0:t.length:mn(y[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=Or(t);return function s(){for(var a=arguments.length,l=i(a),u=a,h=oo(s);u--;)l[u]=arguments[u];var c=a<3&&l[0]!==h&&l[a-1]!==h?[]:en(l,h);return(a-=c.length)<n?Gr(t,e,Dr,s.placeholder,r,l,c,r,r,n-a):me(this&&this!==oe&&this instanceof s?o:t,this,l)}}(t,e,f):e!=l&&33!=e||h.length?Dr.apply(r,y):function(t,e,n,r){var o=1&e,s=Or(t);return function e(){for(var a=-1,l=arguments.length,u=-1,h=r.length,c=i(h+l),d=this&&this!==oe&&this instanceof e?s:t;++u<h;)c[u]=r[u];for(;l--;)c[u++]=arguments[++a];return me(d,o?n:this,c)}}(t,e,n,s);else var b=function(t,e,n){var i=1&e,r=Or(t);return function e(){return(this&&this!==oe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Mo((g?$i:Io)(b,y),t,e)}function qr(t,e,n,i){return t===r||js(t,Lt[n])&&!Ct.call(i,n)?e:t}function Yr(t,e,n,i,o,s){return ea(t)&&ea(e)&&(s.set(e,t),Zi(t,e,r,Yr,s),s.delete(e)),t}function $r(t){return oa(t)?r:t}function Qr(t,e,n,i,o,s){var a=1&n,l=t.length,u=e.length;if(l!=u&&!(a&&u>l))return!1;var h=s.get(t),c=s.get(e);if(h&&c)return h==e&&c==t;var d=-1,f=!0,p=2&n?new Kn:r;for(s.set(t,e),s.set(e,t);++d<l;){var _=t[d],v=e[d];if(i)var m=a?i(v,_,d,e,t,s):i(_,v,d,t,e,s);if(m!==r){if(m)continue;f=!1;break}if(p){if(!Ie(e,(function(t,e){if(!Ge(p,e)&&(_===t||o(_,t,n,i,s)))return p.push(e)}))){f=!1;break}}else if(_!==v&&!o(_,v,n,i,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function to(t){return zo(So(t,r,Vo),t+"")}function eo(t){return ki(t,Ma,ho)}function no(t){return ki(t,Ca,co)}var io=In?function(t){return In.get(t)}:ul;function ro(t){for(var e=t.name+"",n=Ln[e],i=Ct.call(Ln,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function oo(t){return(Ct.call(Fn,"placeholder")?Fn:t).placeholder}function so(){var t=Fn.iteratee||ol;return t=t===ol?Ni:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function lo(t){for(var e=Ma(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ko(r)]}return e}function uo(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Ci(n)?n:r}var ho=dn?function(t){return null==t?[]:(t=Et(t),xe(dn(t),(function(e){return te.call(t,e)})))}:vl,co=dn?function(t){for(var e=[];t;)Te(e,ho(t)),t=Vt(t);return e}:vl,fo=Ei;function po(t,e,n){for(var i=-1,r=(e=mr(e,t)).length,o=!1;++i<r;){var s=Do(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ta(r)&&mo(s,r)&&(Gs(t)||Ws(t))}function _o(t){return"function"!=typeof t.constructor||xo(t)?{}:Zn(Vt(t))}function vo(t){return Gs(t)||Ws(t)||!!(re&&t&&t[re])}function mo(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function go(t,e,n){if(!ea(n))return!1;var i=typeof e;return!!("number"==i?Ks(n)&&mo(e,n.length):"string"==i&&e in n)&&js(n[e],t)}function yo(t,e){if(Gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ua(t))||Q.test(t)||!$.test(t)||null!=e&&t in Et(e)}function bo(t){var e=ro(t),n=Fn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var i=io(n);return!!i&&t===i[0]}(kn&&fo(new kn(new ArrayBuffer(1)))!=M||En&&fo(new En)!=x||Sn&&fo(Sn.resolve())!=S||Tn&&fo(new Tn)!=A||An&&fo(new An)!=L)&&(fo=function(t){var e=Ei(t),n=e==E?t.constructor:r,i=n?Fo(n):"";if(i)switch(i){case zn:return M;case Mn:return x;case Cn:return S;case Nn:return A;case On:return L}return e});var wo=zt?$s:ml;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function ko(t){return t==t&&!ea(t)}function Eo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Et(n))}}function So(t,e,n){return e=mn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=mn(r.length-e,0),a=i(s);++o<s;)a[o]=r[e+o];o=-1;for(var l=i(e+1);++o<e;)l[o]=r[o];return l[e]=n(a),me(t,this,l)}}function To(t,e){return e.length<2?t:xi(t,er(e,0,-1))}function Ao(t,e){for(var n=t.length,i=gn(e.length,n),o=Ar(t);i--;){var s=e[i];t[i]=mo(s,n)?o[s]:r}return t}function Po(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Io=Co($i),Lo=De||function(t,e){return oe.setTimeout(t,e)},zo=Co(Qi);function Mo(t,e,n){var i=e+"";return zo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return ye(p,(function(n){var i="_."+n[0];e&n[1]&&!ke(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(i),n)))}function Co(t){var e=0,n=0;return function(){var i=yn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function No(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var s=Vi(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Oo,Bo,Ro=(Oo=Os((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,i,r){e.push(i?r.replace(ht,"$1"):n||t)})),e}),(function(t){return 500===Bo.size&&Bo.clear(),t})),Bo=Oo.cache,Oo);function Do(t){if("string"==typeof t||ua(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Fo(t){if(null!=t){try{return Mt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Zo(t){if(t instanceof Hn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Ar(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var jo=Ji((function(t,e){return Js(t)?hi(t,vi(e,1,Js,!0)):[]})),Uo=Ji((function(t,e){var n=Yo(e);return Js(n)&&(n=r),Js(t)?hi(t,vi(e,1,Js,!0),so(n,2)):[]})),Ho=Ji((function(t,e){var n=Yo(e);return Js(n)&&(n=r),Js(t)?hi(t,vi(e,1,Js,!0),r,n):[]}));function Wo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:_a(n);return r<0&&(r=mn(i+r,0)),Me(t,so(e,3),r)}function Go(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=_a(n),o=n<0?mn(i+o,0):gn(o,i-1)),Me(t,so(e,3),o,!0)}function Vo(t){return null!=t&&t.length?vi(t,1):[]}function Ko(t){return t&&t.length?t[0]:r}var Jo=Ji((function(t){var e=Se(t,_r);return e.length&&e[0]===t[0]?Pi(e):[]})),Xo=Ji((function(t){var e=Yo(t),n=Se(t,_r);return e===Yo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Pi(n,so(e,2)):[]})),qo=Ji((function(t){var e=Yo(t),n=Se(t,_r);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Pi(n,r,e):[]}));function Yo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var $o=Ji(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Wi(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,i=oi(t,e);return Gi(t,Se(e,(function(t){return mo(t,n)?+t:t})).sort(Er)),i}));function es(t){return null==t?t:xn.call(t)}var ns=Ji((function(t){return lr(vi(t,1,Js,!0))})),is=Ji((function(t){var e=Yo(t);return Js(e)&&(e=r),lr(vi(t,1,Js,!0),so(e,2))})),rs=Ji((function(t){var e=Yo(t);return e="function"==typeof e?e:r,lr(vi(t,1,Js,!0),r,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Js(t))return e=mn(t.length,e),!0})),je(e,(function(e){return Se(t,Re(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Se(n,(function(t){return me(e,r,t)}))}var as=Ji((function(t,e){return Js(t)?hi(t,e):[]})),ls=Ji((function(t){return fr(xe(t,Js))})),us=Ji((function(t){var e=Yo(t);return Js(e)&&(e=r),fr(xe(t,Js),so(e,2))})),hs=Ji((function(t){var e=Yo(t);return e="function"==typeof e?e:r,fr(xe(t,Js),r,e)})),cs=Ji(os),ds=Ji((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,ss(t,n)}));function fs(t){var e=Fn(t);return e.__chain__=!0,e}function ps(t,e){return e(t)}var _s=to((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return oi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Hn&&mo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ps,args:[o],thisArg:r}),new Un(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),vs=Ir((function(t,e,n){Ct.call(t,n)?++t[n]:ri(t,n,1)})),ms=Br(Wo),gs=Br(Go);function ys(t,e){return(Gs(t)?ye:ci)(t,so(e,3))}function bs(t,e){return(Gs(t)?be:di)(t,so(e,3))}var ws=Ir((function(t,e,n){Ct.call(t,n)?t[n].push(e):ri(t,n,[e])})),xs=Ji((function(t,e,n){var r=-1,o="function"==typeof e,s=Ks(t)?i(t.length):[];return ci(t,(function(t){s[++r]=o?me(e,t,n):Ii(t,e,n)})),s})),ks=Ir((function(t,e,n){ri(t,n,e)}));function Es(t,e){return(Gs(t)?Se:Ri)(t,so(e,3))}var Ss=Ir((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ts=Ji((function(t,e){if(null==t)return[];var n=e.length;return n>1&&go(t,e[0],e[1])?e=[]:n>2&&go(e[0],e[1],e[2])&&(e=[e[0]]),Ui(t,vi(e,1),[])})),As=Le||function(){return oe.Date.now()};function Ps(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Xr(t,u,r,r,r,r,e)}function Is(t,e){var n;if("function"!=typeof e)throw new At(o);return t=_a(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Ls=Ji((function(t,e,n){var i=1;if(n.length){var r=en(n,oo(Ls));i|=l}return Xr(t,i,e,n,r)})),zs=Ji((function(t,e,n){var i=3;if(n.length){var r=en(n,oo(zs));i|=l}return Xr(e,i,t,n,r)}));function Ms(t,e,n){var i,s,a,l,u,h,c=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new At(o);function _(e){var n=i,o=s;return i=s=r,c=e,l=t.apply(o,n)}function v(t){return c=t,u=Lo(g,e),d?_(t):l}function m(t){var n=t-h;return h===r||n>=e||n<0||f&&t-c>=a}function g(){var t=As();if(m(t))return y(t);u=Lo(g,function(t){var n=e-(t-h);return f?gn(n,a-(t-c)):n}(t))}function y(t){return u=r,p&&i?_(t):(i=s=r,l)}function b(){var t=As(),n=m(t);if(i=arguments,s=this,h=t,n){if(u===r)return v(h);if(f)return br(u),u=Lo(g,e),_(h)}return u===r&&(u=Lo(g,e)),l}return e=ma(e)||0,ea(n)&&(d=!!n.leading,a=(f="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==r&&br(u),c=0,i=h=s=u=r},b.flush=function(){return u===r?l:y(As())},b}var Cs=Ji((function(t,e){return ui(t,1,e)})),Ns=Ji((function(t,e,n){return ui(t,ma(e)||0,n)}));function Os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new At(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Os.Cache||Vn),n}function Bs(t){if("function"!=typeof t)throw new At(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Os.Cache=Vn;var Rs=gr((function(t,e){var n=(e=1==e.length&&Gs(e[0])?Se(e[0],He(so())):Se(vi(e,1),He(so()))).length;return Ji((function(i){for(var r=-1,o=gn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return me(t,this,i)}))})),Ds=Ji((function(t,e){var n=en(e,oo(Ds));return Xr(t,l,r,e,n)})),Fs=Ji((function(t,e){var n=en(e,oo(Fs));return Xr(t,64,r,e,n)})),Zs=to((function(t,e){return Xr(t,256,r,r,r,e)}));function js(t,e){return t===e||t!=t&&e!=e}var Us=Wr(Si),Hs=Wr((function(t,e){return t>=e})),Ws=Li(function(){return arguments}())?Li:function(t){return na(t)&&Ct.call(t,"callee")&&!te.call(t,"callee")},Gs=i.isArray,Vs=ce?He(ce):function(t){return na(t)&&Ei(t)==z};function Ks(t){return null!=t&&ta(t.length)&&!$s(t)}function Js(t){return na(t)&&Ks(t)}var Xs=fn||ml,qs=de?He(de):function(t){return na(t)&&Ei(t)==g};function Ys(t){if(!na(t))return!1;var e=Ei(t);return e==y||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function $s(t){if(!ea(t))return!1;var e=Ei(t);return e==b||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qs(t){return"number"==typeof t&&t==_a(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ia=fe?He(fe):function(t){return na(t)&&fo(t)==x};function ra(t){return"number"==typeof t||na(t)&&Ei(t)==k}function oa(t){if(!na(t)||Ei(t)!=E)return!1;var e=Vt(t);if(null===e)return!0;var n=Ct.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mt.call(n)==Rt}var sa=pe?He(pe):function(t){return na(t)&&Ei(t)==T},aa=_e?He(_e):function(t){return na(t)&&fo(t)==A};function la(t){return"string"==typeof t||!Gs(t)&&na(t)&&Ei(t)==P}function ua(t){return"symbol"==typeof t||na(t)&&Ei(t)==I}var ha=ve?He(ve):function(t){return na(t)&&ta(t.length)&&!!$t[Ei(t)]},ca=Wr(Bi),da=Wr((function(t,e){return t<=e}));function fa(t){if(!t)return[];if(Ks(t))return la(t)?sn(t):Ar(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==x?Qe:e==A?nn:ja)(t)}function pa(t){return t?(t=ma(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function _a(t){var e=pa(t),n=e%1;return e==e?n?e-n:e:0}function va(t){return t?si(_a(t),0,f):0}function ma(t){if("number"==typeof t)return t;if(ua(t))return d;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ue(t);var n=pt.test(t);return n||vt.test(t)?ne(t.slice(2),n?2:8):ft.test(t)?d:+t}function ga(t){return Pr(t,Ca(t))}function ya(t){return null==t?"":ar(t)}var ba=Lr((function(t,e){if(xo(e)||Ks(e))Pr(e,Ma(e),t);else for(var n in e)Ct.call(e,n)&&ti(t,n,e[n])})),wa=Lr((function(t,e){Pr(e,Ca(e),t)})),xa=Lr((function(t,e,n,i){Pr(e,Ca(e),t,i)})),ka=Lr((function(t,e,n,i){Pr(e,Ma(e),t,i)})),Ea=to(oi),Sa=Ji((function(t,e){t=Et(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&go(e[0],e[1],o)&&(i=1);++n<i;)for(var s=e[n],a=Ca(s),l=-1,u=a.length;++l<u;){var h=a[l],c=t[h];(c===r||js(c,Lt[h])&&!Ct.call(t,h))&&(t[h]=s[h])}return t})),Ta=Ji((function(t){return t.push(r,Yr),me(Oa,r,t)}));function Aa(t,e,n){var i=null==t?r:xi(t,e);return i===r?n:i}function Pa(t,e){return null!=t&&po(t,e,Ai)}var Ia=Fr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),t[e]=n}),el(rl)),La=Fr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),Ct.call(t,e)?t[e].push(n):t[e]=[n]}),so),za=Ji(Ii);function Ma(t){return Ks(t)?Xn(t):Oi(t)}function Ca(t){return Ks(t)?Xn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var i in t)("constructor"!=i||!e&&Ct.call(t,i))&&n.push(i);return n}(t)}var Na=Lr((function(t,e,n){Zi(t,e,n)})),Oa=Lr((function(t,e,n,i){Zi(t,e,n,i)})),Ba=to((function(t,e){var n={};if(null==t)return n;var i=!1;e=Se(e,(function(e){return e=mr(e,t),i||(i=e.length>1),e})),Pr(t,no(t),n),i&&(n=ai(n,7,$r));for(var r=e.length;r--;)ur(n,e[r]);return n})),Ra=to((function(t,e){return null==t?{}:function(t,e){return Hi(t,e,(function(e,n){return Pa(t,n)}))}(t,e)}));function Da(t,e){if(null==t)return{};var n=Se(no(t),(function(t){return[t]}));return e=so(e),Hi(t,n,(function(t,n){return e(t,n[0])}))}var Fa=Jr(Ma),Za=Jr(Ca);function ja(t){return null==t?[]:We(t,Ma(t))}var Ua=Nr((function(t,e,n){return e=e.toLowerCase(),t+(n?Ha(e):e)}));function Ha(t){return Ya(ya(t).toLowerCase())}function Wa(t){return(t=ya(t))&&t.replace(gt,Xe).replace(Gt,"")}var Ga=Nr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Va=Nr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ka=Cr("toLowerCase"),Ja=Nr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Xa=Nr((function(t,e,n){return t+(n?" ":"")+Ya(e)})),qa=Nr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ya=Cr("toUpperCase");function $a(t,e,n){return t=ya(t),(e=n?r:e)===r?function(t){return Xt.test(t)}(t)?function(t){return t.match(Kt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Qa=Ji((function(t,e){try{return me(t,r,e)}catch(t){return Ys(t)?t:new wt(t)}})),tl=to((function(t,e){return ye(e,(function(e){e=Do(e),ri(t,e,Ls(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Rr(),il=Rr(!0);function rl(t){return t}function ol(t){return Ni("function"==typeof t?t:ai(t,1))}var sl=Ji((function(t,e){return function(n){return Ii(n,t,e)}})),al=Ji((function(t,e){return function(n){return Ii(t,n,e)}}));function ll(t,e,n){var i=Ma(e),r=wi(e,i);null!=n||ea(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=wi(e,Ma(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=$s(t);return ye(r,(function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Ar(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Te([this.value()],arguments))})})),t}function ul(){}var hl=jr(Se),cl=jr(we),dl=jr(Ie);function fl(t){return yo(t)?Re(Do(t)):function(t){return function(e){return xi(e,t)}}(t)}var pl=Hr(),_l=Hr(!0);function vl(){return[]}function ml(){return!1}var gl,yl=Zr((function(t,e){return t+e}),0),bl=Vr("ceil"),wl=Zr((function(t,e){return t/e}),1),xl=Vr("floor"),kl=Zr((function(t,e){return t*e}),1),El=Vr("round"),Sl=Zr((function(t,e){return t-e}),0);return Fn.after=function(t,e){if("function"!=typeof e)throw new At(o);return t=_a(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=Ps,Fn.assign=ba,Fn.assignIn=wa,Fn.assignInWith=xa,Fn.assignWith=ka,Fn.at=Ea,Fn.before=Is,Fn.bind=Ls,Fn.bindAll=tl,Fn.bindKey=zs,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Gs(t)?t:[t]},Fn.chain=fs,Fn.chunk=function(t,e,n){e=(n?go(t,e,n):e===r)?1:mn(_a(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,l=i(hn(o/e));s<o;)l[a++]=er(t,s,s+=e);return l},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Te(Gs(n)?Ar(n):[n],vi(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Se(t,(function(t){if("function"!=typeof t[1])throw new At(o);return[n(t[0]),t[1]]})):[],Ji((function(n){for(var i=-1;++i<e;){var r=t[i];if(me(r[0],this,n))return me(r[1],this,n)}}))},Fn.conforms=function(t){return function(t){var e=Ma(t);return function(n){return li(n,t,e)}}(ai(t,1))},Fn.constant=el,Fn.countBy=vs,Fn.create=function(t,e){var n=Zn(t);return null==e?n:ii(n,e)},Fn.curry=function t(e,n,i){var o=Xr(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Fn.curryRight=function t(e,n,i){var o=Xr(e,16,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Fn.debounce=Ms,Fn.defaults=Sa,Fn.defaultsDeep=Ta,Fn.defer=Cs,Fn.delay=Ns,Fn.difference=jo,Fn.differenceBy=Uo,Fn.differenceWith=Ho,Fn.drop=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=n||e===r?1:_a(e))<0?0:e,i):[]},Fn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,0,(e=i-(e=n||e===r?1:_a(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?cr(t,so(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?cr(t,so(e,3),!0):[]},Fn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&go(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=_a(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:_a(i))<0&&(i+=o),i=n>i?0:va(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Fn.filter=function(t,e){return(Gs(t)?xe:_i)(t,so(e,3))},Fn.flatMap=function(t,e){return vi(Es(t,e),1)},Fn.flatMapDeep=function(t,e){return vi(Es(t,e),h)},Fn.flatMapDepth=function(t,e,n){return n=n===r?1:_a(n),vi(Es(t,e),n)},Fn.flatten=Vo,Fn.flattenDeep=function(t){return null!=t&&t.length?vi(t,h):[]},Fn.flattenDepth=function(t,e){return null!=t&&t.length?vi(t,e=e===r?1:_a(e)):[]},Fn.flip=function(t){return Xr(t,512)},Fn.flow=nl,Fn.flowRight=il,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Fn.functions=function(t){return null==t?[]:wi(t,Ma(t))},Fn.functionsIn=function(t){return null==t?[]:wi(t,Ca(t))},Fn.groupBy=ws,Fn.initial=function(t){return null!=t&&t.length?er(t,0,-1):[]},Fn.intersection=Jo,Fn.intersectionBy=Xo,Fn.intersectionWith=qo,Fn.invert=Ia,Fn.invertBy=La,Fn.invokeMap=xs,Fn.iteratee=ol,Fn.keyBy=ks,Fn.keys=Ma,Fn.keysIn=Ca,Fn.map=Es,Fn.mapKeys=function(t,e){var n={};return e=so(e,3),yi(t,(function(t,i,r){ri(n,e(t,i,r),t)})),n},Fn.mapValues=function(t,e){var n={};return e=so(e,3),yi(t,(function(t,i,r){ri(n,i,e(t,i,r))})),n},Fn.matches=function(t){return Di(ai(t,1))},Fn.matchesProperty=function(t,e){return Fi(t,ai(e,1))},Fn.memoize=Os,Fn.merge=Na,Fn.mergeWith=Oa,Fn.method=sl,Fn.methodOf=al,Fn.mixin=ll,Fn.negate=Bs,Fn.nthArg=function(t){return t=_a(t),Ji((function(e){return ji(e,t)}))},Fn.omit=Ba,Fn.omitBy=function(t,e){return Da(t,Bs(so(e)))},Fn.once=function(t){return Is(2,t)},Fn.orderBy=function(t,e,n,i){return null==t?[]:(Gs(e)||(e=null==e?[]:[e]),Gs(n=i?r:n)||(n=null==n?[]:[n]),Ui(t,e,n))},Fn.over=hl,Fn.overArgs=Rs,Fn.overEvery=cl,Fn.overSome=dl,Fn.partial=Ds,Fn.partialRight=Fs,Fn.partition=Ss,Fn.pick=Ra,Fn.pickBy=Da,Fn.property=fl,Fn.propertyOf=function(t){return function(e){return null==t?r:xi(t,e)}},Fn.pull=$o,Fn.pullAll=Qo,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wi(t,e,so(n,2)):t},Fn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wi(t,e,r,n):t},Fn.pullAt=ts,Fn.range=pl,Fn.rangeRight=_l,Fn.rearg=Zs,Fn.reject=function(t,e){return(Gs(t)?xe:_i)(t,Bs(so(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=so(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return Gi(t,r),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new At(o);return Ji(t,e=e===r?e:_a(e))},Fn.reverse=es,Fn.sampleSize=function(t,e,n){return e=(n?go(t,e,n):e===r)?1:_a(e),(Gs(t)?Yn:qi)(t,e)},Fn.set=function(t,e,n){return null==t?t:Yi(t,e,n)},Fn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Yi(t,e,n,i)},Fn.shuffle=function(t){return(Gs(t)?$n:tr)(t)},Fn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&go(t,e,n)?(e=0,n=i):(e=null==e?0:_a(e),n=n===r?i:_a(n)),er(t,e,n)):[]},Fn.sortBy=Ts,Fn.sortedUniq=function(t){return t&&t.length?or(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?or(t,so(e,2)):[]},Fn.split=function(t,e,n){return n&&"number"!=typeof n&&go(t,e,n)&&(e=n=r),(n=n===r?f:n>>>0)?(t=ya(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ar(e))&&$e(t)?yr(sn(t),0,n):t.split(e,n):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new At(o);return e=null==e?0:mn(_a(e),0),Ji((function(n){var i=n[e],r=yr(n,0,e);return i&&Te(r,i),me(t,this,r)}))},Fn.tail=function(t){var e=null==t?0:t.length;return e?er(t,1,e):[]},Fn.take=function(t,e,n){return t&&t.length?er(t,0,(e=n||e===r?1:_a(e))<0?0:e):[]},Fn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=i-(e=n||e===r?1:_a(e)))<0?0:e,i):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?cr(t,so(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?cr(t,so(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new At(o);return ea(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ms(t,e,{leading:i,maxWait:e,trailing:r})},Fn.thru=ps,Fn.toArray=fa,Fn.toPairs=Fa,Fn.toPairsIn=Za,Fn.toPath=function(t){return Gs(t)?Se(t,Do):ua(t)?[t]:Ar(Ro(ya(t)))},Fn.toPlainObject=ga,Fn.transform=function(t,e,n){var i=Gs(t),r=i||Xs(t)||ha(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:ea(t)&&$s(o)?Zn(Vt(t)):{}}return(r?ye:yi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Fn.unary=function(t){return Ps(t,1)},Fn.union=ns,Fn.unionBy=is,Fn.unionWith=rs,Fn.uniq=function(t){return t&&t.length?lr(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?lr(t,so(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?lr(t,r,e):[]},Fn.unset=function(t,e){return null==t||ur(t,e)},Fn.unzip=os,Fn.unzipWith=ss,Fn.update=function(t,e,n){return null==t?t:hr(t,e,vr(n))},Fn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:hr(t,e,vr(n),i)},Fn.values=ja,Fn.valuesIn=function(t){return null==t?[]:We(t,Ca(t))},Fn.without=as,Fn.words=$a,Fn.wrap=function(t,e){return Ds(vr(e),t)},Fn.xor=ls,Fn.xorBy=us,Fn.xorWith=hs,Fn.zip=cs,Fn.zipObject=function(t,e){return pr(t||[],e||[],ti)},Fn.zipObjectDeep=function(t,e){return pr(t||[],e||[],Yi)},Fn.zipWith=ds,Fn.entries=Fa,Fn.entriesIn=Za,Fn.extend=wa,Fn.extendWith=xa,ll(Fn,Fn),Fn.add=yl,Fn.attempt=Qa,Fn.camelCase=Ua,Fn.capitalize=Ha,Fn.ceil=bl,Fn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=ma(n))==n?n:0),e!==r&&(e=(e=ma(e))==e?e:0),si(ma(t),e,n)},Fn.clone=function(t){return ai(t,4)},Fn.cloneDeep=function(t){return ai(t,5)},Fn.cloneDeepWith=function(t,e){return ai(t,5,e="function"==typeof e?e:r)},Fn.cloneWith=function(t,e){return ai(t,4,e="function"==typeof e?e:r)},Fn.conformsTo=function(t,e){return null==e||li(t,e,Ma(e))},Fn.deburr=Wa,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=wl,Fn.endsWith=function(t,e,n){t=ya(t),e=ar(e);var i=t.length,o=n=n===r?i:si(_a(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Fn.eq=js,Fn.escape=function(t){return(t=ya(t))&&J.test(t)?t.replace(V,qe):t},Fn.escapeRegExp=function(t){return(t=ya(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Fn.every=function(t,e,n){var i=Gs(t)?we:fi;return n&&go(t,e,n)&&(e=r),i(t,so(e,3))},Fn.find=ms,Fn.findIndex=Wo,Fn.findKey=function(t,e){return ze(t,so(e,3),yi)},Fn.findLast=gs,Fn.findLastIndex=Go,Fn.findLastKey=function(t,e){return ze(t,so(e,3),bi)},Fn.floor=xl,Fn.forEach=ys,Fn.forEachRight=bs,Fn.forIn=function(t,e){return null==t?t:mi(t,so(e,3),Ca)},Fn.forInRight=function(t,e){return null==t?t:gi(t,so(e,3),Ca)},Fn.forOwn=function(t,e){return t&&yi(t,so(e,3))},Fn.forOwnRight=function(t,e){return t&&bi(t,so(e,3))},Fn.get=Aa,Fn.gt=Us,Fn.gte=Hs,Fn.has=function(t,e){return null!=t&&po(t,e,Ti)},Fn.hasIn=Pa,Fn.head=Ko,Fn.identity=rl,Fn.includes=function(t,e,n,i){t=Ks(t)?t:ja(t),n=n&&!i?_a(n):0;var r=t.length;return n<0&&(n=mn(r+n,0)),la(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Ce(t,e,n)>-1},Fn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:_a(n);return r<0&&(r=mn(i+r,0)),Ce(t,e,r)},Fn.inRange=function(t,e,n){return e=pa(e),n===r?(n=e,e=0):n=pa(n),function(t,e,n){return t>=gn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},Fn.invoke=za,Fn.isArguments=Ws,Fn.isArray=Gs,Fn.isArrayBuffer=Vs,Fn.isArrayLike=Ks,Fn.isArrayLikeObject=Js,Fn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Ei(t)==m},Fn.isBuffer=Xs,Fn.isDate=qs,Fn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(Ks(t)&&(Gs(t)||"string"==typeof t||"function"==typeof t.splice||Xs(t)||ha(t)||Ws(t)))return!t.length;var e=fo(t);if(e==x||e==A)return!t.size;if(xo(t))return!Oi(t).length;for(var n in t)if(Ct.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return zi(t,e)},Fn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?zi(t,e,r,n):!!i},Fn.isError=Ys,Fn.isFinite=function(t){return"number"==typeof t&&pn(t)},Fn.isFunction=$s,Fn.isInteger=Qs,Fn.isLength=ta,Fn.isMap=ia,Fn.isMatch=function(t,e){return t===e||Mi(t,e,lo(e))},Fn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Mi(t,e,lo(e),n)},Fn.isNaN=function(t){return ra(t)&&t!=+t},Fn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ci(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=ra,Fn.isObject=ea,Fn.isObjectLike=na,Fn.isPlainObject=oa,Fn.isRegExp=sa,Fn.isSafeInteger=function(t){return Qs(t)&&t>=-9007199254740991&&t<=c},Fn.isSet=aa,Fn.isString=la,Fn.isSymbol=ua,Fn.isTypedArray=ha,Fn.isUndefined=function(t){return t===r},Fn.isWeakMap=function(t){return na(t)&&fo(t)==L},Fn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Ei(t)},Fn.join=function(t,e){return null==t?"":_n.call(t,e)},Fn.kebabCase=Ga,Fn.last=Yo,Fn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=_a(n))<0?mn(i+o,0):gn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):Me(t,Oe,o,!0)},Fn.lowerCase=Va,Fn.lowerFirst=Ka,Fn.lt=ca,Fn.lte=da,Fn.max=function(t){return t&&t.length?pi(t,rl,Si):r},Fn.maxBy=function(t,e){return t&&t.length?pi(t,so(e,2),Si):r},Fn.mean=function(t){return Be(t,rl)},Fn.meanBy=function(t,e){return Be(t,so(e,2))},Fn.min=function(t){return t&&t.length?pi(t,rl,Bi):r},Fn.minBy=function(t,e){return t&&t.length?pi(t,so(e,2),Bi):r},Fn.stubArray=vl,Fn.stubFalse=ml,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=kl,Fn.nth=function(t,e){return t&&t.length?ji(t,_a(e)):r},Fn.noConflict=function(){return oe._===this&&(oe._=Dt),this},Fn.noop=ul,Fn.now=As,Fn.pad=function(t,e,n){t=ya(t);var i=(e=_a(e))?on(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Ur(cn(r),n)+t+Ur(hn(r),n)},Fn.padEnd=function(t,e,n){t=ya(t);var i=(e=_a(e))?on(t):0;return e&&i<e?t+Ur(e-i,n):t},Fn.padStart=function(t,e,n){t=ya(t);var i=(e=_a(e))?on(t):0;return e&&i<e?Ur(e-i,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ya(t).replace(it,""),e||0)},Fn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&go(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=pa(t),e===r?(e=t,t=0):e=pa(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=wn();return gn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Vi(t,e)},Fn.reduce=function(t,e,n){var i=Gs(t)?Ae:Fe,r=arguments.length<3;return i(t,so(e,4),n,r,ci)},Fn.reduceRight=function(t,e,n){var i=Gs(t)?Pe:Fe,r=arguments.length<3;return i(t,so(e,4),n,r,di)},Fn.repeat=function(t,e,n){return e=(n?go(t,e,n):e===r)?1:_a(e),Ki(ya(t),e)},Fn.replace=function(){var t=arguments,e=ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,n){var i=-1,o=(e=mr(e,t)).length;for(o||(o=1,t=r);++i<o;){var s=null==t?r:t[Do(e[i])];s===r&&(i=o,s=n),t=$s(s)?s.call(t):s}return t},Fn.round=El,Fn.runInContext=t,Fn.sample=function(t){return(Gs(t)?qn:Xi)(t)},Fn.size=function(t){if(null==t)return 0;if(Ks(t))return la(t)?on(t):t.length;var e=fo(t);return e==x||e==A?t.size:Oi(t).length},Fn.snakeCase=Ja,Fn.some=function(t,e,n){var i=Gs(t)?Ie:nr;return n&&go(t,e,n)&&(e=r),i(t,so(e,3))},Fn.sortedIndex=function(t,e){return ir(t,e)},Fn.sortedIndexBy=function(t,e,n){return rr(t,e,so(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=ir(t,e);if(i<n&&js(t[i],e))return i}return-1},Fn.sortedLastIndex=function(t,e){return ir(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return rr(t,e,so(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ir(t,e,!0)-1;if(js(t[n],e))return n}return-1},Fn.startCase=Xa,Fn.startsWith=function(t,e,n){return t=ya(t),n=null==n?0:si(_a(n),0,t.length),e=ar(e),t.slice(n,n+e.length)==e},Fn.subtract=Sl,Fn.sum=function(t){return t&&t.length?Ze(t,rl):0},Fn.sumBy=function(t,e){return t&&t.length?Ze(t,so(e,2)):0},Fn.template=function(t,e,n){var i=Fn.templateSettings;n&&go(t,e,n)&&(e=r),t=ya(t),e=xa({},e,i,qr);var o,s,a=xa({},e.imports,i.imports,qr),l=Ma(a),u=We(a,l),h=0,c=e.interpolate||yt,d="__p += '",f=St((e.escape||yt).source+"|"+c.source+"|"+(c===Y?ct:yt).source+"|"+(e.evaluate||yt).source+"|$","g"),p="//# sourceURL="+(Ct.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yt+"]")+"\n";t.replace(f,(function(e,n,i,r,a,l){return i||(i=r),d+=t.slice(h,l).replace(bt,Ye),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),d+="';\n";var _=Ct.call(e,"variable")&&e.variable;if(_){if(ut.test(_))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(U,""):d).replace(H,"$1").replace(W,"$1;"),d="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Qa((function(){return xt(l,p+"return "+d).apply(r,u)}));if(v.source=d,Ys(v))throw v;return v},Fn.times=function(t,e){if((t=_a(t))<1||t>c)return[];var n=f,i=gn(t,f);e=so(e),t-=f;for(var r=je(i,e);++n<t;)e(n);return r},Fn.toFinite=pa,Fn.toInteger=_a,Fn.toLength=va,Fn.toLower=function(t){return ya(t).toLowerCase()},Fn.toNumber=ma,Fn.toSafeInteger=function(t){return t?si(_a(t),-9007199254740991,c):0===t?t:0},Fn.toString=ya,Fn.toUpper=function(t){return ya(t).toUpperCase()},Fn.trim=function(t,e,n){if((t=ya(t))&&(n||e===r))return Ue(t);if(!t||!(e=ar(e)))return t;var i=sn(t),o=sn(e);return yr(i,Ve(i,o),Ke(i,o)+1).join("")},Fn.trimEnd=function(t,e,n){if((t=ya(t))&&(n||e===r))return t.slice(0,an(t)+1);if(!t||!(e=ar(e)))return t;var i=sn(t);return yr(i,0,Ke(i,sn(e))+1).join("")},Fn.trimStart=function(t,e,n){if((t=ya(t))&&(n||e===r))return t.replace(it,"");if(!t||!(e=ar(e)))return t;var i=sn(t);return yr(i,Ve(i,sn(e))).join("")},Fn.truncate=function(t,e){var n=30,i="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?_a(e.length):n,i="omission"in e?ar(e.omission):i}var s=(t=ya(t)).length;if($e(t)){var a=sn(t);s=a.length}if(n>=s)return t;var l=n-on(i);if(l<1)return i;var u=a?yr(a,0,l).join(""):t.slice(0,l);if(o===r)return u+i;if(a&&(l+=u.length-l),sa(o)){if(t.slice(l).search(o)){var h,c=u;for(o.global||(o=St(o.source,ya(dt.exec(o))+"g")),o.lastIndex=0;h=o.exec(c);)var d=h.index;u=u.slice(0,d===r?l:d)}}else if(t.indexOf(ar(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+i},Fn.unescape=function(t){return(t=ya(t))&&K.test(t)?t.replace(G,ln):t},Fn.uniqueId=function(t){var e=++Nt;return ya(t)+e},Fn.upperCase=qa,Fn.upperFirst=Ya,Fn.each=ys,Fn.eachRight=bs,Fn.first=Ko,ll(Fn,(gl={},yi(Fn,(function(t,e){Ct.call(Fn.prototype,e)||(gl[e]=t)})),gl),{chain:!1}),Fn.VERSION="4.17.21",ye(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fn[t].placeholder=Fn})),ye(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===r?1:mn(_a(n),0);var i=this.__filtered__&&!e?new Hn(this):this.clone();return i.__filtered__?i.__takeCount__=gn(n,i.__takeCount__):i.__views__.push({size:gn(n,f),type:t+(i.__dir__<0?"Right":"")}),i},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ye(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),ye(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),ye(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(rl)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Ji((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return Ii(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(Bs(so(t)))},Hn.prototype.slice=function(t,e){t=_a(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=_a(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(f)},yi(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Fn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);o&&(Fn.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,l=e instanceof Hn,u=a[0],h=l||Gs(e),c=function(t){var e=o.apply(Fn,Te([t],a));return i&&d?e[0]:e};h&&n&&"function"==typeof u&&1!=u.length&&(l=h=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,_=l&&!f;if(!s&&h){e=_?e:new Hn(this);var v=t.apply(e,a);return v.__actions__.push({func:ps,args:[c],thisArg:r}),new Un(v,d)}return p&&_?t.apply(this,a):(v=this.thru(c),p?i?v.value()[0]:v.value():v)})})),ye(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Gs(r)?r:[],t)}return this[n]((function(n){return e.apply(Gs(n)?n:[],t)}))}})),yi(Hn.prototype,(function(t,e){var n=Fn[e];if(n){var i=n.name+"";Ct.call(Ln,i)||(Ln[i]=[]),Ln[i].push({name:e,func:n})}})),Ln[Dr(r,2).name]=[{name:"wrapper",func:r}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Ar(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ar(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ar(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Gs(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=gn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,l=a-s,u=i?a:s-1,h=this.__iteratees__,c=h.length,d=0,f=gn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return dr(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var _=-1,v=t[u+=e];++_<c;){var m=h[_],g=m.iteratee,y=m.type,b=g(v);if(2==y)v=b;else if(!b){if(1==y)continue t;break t}}p[d++]=v}return p},Fn.prototype.at=_s,Fn.prototype.chain=function(){return fs(this)},Fn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===r&&(this.__values__=fa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,n=this;n instanceof jn;){var i=Zo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:ps,args:[es],thisArg:r}),new Un(e,this.__chain__)}return this.thru(es)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return dr(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,se&&(Fn.prototype[se]=function(){return this}),Fn}();oe._=un,(i=function(){return un}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},568:(t,e,n)=>{var i,r,o,s,a;i=n(12),r=n(487).utf8,o=n(738),s=n(487).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):r.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=i.bytesToWords(t),l=8*t.length,u=1732584193,h=-271733879,c=-1732584194,d=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var p=a._ff,_=a._gg,v=a._hh,m=a._ii;for(f=0;f<n.length;f+=16){var g=u,y=h,b=c,w=d;u=p(u,h,c,d,n[f+0],7,-680876936),d=p(d,u,h,c,n[f+1],12,-389564586),c=p(c,d,u,h,n[f+2],17,606105819),h=p(h,c,d,u,n[f+3],22,-1044525330),u=p(u,h,c,d,n[f+4],7,-176418897),d=p(d,u,h,c,n[f+5],12,1200080426),c=p(c,d,u,h,n[f+6],17,-1473231341),h=p(h,c,d,u,n[f+7],22,-45705983),u=p(u,h,c,d,n[f+8],7,1770035416),d=p(d,u,h,c,n[f+9],12,-1958414417),c=p(c,d,u,h,n[f+10],17,-42063),h=p(h,c,d,u,n[f+11],22,-1990404162),u=p(u,h,c,d,n[f+12],7,1804603682),d=p(d,u,h,c,n[f+13],12,-40341101),c=p(c,d,u,h,n[f+14],17,-1502002290),u=_(u,h=p(h,c,d,u,n[f+15],22,1236535329),c,d,n[f+1],5,-165796510),d=_(d,u,h,c,n[f+6],9,-1069501632),c=_(c,d,u,h,n[f+11],14,643717713),h=_(h,c,d,u,n[f+0],20,-373897302),u=_(u,h,c,d,n[f+5],5,-701558691),d=_(d,u,h,c,n[f+10],9,38016083),c=_(c,d,u,h,n[f+15],14,-660478335),h=_(h,c,d,u,n[f+4],20,-405537848),u=_(u,h,c,d,n[f+9],5,568446438),d=_(d,u,h,c,n[f+14],9,-1019803690),c=_(c,d,u,h,n[f+3],14,-187363961),h=_(h,c,d,u,n[f+8],20,1163531501),u=_(u,h,c,d,n[f+13],5,-1444681467),d=_(d,u,h,c,n[f+2],9,-51403784),c=_(c,d,u,h,n[f+7],14,1735328473),u=v(u,h=_(h,c,d,u,n[f+12],20,-1926607734),c,d,n[f+5],4,-378558),d=v(d,u,h,c,n[f+8],11,-2022574463),c=v(c,d,u,h,n[f+11],16,1839030562),h=v(h,c,d,u,n[f+14],23,-35309556),u=v(u,h,c,d,n[f+1],4,-1530992060),d=v(d,u,h,c,n[f+4],11,1272893353),c=v(c,d,u,h,n[f+7],16,-155497632),h=v(h,c,d,u,n[f+10],23,-1094730640),u=v(u,h,c,d,n[f+13],4,681279174),d=v(d,u,h,c,n[f+0],11,-358537222),c=v(c,d,u,h,n[f+3],16,-722521979),h=v(h,c,d,u,n[f+6],23,76029189),u=v(u,h,c,d,n[f+9],4,-640364487),d=v(d,u,h,c,n[f+12],11,-421815835),c=v(c,d,u,h,n[f+15],16,530742520),u=m(u,h=v(h,c,d,u,n[f+2],23,-995338651),c,d,n[f+0],6,-198630844),d=m(d,u,h,c,n[f+7],10,1126891415),c=m(c,d,u,h,n[f+14],15,-1416354905),h=m(h,c,d,u,n[f+5],21,-57434055),u=m(u,h,c,d,n[f+12],6,1700485571),d=m(d,u,h,c,n[f+3],10,-1894986606),c=m(c,d,u,h,n[f+10],15,-1051523),h=m(h,c,d,u,n[f+1],21,-2054922799),u=m(u,h,c,d,n[f+8],6,1873313359),d=m(d,u,h,c,n[f+15],10,-30611744),c=m(c,d,u,h,n[f+6],15,-1560198380),h=m(h,c,d,u,n[f+13],21,1309151649),u=m(u,h,c,d,n[f+4],6,-145523070),d=m(d,u,h,c,n[f+11],10,-1120210379),c=m(c,d,u,h,n[f+2],15,718787259),h=m(h,c,d,u,n[f+9],21,-343485551),u=u+g>>>0,h=h+y>>>0,c=c+b>>>0,d=d+w>>>0}return i.endian([u,h,c,d])})._ff=function(t,e,n,i,r,o,s){var a=t+(e&n|~e&i)+(r>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,n,i,r,o,s){var a=t+(e&i|n&~i)+(r>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,n,i,r,o,s){var a=t+(e^n^i)+(r>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,n,i,r,o,s){var a=t+(n^(e|~i))+(r>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=i.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):i.bytesToHex(n)}},104:t=>{var e="undefined"!=typeof process&&process.pid?process.pid.toString(36):"";function n(){var t=Date.now(),e=n.last||t;return n.last=t>e?t:e+1}t.exports=t.exports.default=function(t,i){return(t||"")+""+e+n().toString(36)+(i||"")},t.exports.process=function(t,i){return(t||"")+e+n().toString(36)+(i||"")},t.exports.time=function(t,e){return(t||"")+n().toString(36)+(e||"")}},196:t=>{t.exports="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\nin vec2 vCRSCoords;\n\n\n\n#define WEIRDNESS 0\n#define CONTINENTALNESS 1\n#define EROSION 2\n#define TEMPERATURE 3\n#define HUMIDITY 4\n#define OFFSET 5\n#define DEPTH 5 // used for getCellBorder\n\n#define FIRST 0\n#define SECOND 1\n\n#define X_AXIS 0\n#define Y_AXIS 1\n#define Z_AXIS 2\n\n#define OCTAVE_COUNT 20\n#define MAX_PARAMETER_CELLS_BORDERS 20\n\n#define FIRST_OCTAVE_TEXTURE_FACTOR -256.0\n#define FLOAT_TEXTURE_FACTOR 8.0\n#define FLOAT_TEXTURE_OFFSET -8.0\n#define P_TEXTURE_FACTOR 256.0\n\n#define BORDER_UNDEFINED -200.0\n\nconst int NOISE_STORAGE_LENGTH = (MAX_PARAMETER_CELLS_BORDERS + OCTAVE_COUNT * 259 * 2 + 2 + OCTAVE_COUNT);\n\nuniform sampler2D parameterTexture;\n\nfloat getParameter(int index){\n    int texture_width = textureSize(parameterTexture, 0).x;\n    return texelFetch(parameterTexture, ivec2(index % texture_width, index / texture_width), 0).r;\n}  \n\nint getFirstOctave(int noise){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH;\n    return int(getParameter(parameter_index));\n}\n\nfloat getValueFactor(int noise){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 1;\n    return getParameter(parameter_index);\n}\n\nfloat getAmplitude(int noise, int index){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + index;\n    return getParameter(parameter_index);\n}\n\nfloat getCellBorder(int noise, int index){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + OCTAVE_COUNT + index;\n    return getParameter(parameter_index);\n}\n\nfloat getPos0(int noise, int normal_noise_index, int octave_index, int axis){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + OCTAVE_COUNT + MAX_PARAMETER_CELLS_BORDERS + normal_noise_index * (OCTAVE_COUNT * 259) + 259 * octave_index + axis;\n    return getParameter(parameter_index);\n}\n\nint getP(int noise, int normal_noise_index, int octave_index, int index){\n    int parameter_index = noise * NOISE_STORAGE_LENGTH + 2 + OCTAVE_COUNT + MAX_PARAMETER_CELLS_BORDERS + normal_noise_index * (OCTAVE_COUNT * 259) + 259 * octave_index + 3 + (index & 0xFF);\n    int value = int(getParameter(parameter_index));\n    return value & 0xFF;\n}\n\nconst int GRADIENT[48] = int[](1, 1, 0, -1, 1, 0, 1, -1, 0, -1, -1, 0, 1, 0, 1, -1, 0, 1, 1, 0, -1, -1, 0, -1, 0, 1, 1, 0, -1, 1, 0, 1, -1, 0, -1, -1, 1, 1, 0, 0, -1, 1, -1, 1, 0, 0, -1, -1);\n\nfloat grad_dot(int p, float a, float b, float c){\n    int index = (p & 15) * 3;\n    return float(GRADIENT[index]) * a + float(GRADIENT[index + 1]) * b + float(GRADIENT[index + 2]) * c;\n}\n\nfloat _smoothstep(float x){\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nfloat lerp(float alpha, float a, float b) {\n\treturn a + alpha * (b - a);\n}\n\nfloat lerp2(float alpha1, float alpha2, float a, float b, float c, float d) {\n\treturn lerp(alpha2, lerp(alpha1, a, b), lerp(alpha1, c, d));\n}\n\nfloat lerp3(float alpha1, float alpha2, float alpha3, float a, float b, float c, float d, float e, float f, float g, float h) {\n\treturn lerp(alpha3, lerp2(alpha1, alpha2, a, b, c, d), lerp2(alpha1, alpha2, e, f, g, h));\n}\n\nfloat improved_noise(int noise, int normal_noise_index, int octave_index, float x, float y, float z, float yScale, float yLimit){\n\n    float x2 = x + getPos0(noise, normal_noise_index, octave_index, X_AXIS);\n    float y2 = y + getPos0(noise, normal_noise_index, octave_index, Y_AXIS);\n    float z2 = z + getPos0(noise, normal_noise_index, octave_index, Z_AXIS);\n\n    int x3 = int(floor(x2));\n    int y3 = int(floor(y2));\n    int z3 = int(floor(z2));\n\n    float x4 = x2 - float(x3);\n    float y4 = y2 - float(y3);\n    float z4 = z2 - float(z3);\n\n    float y6 = 0.0;\n\n    if (yScale != 0.0){\n        float t = yLimit >= 0.0 && yLimit < y4 ? yLimit : y4;\n        y6 = floor(t / yScale + 1e-7) * yScale;\n    }\n\n    float y7 = y4 - y6;\n\n    int p1 = getP(noise, normal_noise_index, octave_index, x3);\n    int p2 = getP(noise, normal_noise_index, octave_index, x3 + 1);\n    int p3 = getP(noise, normal_noise_index, octave_index, p1 + y3);\n    int p4 = getP(noise, normal_noise_index, octave_index, p1 + y3 + 1);\n    int p5 = getP(noise, normal_noise_index, octave_index, p2 + y3);\n    int p6 = getP(noise, normal_noise_index, octave_index, p2 + y3 + 1);\n\n    float n = grad_dot(getP(noise, normal_noise_index, octave_index, p3 + z3), x4, y7, z4);\n    float o = grad_dot(getP(noise, normal_noise_index, octave_index, p5 + z3), x4 - 1.0, y7, z4);\n    float p = grad_dot(getP(noise, normal_noise_index, octave_index, p4 + z3), x4, y7 - 1.0, z4);\n    float q = grad_dot(getP(noise, normal_noise_index, octave_index, p6 + z3), x4 - 1.0, y7 - 1.0, z4);\n    float r = grad_dot(getP(noise, normal_noise_index, octave_index, p3 + z3 + 1), x4, y7, z4 - 1.0);\n    float s = grad_dot(getP(noise, normal_noise_index, octave_index, p5 + z3 + 1), x4 - 1.0, y7, z4 - 1.0);\n    float t = grad_dot(getP(noise, normal_noise_index, octave_index, p4 + z3 + 1), x4, y7 - 1.0, z4 - 1.0);\n    float u = grad_dot(getP(noise, normal_noise_index, octave_index, p6 + z3 + 1), x4 - 1.0, y7 - 1.0, z4 - 1.0);\n\n    float alpha1 = _smoothstep(x4);\n    float alpha2 = _smoothstep(y4);\n    float alpha3 = _smoothstep(z4);\n\n    return lerp3(alpha1, alpha2, alpha3, n, o, p, q, r, s, t, u);\n}\n\n\nfloat _wrap(float value) {\n    return value - floor(value / 3.3554432E7 + 0.5) * 3.3554432E7;\n}\n\nfloat perlin_noise(int noise, int normal_noise_index, float x, float y, float z, float yScale, float yLimit, bool fixY){\n    float value = 0.0;\n    float inputF = pow(2.0,float(getFirstOctave(noise)));\n    float valueF = 1.0;\n\n    for (int i = 0 ; i < 20 ; i++){\n        float amplitude = getAmplitude(noise, i);\n        if (amplitude != 0.0){\n            value += amplitude * valueF * improved_noise(noise, normal_noise_index, i, \n                _wrap(x * inputF),\n                fixY ? -getPos0(noise, normal_noise_index, i , Y_AXIS) : _wrap(y * inputF),\n                _wrap(z * inputF),\n                yScale * inputF,\n                yLimit * inputF\n            );\n        }\n        inputF *= 2.0;\n        valueF /= 2.0;\n    }\n\n    return value;\n}\n\n\n#define INPUT_FACTOR 1.0181268882175227\n\nfloat normal_noise(int noise, float x, float y, float z){\n    return (perlin_noise(noise, FIRST, x, y, z, 0.0, 0.0, false) + perlin_noise(noise, SECOND, x * INPUT_FACTOR, y * INPUT_FACTOR, z * INPUT_FACTOR, 0.0, 0.0, false)) * getValueFactor(noise);\n}\n\nuniform sampler2D biomeTexture;\n\nint bucketize(int noise, float value, out int count){\n    int result = 20;\n    count = 20;\n    for (int i = 0 ; i < 20 ; i++){\n        float border = getCellBorder(noise, i);\n        if (border == BORDER_UNDEFINED && count == 20){\n            count = i + 1;\n        }\n        if (result == 20 && (border == BORDER_UNDEFINED || border > value)){\n            result = i;\n        }\n    }\n    return result;\n}\n\nvec4 lookup_biome(float continentalness, float erosion, float weirdness, float temperature, float humidity, float depth){\n    int c_count, e_count, w_count, t_count, h_count, d_count;\n\n    int c = bucketize(CONTINENTALNESS, continentalness, c_count);\n    int e = bucketize(EROSION, erosion, e_count);\n    int w = bucketize(WEIRDNESS, weirdness, w_count);\n    int t = bucketize(TEMPERATURE, temperature, t_count);\n    int h = bucketize(HUMIDITY, humidity, h_count);\n    int d = bucketize(DEPTH, depth, d_count);\n\n    int index = \n        d * h_count * t_count * w_count * e_count * c_count +\n        h * t_count * w_count * e_count * c_count +\n        t * w_count * e_count * c_count + \n        w * e_count * c_count +\n        e * c_count +\n        c;\n\n    int texture_width = textureSize(biomeTexture, 0).x;\n\n    return texelFetch(biomeTexture, ivec2(index % texture_width, index / texture_width), 0);\n}\n\n\n\n\n#define OFFSET_SPLINE 0\n\n\n\n#define SPLINE_MAX_CONTINENTALNESSES 20\n#define SPLINE_MAX_EROSIONS 20 \n#define SPLINE_MAX_POINTS 40\n\nconst int SPLINE_STORAGE_LENGHT = SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + 2 + SPLINE_MAX_CONTINENTALNESSES * SPLINE_MAX_EROSIONS * (SPLINE_MAX_POINTS * 4 + 1);\n\nuniform sampler2D splineTexture;\n\nfloat spline_get_parameter(int index){\n    int texture_width = textureSize(splineTexture, 0).x;\n    return texelFetch(splineTexture, ivec2(index % texture_width, index / texture_width), 0).r;\n}  \n\nint spline_get_num_continentalnesses(int spline){\n    return int(spline_get_parameter(spline * SPLINE_STORAGE_LENGHT));\n}\n\nint spline_get_num_erosions(int spline){\n    return int(spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 1 + SPLINE_MAX_CONTINENTALNESSES));\n}\n\nfloat spline_get_continentalness_cell_border(int spline, int ci){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 1 + ci);\n}\n\nfloat spline_get_erosion_cell_border(int spline, int ei){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + ei);\n}\n\n\nint spline_get_num_points(int spline, int ci, int ei){\n    return int(spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1)));\n}\n\nbool spline_is_defined(int spline, int ci, int ei){\n    return spline_get_num_points(spline, ci, ei) > 0;\n}\n\nfloat spline_get_point_location(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4);\n}\n\nfloat spline_get_point_value(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4 + 1);\n}\n\nfloat spline_get_point_derivative_left(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4 + 2);\n}\n\nfloat spline_get_point_derivative_right(int spline, int ci, int ei, int wi){\n    return spline_get_parameter(spline * SPLINE_STORAGE_LENGHT + 2 + SPLINE_MAX_CONTINENTALNESSES + SPLINE_MAX_EROSIONS + (ci * SPLINE_MAX_EROSIONS + ei) * (SPLINE_MAX_POINTS * 4 + 1) + 1 + wi * 4 + 3);\n}\n\n\n\nfloat spline_apply_weirdness(int spline, int ci, int ei, float w){\n    int wi;\n    int num_weirnesses = spline_get_num_points(spline, ci, ei);\n    for (int i = 0; i < num_weirnesses; i++) {\n        if (spline_get_point_location(spline, ci, ei, i) < w) {\n            wi = i;\n        }\n    }\n\n    if (wi < 0) {\n        return spline_get_point_value(spline, ci, ei, 0) + spline_get_point_derivative_left(spline, ci, ei, 0) * (w - spline_get_point_location(spline, ci, ei, 0));\n    }\n    if (wi == num_weirnesses - 1) {\n        return spline_get_point_value(spline, ci, ei, wi) + spline_get_point_derivative_right(spline, ci, ei, wi) * (w - spline_get_point_location(spline, ci, ei, wi));\n    }\n\n    float loc0 = spline_get_point_location(spline, ci, ei, wi);\n    float loc1 = spline_get_point_location(spline, ci, ei, wi+1);\n    float der0 = spline_get_point_derivative_right(spline, ci, ei, wi);\n    float der1 = spline_get_point_derivative_left(spline, ci, ei, wi+1);\n    float f = (w - loc0) / (loc1 - loc0);\n\n    float val0 = spline_get_point_value(spline, ci, ei, wi);\n    float val1 = spline_get_point_value(spline, ci, ei, wi+1);\n\n    float f8 = der0 * (loc1 - loc0) - (val1 - val0);\n    float f9 = -der1 * (loc1 - loc0) + (val1 - val0);\n    float f10 = lerp(f, val0, val1) + f * (1.0 - f) * lerp(f, f8, f9);\n    return f10;\n}\n\nfloat interpolate_zero_grad(float alpha, float a, float b) {\n    return lerp(alpha, a, b) + alpha * (1.0 - alpha) * lerp(alpha, a - b, b - a);\n}\n\nfloat spline_apply_erosion(int spline, int ci, float e, float w){\n    int e_last = -1;\n    int e_next = -1;\n    int num_erosions = spline_get_num_erosions(spline);\n    for (int ei = 0; ei < num_erosions; ei++) {\n        if (spline_is_defined(spline, ci, ei)) {\n            if (spline_get_erosion_cell_border(spline, ei) < e) {\n                e_last = ei;\n            } else {\n                e_next = ei;\n                break;\n            }\n        }\n    }\n\n    if (e_last == -1 && e_next == -1) {\n        return 0.0;\n    } else if (e_last == -1) {;\n        return spline_apply_weirdness(spline,ci,e_next,w);\n    } else if (e_next == -1) {\n        return spline_apply_weirdness(spline,ci,e_last,w);\n    } else {\n        float last_ero = spline_get_erosion_cell_border(spline, e_last);\n        float next_ero = spline_get_erosion_cell_border(spline, e_next);\n        return interpolate_zero_grad((e - last_ero) / (next_ero - last_ero),\n            spline_apply_weirdness(spline,ci,e_last,w),\n            spline_apply_weirdness(spline,ci,e_next,w));\n    }\n}\n\nfloat spline_apply(int spline, float c, float e, float w){\n    int c_last = -1;\n    int c_next = -1;\n    int num_continentalnesses = spline_get_num_continentalnesses(spline);\n    for (int ci = 0; ci < num_continentalnesses; ci++) {\n        if (spline_get_continentalness_cell_border(spline, ci) < c) {\n            c_last = ci;\n        } else {\n            c_next = ci;\n            break;\n        }\n    }\n\n    if (c_last == -1 && c_next == -1 ) {\n        return 0.0;\n    } else if (c_last == -1) {\n        return spline_apply_erosion(spline, c_next, e, w);\n    } else if (c_next == -1) {\n        return spline_apply_erosion(spline, c_last, e, w);\n    } else {\n        float last_cont = spline_get_continentalness_cell_border(spline, c_last);\n        float next_cont = spline_get_continentalness_cell_border(spline, c_next);\n        return interpolate_zero_grad((c - last_cont) / (next_cont - last_cont),\n            spline_apply_erosion(spline, c_last, e, w),\n            spline_apply_erosion(spline, c_next, e, w));\n    }\n}\n\n#define M_PI 3.1415926535897932384626433832795\n\nuniform mat4 transform;\nuniform vec3 color;\n\nuniform bool enable_isolines;\nuniform bool enable_hillshading;\n\nuniform int y_level;\nuniform float fixed_continentalness;\nuniform float fixed_erosion;\nuniform float fixed_weirdness;\nuniform float fixed_temperature;\nuniform float fixed_humidity;\n\nout vec4 output_color;\n\nconst float zenith = 20.0 * M_PI / 180.0;\nconst float azimuth = 225.0 * M_PI / 180.0;\n\n\nfloat inv_lerp(float a, float b, float v) {\n\treturn (v - a) / (b - a);\n}\n \nvoid main(void) {\n\t\n\t\n\tfloat x = vCRSCoords.x / 4.0;\n\tfloat z = -vCRSCoords.y / 4.0;\n\n\tfloat pixel_scale = dFdx(x);\n\n    float xx = x + normal_noise(OFFSET, x, 0.0, z) * 4.0;\n    float zz = z + normal_noise(OFFSET, z, x, 0.0) * 4.0;\n\n\tfloat continentalness = fixed_continentalness != 10000.0 ? fixed_continentalness : normal_noise(CONTINENTALNESS, xx, 0.0, zz);\n\tfloat erosion = fixed_erosion != 10000.0 ? fixed_erosion : normal_noise(EROSION, xx, 0.0, zz);\n\tfloat weirdness = fixed_weirdness != 10000.0 ? fixed_weirdness : normal_noise(WEIRDNESS, xx, 0.0, zz);\n\tfloat temperature = fixed_temperature != 10000.0 ? fixed_temperature : normal_noise(TEMPERATURE, xx, 0.0, zz);\n\tfloat humidity = fixed_humidity != 10000.0 ? fixed_humidity : normal_noise(HUMIDITY, xx, 0.0, zz);\n\n\tfloat offset = spline_apply(OFFSET_SPLINE, continentalness, erosion, weirdness);\n\n\tfloat depth = ((y_level == 10000) ? -0.001 : -(float(y_level) - 64.0) / 128.0 + offset);\n\n\tvec4 biome_color = lookup_biome(continentalness, erosion, weirdness, temperature, humidity, depth);\n\t\n\tfloat offset_slope_x = dFdx(offset);\n\tfloat offset_slope_y = dFdy(offset);\n\n\tfloat hillshade = 1.0;\n\tif (enable_hillshading && depth < 0.0){\n\t\tfloat slope = atan(20.0 / pixel_scale * sqrt(offset_slope_x * offset_slope_x + offset_slope_y * offset_slope_y));\n\t\tfloat aspect;\n\t\tif (offset_slope_x == 0.0){\n\t\t\tif (offset_slope_y < 0.0){\n\t\t\t\taspect = M_PI;\n\t\t\t} else {\n\t\t\t\taspect = 0.0;\n\t\t\t}\n\t\t} else {\n\t\t\taspect = atan(offset_slope_y, -offset_slope_x);\n\t\t}\n\n\t\thillshade = ((cos(zenith) * cos(slope)) + (sin(zenith) * sin(slope) * cos(azimuth - aspect)));\n\t\tif (hillshade < 0.0)\n\t\t\thillshade = 0.0;\n\n\t\thillshade = hillshade * 0.7 + 0.3;\n\t}\n\n\tfloat isoline = 1.0;\n\tif (pixel_scale < 1.0 && enable_isolines && depth < 0.0){\n\t\tfloat isoline_step = 0.1;\n\n\t\tfloat delta = 2.0 * sqrt(offset_slope_x * offset_slope_x + offset_slope_y * offset_slope_y);\n\t\tfloat offset_hi = offset + delta + 0.01;\n\t\tfloat offset_lo = offset - delta + 0.01;\n\n\t\tfloat isoline_value = floor(offset_hi / isoline_step) * isoline_step;\n\t\tfloat isoline_alpha = inv_lerp(offset_lo, offset_hi, isoline_value);\n\t\tisoline = min(abs(0.5 - isoline_alpha) * 3.0 + 0.2, 1.0);\n\t}\n\n\toutput_color = biome_color * vec4(hillshade * isoline, hillshade * isoline, hillshade * isoline, 1.0);\n\t\n\n\t/*\n\tif (offset > 0.6){\n\t\toutput_color = vec4(biome_color.rgb, 0.5);// biome_color;\n\t} else {\n\t\toutput_color = biome_color;// biome_color;\n\t}*/\n}\n"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";function t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),i=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const a=new Array(60);t(a);const l=new Array(512);t(l);const u=new Array(256);t(u);const h=new Array(29);t(h);const c=new Array(30);function d(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}let f,p,_;function v(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(c);const m=t=>t<256?l[t]:l[256+(t>>>7)],g=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},y=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,g(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},b=(t,e,n)=>{y(t,n[2*e],n[2*e+1])},w=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},x=(t,e,n)=>{const i=new Array(16);let r,o,s=0;for(r=1;r<=15;r++)i[r]=s=s+n[r-1]<<1;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=w(i[e]++,e))}},k=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},E=t=>{t.bi_valid>8?g(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=(t,e,n,i)=>{const r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]},T=(t,e,n)=>{const i=t.heap[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i},A=(t,n,r)=>{let o,s,a,l,d=0;if(0!==t.last_lit)do{o=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],s=t.pending_buf[t.l_buf+d],d++,0===o?b(t,s,n):(a=u[s],b(t,a+256+1,n),l=e[a],0!==l&&(s-=h[a],y(t,s,l)),o--,a=m(o),b(t,a,r),l=i[a],0!==l&&(o-=c[a],y(t,o,l)))}while(d<t.last_lit);b(t,256,n)},P=(t,e)=>{const n=e.dyn_tree,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.elems;let s,a,l,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):n[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=i[2*l+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)T(t,n,s);l=o;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,n[2*l]=n[2*s]+n[2*a],t.depth[l]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,n[2*s+1]=n[2*a+1]=l,t.heap[1]=l++,T(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,i=e.max_code,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,h,c,d,f,p,_=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)h=t.heap[u],d=n[2*n[2*h+1]+1]+1,d>l&&(d=l,_++),n[2*h+1]=d,h>i||(t.bl_count[d]++,f=0,h>=a&&(f=s[h-a]),p=n[2*h],t.opt_len+=p*(d+f),o&&(t.static_len+=p*(r[2*h+1]+f)));if(0!==_){do{for(d=l-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,_-=2}while(_>0);for(d=l;0!==d;d--)for(h=t.bl_count[d];0!==h;)c=t.heap[--u],c>i||(n[2*c+1]!==d&&(t.opt_len+=(d-n[2*c+1])*n[2*c],n[2*c+1]=d),h--)}})(t,e),x(n,u,t.bl_count)},I=(t,e,n)=>{let i,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<l&&r===s||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4))},L=(t,e,n)=>{let i,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<l&&r===s)){if(a<u)do{b(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(b(t,r,t.bl_tree),a--),b(t,16,t.bl_tree),y(t,a-3,2)):a<=10?(b(t,17,t.bl_tree),y(t,a-3,3)):(b(t,18,t.bl_tree),y(t,a-11,7));a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4)}};let z=!1;const M=(t,e,n,i)=>{y(t,0+(i?1:0),3),((t,e,n,i)=>{E(t),g(t,n),g(t,~n),t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n})(t,e,n)};var C={_tr_init:t=>{z||((()=>{let t,n,o,v,m;const g=new Array(16);for(o=0,v=0;v<28;v++)for(h[v]=o,t=0;t<1<<e[v];t++)u[o++]=v;for(u[o-1]=v,m=0,v=0;v<16;v++)for(c[v]=m,t=0;t<1<<i[v];t++)l[m++]=v;for(m>>=7;v<30;v++)for(c[v]=m<<7,t=0;t<1<<i[v]-7;t++)l[256+m++]=v;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(x(s,287,g),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=w(t,5);f=new d(s,e,257,286,15),p=new d(a,i,0,30,15),_=new d(new Array(0),r,0,19,7)})(),z=!0),t.l_desc=new v(t.dyn_ltree,f),t.d_desc=new v(t.dyn_dtree,p),t.bl_desc=new v(t.bl_tree,_),t.bi_buf=0,t.bi_valid=0,k(t)},_tr_stored_block:M,_tr_flush_block:(t,e,n,i)=>{let r,l,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),P(t,t.l_desc),P(t,t.d_desc),u=(t=>{let e;for(I(t,t.dyn_ltree,t.l_desc.max_code),I(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*o[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=r&&(r=l)):r=l=n+5,n+4<=r&&-1!==e?M(t,e,n,i):4===t.strategy||l===r?(y(t,2+(i?1:0),3),A(t,s,a)):(y(t,4+(i?1:0),3),((t,e,n,i)=>{let r;for(y(t,e-257,5),y(t,n-1,5),y(t,i-4,4),r=0;r<i;r++)y(t,t.bl_tree[2*o[r]+1],3);L(t,t.dyn_ltree,e-1),L(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),A(t,t.dyn_ltree,t.dyn_dtree)),k(t),i&&E(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(u[n]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{y(t,2,3),b(t,256,s),(t=>{16===t.bi_valid?(g(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},N=(t,e,n,i)=>{let r=65535&t|0,o=t>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{r=r+e[i++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16|0};const O=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var B=(t,e,n,i)=>{const r=O,o=i+n;t^=-1;for(let n=i;n<o;n++)t=t>>>8^r[255&(t^e[n])];return-1^t},R={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},D={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:F,_tr_stored_block:Z,_tr_flush_block:j,_tr_tally:U,_tr_align:H}=C,{Z_NO_FLUSH:W,Z_PARTIAL_FLUSH:G,Z_FULL_FLUSH:V,Z_FINISH:K,Z_BLOCK:J,Z_OK:X,Z_STREAM_END:q,Z_STREAM_ERROR:Y,Z_DATA_ERROR:$,Z_BUF_ERROR:Q,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:nt,Z_RLE:it,Z_FIXED:rt,Z_DEFAULT_STRATEGY:ot,Z_UNKNOWN:st,Z_DEFLATED:at}=D,lt=258,ut=262,ht=103,ct=113,dt=666,ft=(t,e)=>(t.msg=R[e],e),pt=t=>(t<<1)-(t>4?9:0),_t=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let vt=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const mt=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},gt=(t,e)=>{j(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,mt(t.strm)},yt=(t,e)=>{t.pending_buf[t.pending++]=e},bt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},wt=(t,e,n,i)=>{let r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),n),1===t.state.wrap?t.adler=N(t.adler,e,r,n):2===t.state.wrap&&(t.adler=B(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)},xt=(t,e)=>{let n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-ut?t.strstart-(t.w_size-ut):0,u=t.window,h=t.w_mask,c=t.prev,d=t.strstart+lt;let f=u[o+s-1],p=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,u[n+s]===p&&u[n+s-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(i=lt-(d-o),o=d-lt,i>s){if(t.match_start=e,s=i,i>=a)break;f=u[o+s-1],p=u[o+s]}}}while((e=c[e&h])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},kt=t=>{const e=t.w_size;let n,i,r,o,s;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ut)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,n=i;do{r=t.head[--n],t.head[n]=r>=e?r-e:0}while(--i);i=e,n=i;do{r=t.prev[--n],t.prev[n]=r>=e?r-e:0}while(--i);o+=e}if(0===t.strm.avail_in)break;if(i=wt(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=vt(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=vt(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ut&&0!==t.strm.avail_in)},Et=(t,e)=>{let n,i;for(;;){if(t.lookahead<ut){if(kt(t),t.lookahead<ut&&e===W)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ut&&(t.match_length=xt(t,n)),t.match_length>=3)if(i=U(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=vt(t,t.ins_h,t.window[t.strstart+1]);else i=U(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===K?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2},St=(t,e)=>{let n,i,r;for(;;){if(t.lookahead<ut){if(kt(t),t.lookahead<ut&&e===W)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ut&&(t.match_length=xt(t,n),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=U(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=vt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(gt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=U(t,0,t.window[t.strstart-1]),i&&gt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=U(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===K?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2};function Tt(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}const At=[new Tt(0,0,0,0,((t,e)=>{let n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(kt(t),0===t.lookahead&&e===W)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,gt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ut&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===K?(gt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(gt(t,!1),t.strm.avail_out),1)})),new Tt(4,4,8,4,Et),new Tt(4,5,16,8,Et),new Tt(4,6,32,32,Et),new Tt(4,4,16,16,St),new Tt(8,16,32,32,St),new Tt(8,16,128,128,St),new Tt(8,32,128,256,St),new Tt(32,128,258,1024,St),new Tt(32,258,258,4096,St)];function Pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=at,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_t(this.dyn_ltree),_t(this.dyn_dtree),_t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const It=t=>{if(!t||!t.state)return ft(t,Y);t.total_in=t.total_out=0,t.data_type=st;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:ct,t.adler=2===e.wrap?0:1,e.last_flush=W,F(e),X},Lt=t=>{const e=It(t);return e===X&&((n=t.state).window_size=2*n.w_size,_t(n.head),n.max_lazy_match=At[n.level].max_lazy,n.good_match=At[n.level].good_length,n.nice_match=At[n.level].nice_length,n.max_chain_length=At[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e;var n},zt=(t,e,n,i,r,o)=>{if(!t)return Y;let s=1;if(e===tt&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==at||i<8||i>15||e<0||e>9||o<0||o>rt)return ft(t,Y);8===i&&(i=9);const a=new Pt;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=n,Lt(t)};var Mt=zt,Ct=(t,e)=>t&&t.state?2!==t.state.wrap?Y:(t.state.gzhead=e,X):Y,Nt=(t,e)=>{let n,i;if(!t||!t.state||e>J||e<0)return t?ft(t,Y):Y;const r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===dt&&e!==K)return ft(t,0===t.avail_out?Q:Y);r.strm=t;const o=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,yt(r,31),yt(r,139),yt(r,8),r.gzhead?(yt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),yt(r,255&r.gzhead.time),yt(r,r.gzhead.time>>8&255),yt(r,r.gzhead.time>>16&255),yt(r,r.gzhead.time>>24&255),yt(r,9===r.level?2:r.strategy>=nt||r.level<2?4:0),yt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(yt(r,255&r.gzhead.extra.length),yt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=B(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(yt(r,0),yt(r,0),yt(r,0),yt(r,0),yt(r,0),yt(r,9===r.level?2:r.strategy>=nt||r.level<2?4:0),yt(r,3),r.status=ct);else{let e=at+(r.w_bits-8<<4)<<8,n=-1;n=r.strategy>=nt||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,r.status=ct,bt(r,e),0!==r.strstart&&(bt(r,t.adler>>>16),bt(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(t.adler=B(t.adler,r.pending_buf,r.pending-n,n)),mt(t),n=r.pending,r.pending!==r.pending_buf_size));)yt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(t.adler=B(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(t.adler=B(t.adler,r.pending_buf,r.pending-n,n)),mt(t),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,yt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(t.adler=B(t.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(t.adler=B(t.adler,r.pending_buf,r.pending-n,n)),mt(t),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,yt(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(t.adler=B(t.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=ht)}else r.status=ht;if(r.status===ht&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&mt(t),r.pending+2<=r.pending_buf_size&&(yt(r,255&t.adler),yt(r,t.adler>>8&255),t.adler=0,r.status=ct)):r.status=ct),0!==r.pending){if(mt(t),0===t.avail_out)return r.last_flush=-1,X}else if(0===t.avail_in&&pt(e)<=pt(o)&&e!==K)return ft(t,Q);if(r.status===dt&&0!==t.avail_in)return ft(t,Q);if(0!==t.avail_in||0!==r.lookahead||e!==W&&r.status!==dt){let n=r.strategy===nt?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(kt(t),0===t.lookahead)){if(e===W)return 1;break}if(t.match_length=0,n=U(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===K?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===it?((t,e)=>{let n,i,r,o;const s=t.window;for(;;){if(t.lookahead<=lt){if(kt(t),t.lookahead<=lt&&e===W)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){o=t.strstart+lt;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);t.match_length=lt-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=U(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=U(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(gt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===K?(gt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(gt(t,!1),0===t.strm.avail_out)?1:2})(r,e):At[r.level].func(r,e);if(3!==n&&4!==n||(r.status=dt),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),X;if(2===n&&(e===G?H(r):e!==J&&(Z(r,0,0,!1),e===V&&(_t(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),mt(t),0===t.avail_out))return r.last_flush=-1,X}return e!==K?X:r.wrap<=0?q:(2===r.wrap?(yt(r,255&t.adler),yt(r,t.adler>>8&255),yt(r,t.adler>>16&255),yt(r,t.adler>>24&255),yt(r,255&t.total_in),yt(r,t.total_in>>8&255),yt(r,t.total_in>>16&255),yt(r,t.total_in>>24&255)):(bt(r,t.adler>>>16),bt(r,65535&t.adler)),mt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?X:q)},Ot=t=>{if(!t||!t.state)return Y;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==ht&&e!==ct&&e!==dt?ft(t,Y):(t.state=null,e===ct?ft(t,$):X)},Bt=(t,e)=>{let n=e.length;if(!t||!t.state)return Y;const i=t.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return Y;if(1===r&&(t.adler=N(t.adler,e,n,0)),i.wrap=0,n>=i.w_size){0===r&&(_t(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(n-i.w_size,n),0),e=t,n=i.w_size}const o=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,kt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=vt(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,kt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=s,t.input=a,t.avail_in=o,i.wrap=r,X};const Rt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Dt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Rt(n,e)&&(t[e]=n[e])}}return t},Ft=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,i=0,r=t.length;e<r;e++){let r=t[e];n.set(r,i),i+=r.length}return n};let Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}const jt=new Uint8Array(256);for(let t=0;t<256;t++)jt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;jt[254]=jt[254]=1;var Ut=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,i,r,o,s=t.length,a=0;for(r=0;r<s;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),o=0,r=0;o<a;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},Ht=(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,r;const o=new Array(2*n);for(r=0,i=0;i<n;){let e=t[i++];if(e<128){o[r++]=e;continue}let s=jt[e];if(s>4)o[r++]=65533,i+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&i<n;)e=e<<6|63&t[i++],s--;s>1?o[r++]=65533:e<65536?o[r++]=e:(e-=65536,o[r++]=55296|e>>10&1023,o[r++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n})(o,r)},Wt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+jt[t[n]]>e?n:e},Gt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Vt=Object.prototype.toString,{Z_NO_FLUSH:Kt,Z_SYNC_FLUSH:Jt,Z_FULL_FLUSH:Xt,Z_FINISH:qt,Z_OK:Yt,Z_STREAM_END:$t,Z_DEFAULT_COMPRESSION:Qt,Z_DEFAULT_STRATEGY:te,Z_DEFLATED:ee}=D;function ne(t){this.options=Dt({level:Qt,method:ee,chunkSize:16384,windowBits:15,memLevel:8,strategy:te},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gt,this.strm.avail_out=0;let n=Mt(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Yt)throw new Error(R[n]);if(e.header&&Ct(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Ut(e.dictionary):"[object ArrayBuffer]"===Vt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Bt(this.strm,t),n!==Yt)throw new Error(R[n]);this._dict_set=!0}}function ie(t,e){const n=new ne(e);if(n.push(t,!0),n.err)throw n.msg||R[n.err];return n.result}ne.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?qt:Kt,"string"==typeof t?n.input=Ut(t):"[object ArrayBuffer]"===Vt.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(o===Jt||o===Xt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Nt(n,o),r===$t)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Ot(this.strm),this.onEnd(r),this.ended=!0,r===Yt;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ne.prototype.onData=function(t){this.chunks.push(t)},ne.prototype.onEnd=function(t){t===Yt&&(this.result=Ft(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var re={Deflate:ne,deflate:ie,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ie(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ie(t,e)},constants:D},oe=function(t,e){let n,i,r,o,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,k,E,S;const T=t.state;n=t.next_in,E=t.input,i=n+(t.avail_in-5),r=t.next_out,S=t.output,o=r-(e-t.avail_out),s=r+(t.avail_out-257),a=T.dmax,l=T.wsize,u=T.whave,h=T.wnext,c=T.window,d=T.hold,f=T.bits,p=T.lencode,_=T.distcode,v=(1<<T.lenbits)-1,m=(1<<T.distbits)-1;t:do{f<15&&(d+=E[n++]<<f,f+=8,d+=E[n++]<<f,f+=8),g=p[d&v];e:for(;;){if(y=g>>>24,d>>>=y,f-=y,y=g>>>16&255,0===y)S[r++]=65535&g;else{if(!(16&y)){if(0==(64&y)){g=p[(65535&g)+(d&(1<<y)-1)];continue e}if(32&y){T.mode=12;break t}t.msg="invalid literal/length code",T.mode=30;break t}b=65535&g,y&=15,y&&(f<y&&(d+=E[n++]<<f,f+=8),b+=d&(1<<y)-1,d>>>=y,f-=y),f<15&&(d+=E[n++]<<f,f+=8,d+=E[n++]<<f,f+=8),g=_[d&m];n:for(;;){if(y=g>>>24,d>>>=y,f-=y,y=g>>>16&255,!(16&y)){if(0==(64&y)){g=_[(65535&g)+(d&(1<<y)-1)];continue n}t.msg="invalid distance code",T.mode=30;break t}if(w=65535&g,y&=15,f<y&&(d+=E[n++]<<f,f+=8,f<y&&(d+=E[n++]<<f,f+=8)),w+=d&(1<<y)-1,w>a){t.msg="invalid distance too far back",T.mode=30;break t}if(d>>>=y,f-=y,y=r-o,w>y){if(y=w-y,y>u&&T.sane){t.msg="invalid distance too far back",T.mode=30;break t}if(x=0,k=c,0===h){if(x+=l-y,y<b){b-=y;do{S[r++]=c[x++]}while(--y);x=r-w,k=S}}else if(h<y){if(x+=l+h-y,y-=h,y<b){b-=y;do{S[r++]=c[x++]}while(--y);if(x=0,h<b){y=h,b-=y;do{S[r++]=c[x++]}while(--y);x=r-w,k=S}}}else if(x+=h-y,y<b){b-=y;do{S[r++]=c[x++]}while(--y);x=r-w,k=S}for(;b>2;)S[r++]=k[x++],S[r++]=k[x++],S[r++]=k[x++],b-=3;b&&(S[r++]=k[x++],b>1&&(S[r++]=k[x++]))}else{x=r-w;do{S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],b-=3}while(b>2);b&&(S[r++]=S[x++],b>1&&(S[r++]=S[x++]))}break}}break}}while(n<i&&r<s);b=f>>3,n-=b,f-=b<<3,d&=(1<<f)-1,t.next_in=n,t.next_out=r,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=r<s?s-r+257:257-(r-s),T.hold=d,T.bits=f};const se=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ae=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),le=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ue=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var he=(t,e,n,i,r,o,s,a)=>{const l=a.bits;let u,h,c,d,f,p,_=0,v=0,m=0,g=0,y=0,b=0,w=0,x=0,k=0,E=0,S=null,T=0;const A=new Uint16Array(16),P=new Uint16Array(16);let I,L,z,M=null,C=0;for(_=0;_<=15;_++)A[_]=0;for(v=0;v<i;v++)A[e[n+v]]++;for(y=l,g=15;g>=1&&0===A[g];g--);if(y>g&&(y=g),0===g)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(m=1;m<g&&0===A[m];m++);for(y<m&&(y=m),x=1,_=1;_<=15;_++)if(x<<=1,x-=A[_],x<0)return-1;if(x>0&&(0===t||1!==g))return-1;for(P[1]=0,_=1;_<15;_++)P[_+1]=P[_]+A[_];for(v=0;v<i;v++)0!==e[n+v]&&(s[P[e[n+v]]++]=v);if(0===t?(S=M=s,p=19):1===t?(S=se,T-=257,M=ae,C-=257,p=256):(S=le,M=ue,p=-1),E=0,v=0,_=m,f=o,b=y,w=0,c=-1,k=1<<y,d=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){I=_-w,s[v]<p?(L=0,z=s[v]):s[v]>p?(L=M[C+s[v]],z=S[T+s[v]]):(L=96,z=0),u=1<<_-w,h=1<<b,m=h;do{h-=u,r[f+(E>>w)+h]=I<<24|L<<16|z|0}while(0!==h);for(u=1<<_-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,v++,0==--A[_]){if(_===g)break;_=e[n+s[v]]}if(_>y&&(E&d)!==c){for(0===w&&(w=y),f+=m,b=_-w,x=1<<b;b+w<g&&(x-=A[b+w],!(x<=0));)b++,x<<=1;if(k+=1<<b,1===t&&k>852||2===t&&k>592)return 1;c=E&d,r[c]=y<<24|b<<16|f-o|0}}return 0!==E&&(r[f+E]=_-w<<24|64<<16|0),a.bits=y,0};const{Z_FINISH:ce,Z_BLOCK:de,Z_TREES:fe,Z_OK:pe,Z_STREAM_END:_e,Z_NEED_DICT:ve,Z_STREAM_ERROR:me,Z_DATA_ERROR:ge,Z_MEM_ERROR:ye,Z_BUF_ERROR:be,Z_DEFLATED:we}=D,xe=12,ke=30,Ee=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Se(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Te=t=>{if(!t||!t.state)return me;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,pe},Ae=t=>{if(!t||!t.state)return me;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Te(t)},Pe=(t,e)=>{let n;if(!t||!t.state)return me;const i=t.state;return e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?me:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,Ae(t))},Ie=(t,e)=>{if(!t)return me;const n=new Se;t.state=n,n.window=null;const i=Pe(t,e);return i!==pe&&(t.state=null),i};let Le,ze,Me=!0;const Ce=t=>{if(Me){Le=new Int32Array(512),ze=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(he(1,t.lens,0,288,Le,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;he(2,t.lens,0,32,ze,0,t.work,{bits:5}),Me=!1}t.lencode=Le,t.lenbits=9,t.distcode=ze,t.distbits=5},Ne=(t,e,n,i)=>{let r;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(e.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(e.subarray(n-i,n-i+r),o.wnext),(i-=r)?(o.window.set(e.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var Oe=Ae,Be=Ie,Re=(t,e)=>{let n,i,r,o,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,k,E=0;const S=new Uint8Array(4);let T,A;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return me;n=t.state,n.mode===xe&&(n.mode=13),s=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,u=n.hold,h=n.bits,c=a,d=l,k=pe;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(2&n.wrap&&35615===u){n.check=0,S[0]=255&u,S[1]=u>>>8&255,n.check=B(n.check,S,2,0),u=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=ke;break}if((15&u)!==we){t.msg="unknown compression method",n.mode=ke;break}if(u>>>=4,h-=4,x=8+(15&u),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=ke;break}n.dmax=1<<n.wbits,t.adler=n.check=1,n.mode=512&u?10:xe,u=0,h=0;break;case 2:for(;h<16;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(n.flags=u,(255&n.flags)!==we){t.msg="unknown compression method",n.mode=ke;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=ke;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=B(n.check,S,2,0)),u=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}n.head&&(n.head.time=u),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,n.check=B(n.check,S,4,0)),u=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=B(n.check,S,2,0)),u=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=B(n.check,S,2,0)),u=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(o,o+f),x)),512&n.flags&&(n.check=B(n.check,i,f,o)),a-=f,o+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break t;f=0;do{x=i[o+f++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&f<a);if(512&n.flags&&(n.check=B(n.check,i,f,o)),a-=f,o+=f,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break t;f=0;do{x=i[o+f++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&f<a);if(512&n.flags&&(n.check=B(n.check,i,f,o)),a-=f,o+=f,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=ke;break}u=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=xe;break;case 10:for(;h<32;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}t.adler=n.check=Ee(u),u=0,h=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=u,n.bits=h,ve;t.adler=n.check=1,n.mode=xe;case xe:if(e===de||e===fe)break t;case 13:if(n.last){u>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}switch(n.last=1&u,u>>>=1,h-=1,3&u){case 0:n.mode=14;break;case 1:if(Ce(n),n.mode=20,e===fe){u>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=ke}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=ke;break}if(n.length=65535&u,u=0,h=0,n.mode=15,e===fe)break t;case 15:n.mode=16;case 16:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),0===f)break t;r.set(i.subarray(o,o+f),s),a-=f,o+=f,l-=f,s+=f,n.length-=f;break}n.mode=xe;break;case 17:for(;h<14;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(n.nlen=257+(31&u),u>>>=5,h-=5,n.ndist=1+(31&u),u>>>=5,h-=5,n.ncode=4+(15&u),u>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=ke;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}n.lens[P[n.have++]]=7&u,u>>>=3,h-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},k=he(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,k){t.msg="invalid code lengths set",n.mode=ke;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[u&(1<<n.lenbits)-1],v=E>>>24,m=E>>>16&255,g=65535&E,!(v<=h);){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(g<16)u>>>=v,h-=v,n.lens[n.have++]=g;else{if(16===g){for(A=v+2;h<A;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(u>>>=v,h-=v,0===n.have){t.msg="invalid bit length repeat",n.mode=ke;break}x=n.lens[n.have-1],f=3+(3&u),u>>>=2,h-=2}else if(17===g){for(A=v+3;h<A;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}u>>>=v,h-=v,x=0,f=3+(7&u),u>>>=3,h-=3}else{for(A=v+7;h<A;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}u>>>=v,h-=v,x=0,f=11+(127&u),u>>>=7,h-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=ke;break}for(;f--;)n.lens[n.have++]=x}}if(n.mode===ke)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=ke;break}if(n.lenbits=9,T={bits:n.lenbits},k=he(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,k){t.msg="invalid literal/lengths set",n.mode=ke;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},k=he(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,k){t.msg="invalid distances set",n.mode=ke;break}if(n.mode=20,e===fe)break t;case 20:n.mode=21;case 21:if(a>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=u,n.bits=h,oe(t,d),s=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,u=n.hold,h=n.bits,n.mode===xe&&(n.back=-1);break}for(n.back=0;E=n.lencode[u&(1<<n.lenbits)-1],v=E>>>24,m=E>>>16&255,g=65535&E,!(v<=h);){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(m&&0==(240&m)){for(y=v,b=m,w=g;E=n.lencode[w+((u&(1<<y+b)-1)>>y)],v=E>>>24,m=E>>>16&255,g=65535&E,!(y+v<=h);){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}u>>>=y,h-=y,n.back+=y}if(u>>>=v,h-=v,n.back+=v,n.length=g,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=xe;break}if(64&m){t.msg="invalid literal/length code",n.mode=ke;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(A=n.extra;h<A;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=n.distcode[u&(1<<n.distbits)-1],v=E>>>24,m=E>>>16&255,g=65535&E,!(v<=h);){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(0==(240&m)){for(y=v,b=m,w=g;E=n.distcode[w+((u&(1<<y+b)-1)>>y)],v=E>>>24,m=E>>>16&255,g=65535&E,!(y+v<=h);){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}u>>>=y,h-=y,n.back+=y}if(u>>>=v,h-=v,n.back+=v,64&m){t.msg="invalid distance code",n.mode=ke;break}n.offset=g,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(A=n.extra;h<A;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=ke;break}n.mode=25;case 25:if(0===l)break t;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=ke;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=r,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{r[s++]=_[p++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;r[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===a)break t;a--,u|=i[o++]<<h,h+=8}if(d-=l,t.total_out+=d,n.total+=d,d&&(t.adler=n.check=n.flags?B(n.check,r,d,s-d):N(n.check,r,d,s-d)),d=l,(n.flags?u:Ee(u))!==n.check){t.msg="incorrect data check",n.mode=ke;break}u=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===a)break t;a--,u+=i[o++]<<h,h+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=ke;break}u=0,h=0}n.mode=29;case 29:k=_e;break t;case ke:k=ge;break t;case 31:return ye;default:return me}return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=u,n.bits=h,(n.wsize||d!==t.avail_out&&n.mode<ke&&(n.mode<27||e!==ce))&&Ne(t,t.output,t.next_out,d-t.avail_out),c-=t.avail_in,d-=t.avail_out,t.total_in+=c,t.total_out+=d,n.total+=d,n.wrap&&d&&(t.adler=n.check=n.flags?B(n.check,r,d,t.next_out-d):N(n.check,r,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===xe?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===d||e===ce)&&k===pe&&(k=be),k},De=t=>{if(!t||!t.state)return me;let e=t.state;return e.window&&(e.window=null),t.state=null,pe},Fe=(t,e)=>{if(!t||!t.state)return me;const n=t.state;return 0==(2&n.wrap)?me:(n.head=e,e.done=!1,pe)},Ze=(t,e)=>{const n=e.length;let i,r,o;return t&&t.state?(i=t.state,0!==i.wrap&&11!==i.mode?me:11===i.mode&&(r=1,r=N(r,e,n,0),r!==i.check)?ge:(o=Ne(t,e,n,n),o?(i.mode=31,ye):(i.havedict=1,pe))):me},je=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ue=Object.prototype.toString,{Z_NO_FLUSH:He,Z_FINISH:We,Z_OK:Ge,Z_STREAM_END:Ve,Z_NEED_DICT:Ke,Z_STREAM_ERROR:Je,Z_DATA_ERROR:Xe,Z_MEM_ERROR:qe}=D;function Ye(t){this.options=Dt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gt,this.strm.avail_out=0;let n=Be(this.strm,e.windowBits);if(n!==Ge)throw new Error(R[n]);if(this.header=new je,Fe(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Ut(e.dictionary):"[object ArrayBuffer]"===Ue.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Ze(this.strm,e.dictionary),n!==Ge)))throw new Error(R[n])}function $e(t,e){const n=new Ye(e);if(n.push(t),n.err)throw n.msg||R[n.err];return n.result}Ye.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=e===~~e?e:!0===e?We:He,"[object ArrayBuffer]"===Ue.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),o=Re(n,s),o===Ke&&r&&(o=Ze(n,r),o===Ge?o=Re(n,s):o===Xe&&(o=Ke));n.avail_in>0&&o===Ve&&n.state.wrap>0&&0!==t[n.next_in];)Oe(n),o=Re(n,s);switch(o){case Je:case Xe:case Ke:case qe:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===Ve))if("string"===this.options.to){let t=Wt(n.output,n.next_out),e=n.next_out-t,r=Ht(n.output,t);n.next_out=e,n.avail_out=i-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==Ge||0!==a){if(o===Ve)return o=De(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Ye.prototype.onData=function(t){this.chunks.push(t)},Ye.prototype.onEnd=function(t){t===Ge&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ft(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Qe={Inflate:Ye,inflate:$e,inflateRaw:function(t,e){return(e=e||{}).raw=!0,$e(t,e)},ungzip:$e,constants:D};const{Deflate:tn,deflate:en,deflateRaw:nn,gzip:rn}=re,{Inflate:on,inflate:sn,inflateRaw:an,ungzip:ln}=Qe;var un=n(568),hn=n.n(un),cn="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;var dn,fn,pn=Math.PI/180;function _n(t){return t*pn}function vn(){var t=new cn(3);return cn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function mn(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/s,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}function gn(){var t=new cn(16);return cn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function yn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bn(t,e,n){var i,r,o,s,a,l,u,h,c,d,f,p,_=n[0],v=n[1],m=n[2];return e===t?(t[12]=e[0]*_+e[4]*v+e[8]*m+e[12],t[13]=e[1]*_+e[5]*v+e[9]*m+e[13],t[14]=e[2]*_+e[6]*v+e[10]*m+e[14],t[15]=e[3]*_+e[7]*v+e[11]*m+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=e[9],f=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=u,t[7]=h,t[8]=c,t[9]=d,t[10]=f,t[11]=p,t[12]=i*_+a*v+c*m+e[12],t[13]=r*_+l*v+d*m+e[13],t[14]=o*_+u*v+f*m+e[14],t[15]=s*_+h*v+p*m+e[15]),t}function wn(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function xn(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],h=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*i,t[5]=s*r+h*i,t[6]=a*r+c*i,t[7]=l*r+d*i,t[8]=u*r-o*i,t[9]=h*r-s*i,t[10]=c*r-a*i,t[11]=d*r-l*i,t}function kn(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],u=e[8],h=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-u*i,t[1]=s*r-h*i,t[2]=a*r-c*i,t[3]=l*r-d*i,t[8]=o*i+u*r,t[9]=s*i+h*r,t[10]=a*i+c*r,t[11]=l*i+d*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),vn(),(fn=dn||(dn={})).UP="up",fn.DOWN="down",fn.NORTH="north",fn.EAST="east",fn.SOUTH="south",fn.WEST="west";const En={[dn.UP]:[0,1,0],[dn.DOWN]:[0,-1,0],[dn.NORTH]:[0,0,-1],[dn.EAST]:[1,0,0],[dn.SOUTH]:[0,0,1],[dn.WEST]:[-1,0,0]};var Sn,Tn,An,Pn,In;function Ln(t,e,n){if(!t[e])throw new Error(`Missing ${e} tag`);if(t[e].type!==n)throw new Error(`Expected ${e} to be of type ${n}, but found ${t[e].type}`);return t[e].value}!function(t){t.ALL=[t.UP,t.DOWN,t.NORTH,t.EAST,t.SOUTH,t.WEST],t.normal=function(t){return En[t]}}(dn||(dn={})),function(t){t.create=function(t,e,n){return[t,e,n]},t.offset=function(t,e,n,i){return[t[0]+e,t[1]+n,t[2]+i]},t.towards=function(e,n){return t.offset(e,...dn.normal(n))}}(Sn||(Sn={})),function(t){function e(t){return"object"==typeof t&&null!==t?t:void 0}t.readNumber=function(t){return"number"==typeof t?t:void 0},t.readInt=function(t){return"number"==typeof t?Math.floor(t):void 0},t.readString=function(t){return"string"==typeof t?t:void 0},t.readBoolean=function(t){return"boolean"==typeof t?t:void 0},t.readObject=e,t.readArray=function(t,e){if(Array.isArray(t))return t.map((t=>e(t)))},t.readMap=function(t,n){var i;const r=null!==(i=e(t))&&void 0!==i?i:{};return Object.fromEntries(Object.entries(r).map((([t,e])=>[t,n(e)])))},t.compose=function(t,e,n){const i=e(t);return i?n(i):void 0}}(Tn||(Tn={}));class zn{constructor(t,e={}){this.name=t,this.properties=e}getName(){return this.name}getProperties(){return this.properties}getProperty(t){return this.properties[t]}isFluid(){return"minecraft:water"===this.name||"minecraft:lava"===this.name}equals(t){return this.name===t.name&&Object.keys(this.properties).every((e=>t.properties[e]===this.properties[e]))}toString(){return 0===Object.keys(this.properties).length?this.name:`${this.name}[${Object.entries(this.properties).map((([t,e])=>t+"="+e)).join(",")}]`}static fromNbt(t){const e=Ln(t.value,"Name","string"),n=function(t,e){try{return t()}catch(t){return e}}((()=>Ln(t.value,"Properties","compound")),{}),i=Object.keys(n).reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:Ln(n,e,"string")})),{});return new zn(e,i)}static fromJson(t){var e,n;const i=null!==(e=Tn.readObject(t))&&void 0!==e?e:{},r=null!==(n=Tn.readString(i.Name))&&void 0!==n?n:"minecraft:stone",o=Tn.readMap(i.Properties,(t=>{var e;return null!==(e=Tn.readString(t))&&void 0!==e?e:""}));return new zn(r,o)}}zn.AIR=new zn("minecraft:air");class Mn{constructor(t){this.minY=t,this.storage=Array(Mn.SIZE),this.palette=[zn.AIR]}get minBlockY(){return this.minY<<4}index(t,e,n){return(t<<8)+(e<<4)+n}getBlockState(t,e,n){var i;const r=this.storage[this.index(t,e,n)];return null!==(i=this.palette[r])&&void 0!==i?i:zn.AIR}setBlockState(t,e,n,i){let r=this.palette.findIndex((t=>t.equals(i)));-1===r&&(r=this.palette.length,this.palette.push(i)),this.storage[this.index(t,e,n)]=r}}function Cn(t){return t*t}function Nn(t,e,n){return Math.max(e,Math.min(n,t))}function On(t,e,n){return e+t*(n-e)}function Bn(t,e,n,i,r,o){return On(e,On(t,n,i),On(t,r,o))}function Rn(t){return t*t*t*(t*(6*t-15)+10)}function Dn(t,e,n){let i=e-t;for(;i>0;){const e=Math.floor(i/2),r=t+e;n(r)?i=e:(t=r+1,i-=e+1)}return t}Mn.WIDTH=16,Mn.SIZE=Mn.WIDTH*Mn.WIDTH*Mn.WIDTH,function(t){t.create=function(t,e){return[t,e]},t.fromBlockPos=function(t){return[t[0]>>4,t[2]>>4]},t.fromLong=function(t){return[4294967295&Number(t),Number(t>>BigInt(32))]},t.minBlockX=function(t){return t[0]<<4},t.minBlockZ=function(t){return t[1]<<4},t.maxBlockX=function(t){return t[0]<<19},t.maxBlockZ=function(t){return t[1]<<19}}(An||(An={}));class Fn{constructor(t){this.seed=BigInt(0),this.setSeed(t)}fork(){return new Fn(this.nextLong())}setSeed(t){this.seed=t^Fn.MULTIPLIER&Fn.MODULUS_MASK}advance(){this.seed=this.seed*Fn.MULTIPLIER+Fn.INCREMENT&Fn.MODULUS_MASK}consume(t){for(let e=0;e<t;e+=1)this.advance()}next(t){this.advance();const e=Number(this.seed>>BigInt(Fn.MODULUS_BITS-t));return e>2147483647?e-4294967296:e}nextInt(t){if(void 0===t)return this.next(32);if(0==(t&t-1))return Number(BigInt(t)*BigInt(this.next(31))>>BigInt(31));let e,n;for(;(e=this.next(31))-(n=e%t)+(t-1)<0;);return n}nextLong(){return(BigInt(this.next(32))<<BigInt(32))+BigInt(this.next(32))}nextFloat(){return this.next(24)*Fn.FLOAT_MULTIPLIER}nextDouble(){const t=this.next(30);return this.advance(),t*Fn.DOUBLE_MULTIPLIER}}Fn.MODULUS_BITS=48,Fn.MODULUS_MASK=BigInt("281474976710655"),Fn.MULTIPLIER=BigInt("25214903917"),Fn.INCREMENT=BigInt("11"),Fn.FLOAT_MULTIPLIER=1/Math.pow(2,24),Fn.DOUBLE_MULTIPLIER=1/Math.pow(2,30);class Zn{constructor(t){this.seed=[BigInt(0),BigInt(0)],this.seed=t}static create(t){return new Zn(Zn.upgradeSeedTo128bit(t))}static mixStafford13(t){return((t=((t=(t^t>>BigInt(30))*BigInt("-4658895280553007687")&BigInt("0xFFFFFFFFFFFFFFFF"))^t>>BigInt(27))*BigInt("-7723592293110705685")&BigInt("0xFFFFFFFFFFFFFFFF"))^t>>BigInt(31))&BigInt("0xFFFFFFFFFFFFFFFF")}static upgradeSeedTo128bit(t){t<0&&(t+=BigInt("0x10000000000000000"));const e=t^Zn.SILVER_RATIO_64,n=e+Zn.GOLDEN_RATIO_64&BigInt("0xFFFFFFFFFFFFFFFF");return[Zn.mixStafford13(e),Zn.mixStafford13(n)]}static rotateLeft(t,e){return t<<e&BigInt("0xFFFFFFFFFFFFFFFF")|t>>BigInt(64)-e}setSeed(t){this.seed=Zn.upgradeSeedTo128bit(t)}fork(){return new Zn([this.next(),this.next()])}static getSeed(t,e,n){let i=t*BigInt(3129871)^n*BigInt(116129781)^e;return i=i*i*BigInt(42317861)+i*BigInt(11),i>>BigInt(16)}forkAt(t,e,n){const i=Zn.getSeed(t,e,n)^this.seed[0];return new Zn([i,this.seed[1]])}static LongfromBytes(t,e,n,i,r,o,s,a){return BigInt(t)<<BigInt(56)|BigInt(e)<<BigInt(48)|BigInt(n)<<BigInt(40)|BigInt(i)<<BigInt(32)|BigInt(r)<<BigInt(24)|BigInt(o)<<BigInt(16)|BigInt(s)<<BigInt(8)|BigInt(a)}forkWithHashOf(t){const e=hn()(t,{asBytes:!0}),n=Zn.LongfromBytes(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),i=Zn.LongfromBytes(e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);return new Zn([n^this.seed[0],i^this.seed[1]])}next(){const t=this.seed[0];let e=this.seed[1];const n=Zn.rotateLeft(t+e&BigInt("0xFFFFFFFFFFFFFFFF"),BigInt(17))+t&BigInt("0xFFFFFFFFFFFFFFFF");return e^=t,this.seed=[Zn.rotateLeft(t,BigInt(49))^e^e<<BigInt(21)&BigInt("0xFFFFFFFFFFFFFFFF"),Zn.rotateLeft(e,BigInt(28))],n}nextLong(){let t=this.next();return t>BigInt("0x8000000000000000")&&(t-=BigInt("0x10000000000000000")),t}consume(t){let e=this.seed[0],n=this.seed[1];for(let i=0;i<t;i+=1)n^=e,e=Zn.rotateLeft(e,BigInt(49))^n^n<<BigInt(21),n=Zn.rotateLeft(n,BigInt(28));this.seed=[e,n]}nextBits(t){return this.next()>>BigInt(64-t)}nextInt(t){var e=this.next()&BigInt(4294967295);if(t){const s=BigInt(t);var n=e*s,i=n&BigInt(4294967295);if(i<s)for(var r=((~s&BigInt(4294967295))+BigInt(1))%s;i<r;)i=(n=(e=this.next()&BigInt(4294967295))*s)&BigInt(4294967295);var o=n>>BigInt(32);return Number(o)}var s=Number(e);return s>=2147483648&&(s-=4294967296),s}nextFloat(){return Number(this.nextBits(24))*Zn.FLOAT_MULTIPLIER}nextDouble(){return Number(this.nextBits(53))*Zn.DOUBLE_MULTIPLIER}parityConfigString(){return"seedLo: "+this.seed[0]+", seedHi: "+this.seed[1]}}Zn.SILVER_RATIO_64=BigInt("7640891576956012809"),Zn.GOLDEN_RATIO_64=BigInt("-7046029254386353131"),Zn.FLOAT_MULTIPLIER=1/Math.pow(2,24),Zn.DOUBLE_MULTIPLIER=11102230246251565e-32;class jn{constructor(t){this.xo=256*t.nextDouble(),this.yo=256*t.nextDouble(),this.zo=256*t.nextDouble(),this.p=Array(256);for(let t=0;t<256;t+=1)this.p[t]=t;for(let e=0;e<256;e+=1){const n=t.nextInt(256-e),i=this.p[e];this.p[e]=this.p[e+n],this.p[e+n]=i}}sample2D(t,e){let n,i,r;const o=(t+e)*jn.F2,s=Math.floor(t+o),a=t-(s-(n=(s+(i=Math.floor(e+o)))*jn.G2));let l,u;a>(r=e-(i-n))?(l=1,u=0):(l=0,u=1);const h=a-l+jn.G2,c=r-u+jn.G2,d=a-1+2*jn.G2,f=r-1+2*jn.G2,p=255&s,_=255&i,v=this.P(p+this.P(_))%12,m=this.P(p+l+this.P(_+u))%12,g=this.P(p+1+this.P(_+1))%12;return 70*(this.getCornerNoise3D(v,a,r,0,.5)+this.getCornerNoise3D(m,h,c,0,.5)+this.getCornerNoise3D(g,d,f,0,.5))}sample(t,e,n){const i=.3333333333333333*(t+e+n),r=Math.floor(t+i),o=Math.floor(e+i),s=Math.floor(n+i),a=.16666666666666666*(r+o+s),l=t-(r-a),u=e-(o-a),h=n-(s-a);let c,d,f,p,_,v;l>=u?u>=h?(c=1,d=0,f=0,p=1,_=1,v=0):l>=h?(c=1,d=0,f=0,p=1,_=0,v=1):(c=0,d=0,f=1,p=1,_=0,v=1):u<h?(c=0,d=0,f=1,p=0,_=1,v=1):l<h?(c=0,d=1,f=0,p=0,_=1,v=1):(c=0,d=1,f=0,p=1,_=1,v=0);const m=l-c+.16666666666666666,g=u-d+.16666666666666666,y=h-f+.16666666666666666,b=l-p+.3333333333333333,w=u-_+.3333333333333333,x=h-v+.3333333333333333,k=l-.5,E=u-.5,S=h-.5,T=255&r,A=255&o,P=255&s,I=this.P(T+this.P(A+this.P(P)))%12,L=this.P(T+c+this.P(A+d+this.P(P+f)))%12,z=this.P(T+p+this.P(A+_+this.P(P+v)))%12,M=this.P(T+1+this.P(A+1+this.P(P+1)))%12;return 32*(this.getCornerNoise3D(I,l,u,h,.6)+this.getCornerNoise3D(L,m,g,y,.6)+this.getCornerNoise3D(z,b,w,x,.6)+this.getCornerNoise3D(M,k,E,S,.6))}P(t){return this.p[255&t]}getCornerNoise3D(t,e,n,i,r){let o,s=r-e*e-n*n-i*i;return s<0?o=0:(s*=s,o=s*s*jn.gradDot(t,e,n,i)),o}static gradDot(t,e,n,i){const r=jn.GRADIENT[15&t];return r[0]*e+r[1]*n+r[2]*i}}jn.GRADIENT=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1],[1,1,0],[0,-1,1],[-1,1,0],[0,-1,-1]],jn.F2=.5*(Math.sqrt(3)-1),jn.G2=(3-Math.sqrt(3))/6;class Un{constructor(t){this.xo=256*t.nextDouble(),this.yo=256*t.nextDouble(),this.zo=256*t.nextDouble(),this.p=Array(256);for(let t=0;t<256;t+=1)this.p[t]=t>127?t-256:t;for(let e=0;e<256;e+=1){const n=t.nextInt(256-e),i=this.p[e];this.p[e]=this.p[e+n],this.p[e+n]=i}}sample(t,e,n,i=0,r=0){const o=t+this.xo,s=e+this.yo,a=n+this.zo,l=Math.floor(o),u=Math.floor(s),h=Math.floor(a),c=o-l,d=s-u,f=a-h;let p=0;if(0!==i){const t=r>=0&&r<d?r:d;p=Math.floor(t/i+1e-7)*i}return this.sampleAndLerp(l,u,h,c,d-p,f,d)}sampleAndLerp(t,e,n,i,r,o,s){const a=this.P(t),l=this.P(t+1),u=this.P(a+e),h=this.P(a+e+1),c=this.P(l+e),d=this.P(l+e+1),f=jn.gradDot(this.P(u+n),i,r,o),p=jn.gradDot(this.P(c+n),i-1,r,o),_=jn.gradDot(this.P(h+n),i,r-1,o),v=jn.gradDot(this.P(d+n),i-1,r-1,o),m=jn.gradDot(this.P(u+n+1),i,r,o-1),g=jn.gradDot(this.P(c+n+1),i-1,r,o-1),y=jn.gradDot(this.P(h+n+1),i,r-1,o-1),b=jn.gradDot(this.P(d+n+1),i-1,r-1,o-1);return function(t,e,n,i,r,o,s,a,l,u,h){return On(n,Bn(t,e,i,r,o,s),Bn(t,e,a,l,u,h))}(Rn(i),Rn(s),Rn(o),f,p,_,v,m,g,y,b)}P(t){return 255&this.p[255&t]}}class Hn{constructor(t,e,n){if(t instanceof Zn){const i=t.fork();this.noiseLevels=Array(n.length);for(let t=0;t<n.length;t++)if(0!==n[t]){const n=e+t;this.noiseLevels[t]=new Un(i.forkWithHashOf("octave_"+n))}}else{if(1-e<n.length)throw new Error("Positive octaves are not allowed when using LegacyRandom");this.noiseLevels=Array(n.length);for(let i=-e;i>=0;i-=1)i<n.length&&0!==n[i]?this.noiseLevels[i]=new Un(t):t.consume(262)}this.amplitudes=n,this.lowestFreqInputFactor=Math.pow(2,e),this.lowestFreqValueFactor=Math.pow(2,n.length-1)/(Math.pow(2,n.length)-1)}sample(t,e,n,i=0,r=0,o=!1){let s=0,a=this.lowestFreqInputFactor,l=this.lowestFreqValueFactor;for(let u=0;u<this.noiseLevels.length;u+=1){const h=this.noiseLevels[u];h&&(s+=this.amplitudes[u]*l*h.sample(Hn.wrap(t*a),o?-h.yo:Hn.wrap(e*a),Hn.wrap(n*a),i*a,r*a)),a*=2,l/=2}return s}getOctaveNoise(t){return this.noiseLevels[this.noiseLevels.length-1-t]}static wrap(t){return t-33554432*Math.floor(t/33554432+.5)}}!function(t){t.fromJson=function(t){var e,n,i,r,o;const s=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return{xzScale:null!==(n=Tn.readNumber(s.xz_scale))&&void 0!==n?n:1,yScale:null!==(i=Tn.readNumber(s.y_scale))&&void 0!==i?i:1,xzFactor:null!==(r=Tn.readNumber(s.xz_factor))&&void 0!==r?r:80,yFactor:null!==(o=Tn.readNumber(s.y_factor))&&void 0!==o?o:80}}}(Pn||(Pn={}));class Wn{constructor(t,{firstOctave:e,amplitudes:n}){this.first=new Hn(t,e,n),this.second=new Hn(t,e,n);let i=1/0,r=-1/0;for(let t=0;t<n.length;t+=1)0!==n[t]&&(i=Math.min(i,t),r=Math.max(r,t));const o=.1*(1+1/(r-i+1));this.valueFactor=1/6/o}sample(t,e,n){const i=t*Wn.INPUT_FACTOR,r=e*Wn.INPUT_FACTOR,o=n*Wn.INPUT_FACTOR;return(this.first.sample(t,e,n)+this.second.sample(i,r,o))*this.valueFactor}}Wn.INPUT_FACTOR=1.0181268882175227,function(t){t.fromJson=function(t){var e,n,i;const r=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return{firstOctave:null!==(n=Tn.readInt(r.firstOctave))&&void 0!==n?n:0,amplitudes:null!==(i=Tn.readArray(r.amplitudes,(t=>{var e;return null!==(e=Tn.readNumber(t))&&void 0!==e?e:0})))&&void 0!==i?i:[]}}}(In||(In={}));class Gn{constructor(t,e,n=[],i=[],r=[]){this.name=t,this.coordinate=e,this.locations=n,this.values=i,this.derivatives=r}apply(t){const e=this.coordinate(t),n=Dn(0,this.locations.length,(t=>e<this.locations[t]))-1,i=this.locations.length-1;if(n<0)return this.values[0](t)+this.derivatives[0]*(e-this.locations[0]);if(n===i)return this.values[i](t)+this.derivatives[i]*(e-this.locations[i]);const r=this.locations[n],o=this.locations[n+1],s=this.derivatives[n],a=this.derivatives[n+1],l=(e-r)/(o-r),u=this.values[n](t),h=this.values[n+1](t),c=s*(o-r)-(h-u),d=-a*(o-r)+(h-u);return On(l,u,h)+l*(1-l)*On(l,c,d)}addPoint(t,e,n=0){return this.locations.push(t),this.values.push("number"==typeof e?()=>e:e.apply.bind(e)),this.derivatives.push(n),this}}const Vn=t=>[(t>>16&255)/256,(t>>8&255)/256,(255&t)/256],Kn=[124/256,189/256,107/256],Jn=Vn(6396257),Xn=Vn(8431445),qn=Vn(4764952),Yn=Vn(4159204),$n=Vn(8431445),Qn=Vn(2129968),ti=t=>[t/8,1-t/32,64*t],ei={large_fern:()=>Kn,tall_grass:()=>Kn,grass_block:()=>Kn,fern:()=>Kn,grass:()=>Kn,potted_fern:()=>Kn,spruce_leaves:()=>Jn,birch_leaves:()=>Xn,oak_leaves:()=>qn,jungle_leaves:()=>qn,acacia_leaves:()=>qn,dark_oak_leaves:()=>qn,vine:()=>qn,water:()=>Yn,bubble_column:()=>Yn,cauldron:()=>Yn,redstone_wire:t=>{var e;return(t=>{const e=t/15;return[.6*e+(e>0?.4:.3),Nn(e*e*.7-.5,0,1),Nn(e*e*.6-.7,0,1)]})(parseInt(null!==(e=t.power)&&void 0!==e?e:"0"))},sugar_cane:()=>Kn,attached_melon_stem:()=>$n,attached_pumpkin_stem:()=>$n,melon_stem:t=>{var e;return ti(parseInt(null!==(e=t.age)&&void 0!==e?e:"0"))},pumpkin_stem:t=>{var e;return ti(parseInt(null!==(e=t.age)&&void 0!==e?e:"0"))},lily_pad:()=>Qn};var ni;function ii(...t){let e=0;for(const n of t)e+=n.length;const n=new Float32Array(e);let i=0;for(const e of t)n.set(e,i),i+=e.length;return n}function ri(t,e){const n=vn();for(let i=0;i<t.length;i+=3)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],mn(n,n,e),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2]}!function(t){t.rotate=function(t,e,n){let{up:i,down:r,north:o,east:s,south:a,west:l}=t;switch(n){case 90:[o,s,a,l]=[s,a,l,o];break;case 180:[o,s,a,l]=[a,l,o,s];break;case 270:[o,s,a,l]=[l,o,s,a]}switch(e){case 90:[i,o,r,a]=[o,r,a,i];break;case 180:[i,o,r,a]=[r,a,i,o];break;case 270:[i,o,r,a]=[a,i,o,r]}return{up:i,down:r,north:o,east:s,south:a,west:l}}}(ni||(ni={}));class oi{constructor(t,e,n){this.id=t,this.variants=e,this.multipart=n,this.variants=e}getModelVariants(t){if(this.variants){const e=Object.keys(this.variants).filter((e=>this.matchesVariant(e,t)));if(0===e.length)return[];const n=this.variants[e[0]];return[Array.isArray(n)?n[0]:n]}return this.multipart?this.multipart.filter((e=>!e.when||this.matchesCase(e.when,t))).map((t=>Array.isArray(t.apply)?t.apply[0]:t.apply)):[]}getBuffers(t,e,n,i,r,o){var s,a,l,u;const h=this.getModelVariants(e),c=[],d=[],f=[],p=[];for(const _ of h){const h=ni.rotate(o,null!==(s=_.x)&&void 0!==s?s:0,null!==(a=_.y)&&void 0!==a?a:0),v=i.getBlockModel(_.model).getBuffers(t,e,n,r,h);if(_.x||_.y){const t=gn();yn(t),bn(t,t,[8,8,8]),kn(t,t,-_n(null!==(l=_.y)&&void 0!==l?l:0)),xn(t,t,-_n(null!==(u=_.x)&&void 0!==u?u:0)),bn(t,t,[-8,-8,-8]),ri(v.position,t)}c.push(v.position),d.push(...v.texCoord),f.push(...v.tintColor),p.push(...v.index),r+=v.texCoord.length/2}const _=gn();yn(_),wn(_,_,[.0625,.0625,.0625]);const v=ii(...c);return ri(v,_),{position:v,texCoord:d,tintColor:f,index:p}}matchesVariant(t,e){return t.split(",").every((t=>{const[n,i]=t.split("=");return e[n]===i}))}matchesCase(t,e){if(Array.isArray(t.OR))return t.OR.some((t=>this.matchesCase(t,e)));const n=t;return Object.keys(n).every((t=>n[t].split("|").includes(e[t])))}static fromJson(t,e){return new oi(t,e.variants,e.multipart)}}const si={0:[0,3,2,3,2,1,0,1],90:[2,3,2,1,0,1,0,3],180:[2,1,0,1,0,3,2,3],270:[0,1,0,3,2,3,2,1]},ai={x:[1,0,0],y:[0,1,0],z:[0,0,1]},li=1.41421356237,ui={x:[1,li,li],y:[li,1,li],z:[li,li,1]};class hi{constructor(t,e,n,i){this.id=t,this.parent=e,this.textures=n,this.elements=i,this.flattened=!1}getBuffers(t,e,n,i,r){var o;const s=[],a=[],l=[],u=[];for(const h of null!==(o=this.elements)&&void 0!==o?o:[]){const o=this.getElementBuffers(t,e,h,i,n,r);s.push(o.position),a.push(...o.texCoord),l.push(...o.tintColor),u.push(...o.index),i+=o.texCoord.length/2}return{position:ii(...s),texCoord:a,tintColor:l,index:u}}getElementBuffers(t,e,n,i,r,o){var s,a,l,u,h,c,d,f,p,_,v,m;const g=n.from[0],y=n.from[1],b=n.from[2],w=n.to[0],x=n.to[1],k=n.to[2],E=[],S=[],T=[],A=[],P=(n,o,s)=>{var a,l,u,h,c,d,f,p,_,v,m,g;const[y,b,w,x]=r.getTextureUV(this.getTexture(n.texture)),k=(w-y)/16,P=(x-b)/16,I=k/16,L=P/16;o[0]=(null!==(l=null===(a=n.uv)||void 0===a?void 0:a[0])&&void 0!==l?l:o[0])*k+I,o[1]=(null!==(h=null===(u=n.uv)||void 0===u?void 0:u[1])&&void 0!==h?h:o[1])*P+L,o[2]=(null!==(d=null===(c=n.uv)||void 0===c?void 0:c[2])&&void 0!==d?d:o[2])*k-I,o[3]=(null!==(p=null===(f=n.uv)||void 0===f?void 0:f[3])&&void 0!==p?p:o[3])*P-L;const z=si[null!==(_=n.rotation)&&void 0!==_?_:0];S.push(y+o[z[0]],b+o[z[1]],y+o[z[2]],b+o[z[3]],y+o[z[4]],b+o[z[5]],y+o[z[6]],b+o[z[7]]);const M=(null!==(v=n.tintindex)&&void 0!==v?v:-1)>=0&&null!==(g=null===(m=ei[t.slice(10)])||void 0===m?void 0:m.call(ei,e))&&void 0!==g?g:[1,1,1];T.push(...M,...M,...M,...M),E.push(...s),A.push(i,i+1,i+2,i,i+2,i+3),i+=4};!(null===(a=null===(s=n.faces)||void 0===s?void 0:s.up)||void 0===a?void 0:a.texture)||n.faces.up.cullface&&o[n.faces.up.cullface]||P(n.faces.up,[g,16-k,w,16-b],[g,x,k,w,x,k,w,x,b,g,x,b]),!(null===(u=null===(l=n.faces)||void 0===l?void 0:l.down)||void 0===u?void 0:u.texture)||n.faces.down.cullface&&o[n.faces.down.cullface]||P(n.faces.down,[16-k,16-w,16-b,16-g],[g,y,b,w,y,b,w,y,k,g,y,k]),!(null===(c=null===(h=n.faces)||void 0===h?void 0:h.south)||void 0===c?void 0:c.texture)||n.faces.south.cullface&&o[n.faces.south.cullface]||P(n.faces.south,[g,16-x,w,16-y],[g,y,k,w,y,k,w,x,k,g,x,k]),!(null===(f=null===(d=n.faces)||void 0===d?void 0:d.north)||void 0===f?void 0:f.texture)||n.faces.north.cullface&&o[n.faces.north.cullface]||P(n.faces.north,[16-w,16-x,16-g,16-y],[w,y,b,g,y,b,g,x,b,w,x,b]),!(null===(_=null===(p=n.faces)||void 0===p?void 0:p.east)||void 0===_?void 0:_.texture)||n.faces.east.cullface&&o[n.faces.east.cullface]||P(n.faces.east,[16-k,16-x,16-b,16-y],[w,y,k,w,y,b,w,x,b,w,x,k]),!(null===(m=null===(v=n.faces)||void 0===v?void 0:v.west)||void 0===m?void 0:m.texture)||n.faces.west.cullface&&o[n.faces.west.cullface]||P(n.faces.west,[b,16-x,k,16-y],[g,y,b,g,y,k,g,x,k,g,x,b]);const I=gn();if(yn(I),n.rotation){const t=function(t,e,n){var i=new cn(3);return i[0]=t,i[1]=e,i[2]=n,i}(...n.rotation.origin);bn(I,I,t),function(t,e,n,i){var r,o,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,k,E,S,T,A,P=i[0],I=i[1],L=i[2],z=Math.hypot(P,I,L);z<1e-6||(P*=z=1/z,I*=z,L*=z,r=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],l=e[1],u=e[2],h=e[3],c=e[4],d=e[5],f=e[6],p=e[7],_=e[8],v=e[9],m=e[10],g=e[11],y=P*P*s+o,b=I*P*s+L*r,w=L*P*s-I*r,x=P*I*s-L*r,k=I*I*s+o,E=L*I*s+P*r,S=P*L*s+I*r,T=I*L*s-P*r,A=L*L*s+o,t[0]=a*y+c*b+_*w,t[1]=l*y+d*b+v*w,t[2]=u*y+f*b+m*w,t[3]=h*y+p*b+g*w,t[4]=a*x+c*k+_*E,t[5]=l*x+d*k+v*E,t[6]=u*x+f*k+m*E,t[7]=h*x+p*k+g*E,t[8]=a*S+c*T+_*A,t[9]=l*S+d*T+v*A,t[10]=u*S+f*T+m*A,t[11]=h*S+p*T+g*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(I,I,_n(n.rotation.angle),ai[n.rotation.axis]),n.rotation.rescale&&wn(I,I,ui[n.rotation.axis]),function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2]}(t,t),bn(I,I,t)}const L=new Float32Array(E);return ri(L,I),{position:L,texCoord:S,tintColor:T,index:A}}getTexture(t){for(var e,n;t.startsWith("#");)t=null!==(n=null===(e=this.textures)||void 0===e?void 0:e[t.slice(1)])&&void 0!==n?n:"";return t.startsWith("minecraft:")||(t="minecraft:"+t),t}flatten(t){var e;if(!this.flattened&&this.parent){const n=t.getBlockModel(this.parent);if(!n)return console.warn(`parent ${this.parent} does not exist!`),void(this.flattened=!0);n.flatten(t),this.elements||(this.elements=n.elements),this.textures||(this.textures={}),Object.keys(null!==(e=n.textures)&&void 0!==e?e:{}).forEach((t=>{this.textures[t]||(this.textures[t]=n.textures[t])})),this.flattened=!0}}static fromJson(t,e){let n=e.parent;return n&&!n.startsWith("minecraft:")&&(n="minecraft:"+n),new hi(t,n,e.textures,e.elements)}}function ci(t,e,n,i,r){const o=new oi("",{"":{model:""}},void 0),s={getBlockModel:()=>r};return r.flatten(s),o.getBuffers(t,{},e,s,n,i)}function di(t,e,n,i,r,o){const s=r.up?16:[14.2,12.5,10.5,9,7,5.3,3.7,1.9,16,16,16,16,16,16,16,16][n];return ci(`minecraft:${t}`,i,e,r,new hi("","",{still:`minecraft:block/${t}_still`,flow:`minecraft:block/${t}_flow`},[{from:[0,0,0],to:[16,s,16],faces:{up:{texture:"#still",tintindex:o,cullface:dn.UP},down:{texture:"#still",tintindex:o,cullface:dn.DOWN},north:{texture:"#flow",tintindex:o,cullface:dn.NORTH},east:{texture:"#flow",tintindex:o,cullface:dn.EAST},south:{texture:"#flow",tintindex:o,cullface:dn.SOUTH},west:{texture:"#flow",tintindex:o,cullface:dn.WEST}}}]))}const fi={"minecraft:water":(t,e,n,i)=>di("water",t,parseInt(e.level),n,i,0),"minecraft:lava":(t,e,n,i)=>di("lava",t,parseInt(e.level),n,i),"minecraft:chest":(t,e,n)=>function(t,e,n,i){return ci("minecraft:chest",i,t,{},new hi("","",{0:"minecraft:block/chest"},[{from:[1,0,1],to:[15,14,15],faces:{up:{texture:"#0"},down:{texture:"#0"},north:{texture:"#0"},east:{texture:"#0"},south:{texture:"#0"},west:{texture:"#0"}}}]))}(t,e.facing,e.type,n)};var pi,_i,vi,mi,gi,yi,bi,wi,xi;new Set(Object.keys(fi)),function(t){function e(t,e){return"number"==typeof t?new n(t,null!=e?e:t):t}t.target=function(t,e,n,i,o,s){return new r(t,e,n,i,o,s)},t.parameters=function(t,n,r,o,s,a,l){return new i(e(t),e(n),e(r),e(o),e(s),e(a),l)},t.param=e;class n{constructor(t,e){this.min=t,this.max=e}distance(t){const e=("number"==typeof t?t:t.min)-this.max,n=this.min-("number"==typeof t?t:t.max);return e>0?e:Math.max(n,0)}union(t){return new n(Math.min(this.min,t.min),Math.max(this.max,t.max))}static fromJson(t){var e;if("number"==typeof t)return new n(t,t);const[i,r]=null!==(e=Tn.readArray(t,(t=>Tn.readNumber(t))))&&void 0!==e?e:[];return new n(null!=i?i:0,null!=r?r:0)}}t.Param=n;class i{constructor(t,e,n,i,r,o,s){this.temperature=t,this.humidity=e,this.continentalness=n,this.erosion=i,this.depth=r,this.weirdness=o,this.offset=s}fittness(t){return Cn(this.temperature.distance(t.temperature))+Cn(this.humidity.distance(t.humidity))+Cn(this.continentalness.distance(t.continentalness))+Cn(this.erosion.distance(t.erosion))+Cn(this.depth.distance(t.depth))+Cn(this.weirdness.distance(t.weirdness))+Cn(this.offset-t.offset)}space(){return[this.temperature,this.humidity,this.continentalness,this.erosion,this.depth,this.weirdness,new n(this.offset,this.offset)]}static fromJson(t){var e,r;const o=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return new i(n.fromJson(o.temperature),n.fromJson(o.humidity),n.fromJson(o.continentalness),n.fromJson(o.erosion),n.fromJson(o.depth),n.fromJson(o.weirdness),null!==(r=Tn.readInt(o.offset))&&void 0!==r?r:0)}}t.ParamPoint=i;class r{constructor(t,e,n,i,r,o){this.temperature=t,this.humidity=e,this.continentalness=n,this.erosion=i,this.depth=r,this.weirdness=o}get offset(){return 0}toArray(){return[this.temperature,this.humidity,this.continentalness,this.erosion,this.depth,this.weirdness,this.offset]}}t.TargetPoint=r,t.Parameters=class{constructor(t){this.things=t,this.index=new o(t)}find(t){return this.index.search(t,((t,e)=>t.distance(e)))}};class o{constructor(t){this.root=o.build(t.map((([t,e])=>new l(t,e))))}static build(t){if(1===t.length)return t[0];if(t.length<=o.CHILDREN_PER_NODE){const e=t.map((t=>{let e=0;for(let n=0;n<7;n+=1){const i=t.space[n];e+=Math.abs((i.min+i.max)/2)}return{key:e,node:t}})).sort(((t,e)=>t.key-e.key)).map((({node:t})=>t));return new a(e)}let e=1/0,n=-1,i=[];for(let r=0;r<7;++r){t=o.sort(t,r,!1),i=o.bucketize(t);let s=0;for(const t of i)s+=o.area(t.space);e>s&&(e=s,n=r)}return t=o.sort(t,n,!1),i=o.bucketize(t),i=o.sort(i,n,!0),new a(i.map((t=>o.build(t.children))))}static sort(t,e,n){return t.map((t=>{const i=t.space[e],r=(i.min+i.max)/2;return{key:n?Math.abs(r):r,node:t}})).sort(((t,e)=>t.key-e.key)).map((({node:t})=>t))}static bucketize(t){const e=[];let n=[];const i=Math.pow(10,Math.floor(Math.log(t.length-.01)/Math.log(10)));for(const r of t)n.push(r),n.length<i||(e.push(new a(n)),n=[]);return 0!==n.length&&e.push(new a(n)),e}static area(t){let e=0;for(const n of t)e+=Math.abs(n.max-n.min);return e}search(t,e){return this.root.search(t.toArray(),e).thing()}}o.CHILDREN_PER_NODE=10,t.RTree=o;class s{constructor(t){this.space=t}distance(t){let e=0;for(let n=0;n<7;n+=1)e+=Cn(this.space[n].distance(t[n]));return e}}t.RNode=s;class a extends s{constructor(t){super(a.buildSpace(t)),this.children=t}static buildSpace(t){let e=[...Array(7)].map((()=>new n(1/0,-1/0)));for(const n of t)e=[...Array(7)].map(((t,i)=>e[i].union(n.space[i])));return e}search(t,e){let n=1/0,i=null;for(const r of this.children){const o=e(r,t);if(n<=o)continue;const s=r.search(t,e),a=r==s?o:e(s,t);n<=a||(n=a,i=s)}return i}}t.RSubTree=a;class l extends s{constructor(t,e){super(t.space()),this.thing=e}search(){return this}}t.RLeaf=l}(pi||(pi={}));class ki{constructor(t,e,n){this.offsetSampler=t,this.factorSampler=e,this.jaggednessSampler=n}static fromJson(t){var e;const n=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return new ki(this.splineFromJson(n.offset),this.splineFromJson(n.factor),this.splineFromJson(n.offset))}static splineFromJson(t){var e,n,i,r,o;if("number"==typeof t)return()=>t;const s=null!==(e=Tn.readObject(t))&&void 0!==e?e:{},a=null!==(n=Tn.readString(s.coordinate))&&void 0!==n?n:"continents",l=new Gn(a,(t=>t[a])),u=null!==(i=Tn.readArray(s.points,(t=>{var e;return null!==(e=Tn.readObject(t))&&void 0!==e?e:{}})))&&void 0!==i?i:[];if(0===u.length)return()=>0;for(const t of u){const e=null!==(r=Tn.readNumber(t.location))&&void 0!==r?r:0,n=this.splineFromJson(t.value),i=null!==(o=Tn.readNumber(t.derivative))&&void 0!==o?o:0;l.addPoint(e,n,i)}return l}offset(t){return this.offsetSampler.apply(t)+ki.GLOBAL_OFFSET}factor(t){return this.factorSampler.apply(t)}jaggedness(t){return this.jaggednessSampler.apply(t)}static point(t,e,n){return{continents:t,erosion:e,weirdness:n,ridges:this.peaksAndValleys(n)}}static peaksAndValleys(t){return 3*-(Math.abs(Math.abs(t)-.6666667)-.33333334)}static overworld(){const t=this.buildErosionOffsetSpline("beachSpline",-.05,0,0,.1,0,-.03,!1,!1),e=this.buildErosionOffsetSpline("lowSpline",-.1,.03,.1,.1,.01,-.03,!1,!1),n=this.buildErosionOffsetSpline("midSpline",-.1,.03,.1,.7,.01,-.03,!0,!0),i=this.buildErosionOffsetSpline("highSpline",.3,.03,.1,1,.01,.01,!0,!0),r=new Gn("Offset",(t=>t.continents)).addPoint(-1.1,.044).addPoint(-1.02,-.2222).addPoint(-.51,-.2222).addPoint(-.44,-.12).addPoint(-.18,-.12).addPoint(-.16,t).addPoint(-.15,t).addPoint(-.1,e).addPoint(.25,n).addPoint(1,i),o=new Gn("Factor",(t=>t.continents)).addPoint(-.19,3.95).addPoint(-.15,this.getErosionFactor("erosionCoast",6.25,!0)).addPoint(-.1,this.getErosionFactor("erosionInland",5.47,!0)).addPoint(.03,this.getErosionFactor("erosionMidInland",5.08,!0)).addPoint(.06,this.getErosionFactor("erosionFarInland",4.69,!1)),s=new Gn("Jaggedness",(t=>t.continents)).addPoint(.11,0).addPoint(.03,this.buildErosionJaggednessSpline(1,.5,0,0)).addPoint(.65,this.buildErosionJaggednessSpline(1,1,1,0));return new ki(r,o,s)}static getErosionFactor(t,e,n){const i=new Gn("weirdness",(t=>t.weirdness)).addPoint(-.2,6.3).addPoint(.2,e),r=new Gn(t,(t=>t.erosion)).addPoint(-.6,i).addPoint(-.5,new Gn("weirdness",(t=>t.weirdness)).addPoint(-.05,6.3).addPoint(.05,2.67)).addPoint(-.35,i).addPoint(-.25,i).addPoint(-.1,new Gn("weirdness",(t=>t.weirdness)).addPoint(-.05,2.67).addPoint(.05,6.3)).addPoint(.03,i);if(n){const t=new Gn("weirdnessShattered",(t=>t.weirdness)).addPoint(0,e).addPoint(.1,.625),n=new Gn("ridgesShattered",(t=>t.ridges)).addPoint(-.9,e).addPoint(-.69,t);r.addPoint(.35,e).addPoint(.45,n).addPoint(.55,n).addPoint(.62,e)}else{const t=new Gn("ridges",(t=>t.ridges)).addPoint(-.7,i).addPoint(-.15,1.37),n=new Gn("ridges",(t=>t.ridges)).addPoint(.45,i).addPoint(.7,1.56);r.addPoint(.05,n).addPoint(.4,n).addPoint(.45,t).addPoint(.55,t).addPoint(.58,e)}return r}static buildErosionOffsetSpline(t,e,n,i,r,o,s,a,l){const u=this.buildMountainRidgeSplineWithPoints(On(r,.6,1.5),l),h=this.buildMountainRidgeSplineWithPoints(On(r,.6,1),l),c=this.buildMountainRidgeSplineWithPoints(r,l),d=this.ridgeSpline(t+"-widePlateau",e-.15,.5*r,On(.5,.5,.5)*r,.5*r,.6*r,.5),f=this.ridgeSpline(t+"-narrowPlateau",e,o*r,n*r,.5*r,.6*r,.5),p=this.ridgeSpline(t+"-plains",e,o,o,n,i,.5),_=this.ridgeSpline(t+"-plainsFarInland",e,o,o,n,i,.5),v=new Gn(t,(t=>t.ridges)).addPoint(-1,e).addPoint(-.4,p).addPoint(0,i+.07),m=this.ridgeSpline(t+"-swamps",-.02,s,s,n,i,0),g=new Gn(t,(t=>t.erosion)).addPoint(-.85,u).addPoint(-.7,h).addPoint(-.4,c).addPoint(-.35,d).addPoint(-.1,f).addPoint(.2,p);return a&&g.addPoint(.4,_).addPoint(.45,v).addPoint(.55,v).addPoint(.58,_),g.addPoint(.7,m),g}static buildMountainRidgeSplineWithPoints(t,e){const n=new Gn(`M-spline for continentalness: ${t} ${e}`,(t=>t.ridges)),i=this.mountainContinentalness(-1,t,-.7),r=this.mountainContinentalness(1,t,-.7),o=this.calculateMountainRidgeZeroContinentalnessPoint(t);if(-.65<o&&o<1){const e=this.mountainContinentalness(-.65,t,-.7),s=this.mountainContinentalness(-.75,t,-.7),a=this.calculateSlope(i,s,-1,-.75);n.addPoint(-1,i,a),n.addPoint(-.75,s),n.addPoint(-.65,e);const l=this.mountainContinentalness(o,t,-.7),u=this.calculateSlope(l,r,o,1);n.addPoint(o-.01,l),n.addPoint(o,l,u),n.addPoint(1,r,u)}else{const t=this.calculateSlope(i,r,-1,1);e?(n.addPoint(-1,Math.max(.2,i)),n.addPoint(0,On(.5,i,r),t)):n.addPoint(-1,i,t),n.addPoint(1,r,t)}return n}static mountainContinentalness(t,e,n){const i=.46082947*(t+1.17)*(1-.5*(1-e))-.5*(1-e);return t<n?Math.max(i,-.2222):Math.max(i,0)}static calculateMountainRidgeZeroContinentalnessPoint(t){return.5*(1-t)/(.46082947*(1-.5*(1-t)))-1.17}static calculateSlope(t,e,n,i){return(e-t)/(i-n)}static ridgeSpline(t,e,n,i,r,o,s){const a=Math.max(.5*(n-e),s),l=5*(i-n);return new Gn(t,(t=>t.ridges)).addPoint(-1,e,a).addPoint(-.4,n,Math.min(a,l)).addPoint(0,i,l).addPoint(.4,r,2*(r-i)).addPoint(1,o,.7*(o-r))}static buildErosionJaggednessSpline(t,e,n,i){const r=this.buildRidgeJaggednessSpline(t,n),o=this.buildRidgeJaggednessSpline(e,i);return new Gn("Jaggedness-erosion",(t=>t.erosion)).addPoint(-1,r).addPoint(-.78,o).addPoint(-.5775,o).addPoint(-.375,0)}static buildRidgeJaggednessSpline(t,e){const n=ki.peaksAndValleys(.4),i=(n+ki.peaksAndValleys(.56666666))/2;return new Gn("Jaggedness-ridges",(t=>t.ridges)).addPoint(n,0).addPoint(i,e>0?this.buildWeirdnessJaggednessSpline(e):0).addPoint(1,t>0?this.buildWeirdnessJaggednessSpline(t):0)}static buildWeirdnessJaggednessSpline(t){return new Gn("Jaggedness-weirdness",(t=>t.weirdness)).addPoint(-.01,.63*t).addPoint(.01,.3*t)}}ki.GLOBAL_OFFSET=-.50375,function(t){t.fromList=function(t){return(e,n,i,r)=>{for(const o of t){const t=o(e,n,i,r);if(t)return t}return null}}}(_i||(_i={})),function(t){t.create=function(t,e,n){return{offset:t,factor:e,jaggedness:n}}}(vi||(vi={})),function(t){t.create=function(t,e,n){const i=e+t.getOffset(e,0,n),r=n+t.getOffset(n,e,0),o=t.getContinentalness(i,r),s=t.getWeirdness(i,r),a=t.getErosion(i,r);return{shiftedX:i,shiftedZ:r,continentalness:o,weirdness:s,erosion:a,terrainInfo:t.getTerrainInfo(i<<2,r<<2,o,s,a)}}}(mi||(mi={})),function(t){t.fromJson=function(t){var e,n,i,r,o,s,a,l,u,h,c,d;const f=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return{minY:null!==(n=Tn.readInt(f.min_y))&&void 0!==n?n:0,height:null!==(i=Tn.readInt(f.height))&&void 0!==i?i:256,xzSize:null!==(r=Tn.readInt(f.size_horizontal))&&void 0!==r?r:1,ySize:null!==(o=Tn.readInt(f.size_vertical))&&void 0!==o?o:1,densityFactor:null!==(s=Tn.readNumber(f.density_factor))&&void 0!==s?s:0,densityOffset:null!==(a=Tn.readNumber(f.density_offset))&&void 0!==a?a:0,sampling:Pn.fromJson(f.sampling),topSlide:yi.fromJson(f.top_slide),bottomSlide:yi.fromJson(f.bottom_slide),terrainShaper:ki.fromJson(f.terrain_shaper),useSimplexSurfaceNoise:null!==(l=Tn.readBoolean(f.simplex_surface_noise))&&void 0!==l&&l,randomDensityOffset:null!==(u=Tn.readBoolean(f.random_density_offset))&&void 0!==u&&u,islandNoiseOverride:null!==(h=Tn.readBoolean(f.island_noise_override))&&void 0!==h&&h,isAmplified:null!==(c=Tn.readBoolean(f.amplified))&&void 0!==c&&c,useLegacyRandom:null!==(d=Tn.readBoolean(f.use_legacy_random))&&void 0!==d&&d}}}(gi||(gi={})),function(t){t.fromJson=function(t){var e,n,i,r;const o=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return{target:null!==(n=Tn.readNumber(o.target))&&void 0!==n?n:0,size:null!==(i=Tn.readInt(o.size))&&void 0!==i?i:0,offset:null!==(r=Tn.readInt(o.offset))&&void 0!==r?r:0}},t.apply=function(t,e,n){if(t.size<=0)return e;const i=(n-t.offset)/t.size;return function(t,e,n){return n<0?t:n>1?e:On(n,t,e)}(t.target,e,i)}}(yi||(yi={})),function(t){t.fromJson=function(t){var e,n,i,r,o,s,a,l,u,h,c;const d=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return{structures:wi.fromJson(d.structures),noise:gi.fromJson(d.noise),octaves:xi.fromJson(d.octaves),defaultBlock:zn.fromJson(d.default_block),defaultFluid:zn.fromJson(d.default_fluid),bedrockRoofPosition:null!==(n=Tn.readInt(d.bedrock_roof_position))&&void 0!==n?n:0,bedrockFloorPosition:null!==(i=Tn.readInt(d.bedrock_floor_position))&&void 0!==i?i:0,seaLevel:null!==(r=Tn.readInt(d.sea_level))&&void 0!==r?r:0,disableMobGeneration:null!==(o=Tn.readBoolean(d.disable_mob_generation))&&void 0!==o&&o,aquifersEnabled:null!==(s=Tn.readBoolean(d.aquifers_enabled))&&void 0!==s&&s,noiseCavesEnabled:null!==(a=Tn.readBoolean(d.noise_caves_enabled))&&void 0!==a&&a,deepslateEnabled:null!==(l=Tn.readBoolean(d.deepslate_enabled))&&void 0!==l&&l,oreVeinsEnabled:null!==(u=Tn.readBoolean(d.ore_veins_enabled))&&void 0!==u&&u,noodleCavesEnabled:null!==(h=Tn.readBoolean(d.noodle_caves_enabled))&&void 0!==h&&h,legacyRandomSource:null!==(c=Tn.readBoolean(d.legacy_random_source))&&void 0!==c&&c}}}(bi||(bi={})),function(t){t.fromJson=function(t){var e;const n=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return{stronghold:Tn.compose(n.stronghold,Tn.readObject,(t=>{var e,n,i;return{distance:null!==(e=Tn.readInt(t.distance))&&void 0!==e?e:0,spread:null!==(n=Tn.readInt(t.spread))&&void 0!==n?n:0,count:null!==(i=Tn.readInt(t.count))&&void 0!==i?i:0}})),structures:Tn.readMap(n.structures,(t=>{var e;return(t=>{var e,n,i;return{spacing:null!==(e=Tn.readInt(t.spacing))&&void 0!==e?e:0,separation:null!==(n=Tn.readInt(t.separation))&&void 0!==n?n:0,salt:null!==(i=Tn.readInt(t.salt))&&void 0!==i?i:0}})(null!==(e=Tn.readObject(t))&&void 0!==e?e:{})}))}}}(wi||(wi={})),function(t){t.fromJson=function(t){var e;const n=null!==(e=Tn.readObject(t))&&void 0!==e?e:{};return{temperature:In.fromJson(n.temperature),humidity:In.fromJson(n.humidity),continentalness:In.fromJson(n.continentalness),erosion:In.fromJson(n.erosion),weirdness:In.fromJson(n.weirdness),shift:In.fromJson(n.shift)}}}(xi||(xi={}));var Ei=n(104),Si=function(){function t(t){this.biome=t}return t.prototype.setHighlight=function(t,e){},t.prototype.draw=function(t,e,n,i,r,o,s){t.fillStyle=this.biome.color,t.fillRect(e,n,i,r)},t.prototype.getIdsFromPosition=function(t,e,n,i,r,o){return{t_idx:-1,h_idx:-1,mode:"A"}},t}(),Ti=function(){function t(t,e,n,i){void 0===i&&(i=!1),this.hidden=!1,this.type_id=3,this.allowEdit=!0,this.name=t,this.color=e,this.key=void 0!==n?n:i?t:Ei("biome_"),this.allowEdit=!i,this.isVanilla=i,this.raw_color=this._hexToRgb(e)}return t.create=function(e,n,i,r,o){void 0===o&&(o=!1);var s=new t(n,i,r,o);return o?e.registerVanillaBiome(s):e.registerBiome(s),s},t.prototype.setColor=function(t){this.color=t,this.raw_color=this._hexToRgb(t)},t.prototype._hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},t.fromJSON=function(e,n){var i;if(!e.vanillaBiomes.has(n.key)){var r=new t(n.name,null!==(i=n.color)&&void 0!==i?i:"#888888",n.key,!1);return e.registerBiome(r),r}var o=e.vanillaBiomes.get(n.key);e.registerBiome(o),n.color&&(o.color=n.color)},t.prototype.toJSON=function(){var t=this,e=void 0;if(this.isVanilla){var n=Ai.biomes.find((function(e){return e.key===t.getKey()})).color;this.color!==n&&(e=this.color)}else e=this.color;return{key:this.key,name:this.name,color:e}},t.prototype.lookupKey=function(t,e){return this.getKey()},t.prototype.lookup=function(t,e){return this},t.prototype.lookupRecursive=function(t,e){return this},t.prototype.lookupRecursiveWithTracking=function(t,e,n){return{slice:void 0,layout:void 0,biome:this}},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new Si(this)),this.renderer},t.prototype.getKey=function(){return this.key},t.prototype.has=function(t,e){return t===this.getKey()},t}(),Ai=function(){function t(){}return t.registerVanillaBiomes=function(e){for(var n=0,i=t.biomes;n<i.length;n++){var r=i[n];r.color||(r.color=this.colorToHex(r.r,r.g,r.b));var o=r.color;Ti.create(e,r.name,o,r.key,!0)}},t.colorToHex=function(t,e,n){return"#"+(t<<16|e<<8|n).toString(16).padStart(6,"0")},t.biomes=[{key:"minecraft:mushroom_fields",name:"minecraft:mushroom_fields",color:"#fa91f8"},{key:"minecraft:deep_frozen_ocean",name:"minecraft:deep_frozen_ocean",color:"#3478a2"},{key:"minecraft:deep_cold_ocean",name:"minecraft:deep_cold_ocean",color:"#004785"},{key:"minecraft:deep_ocean",name:"minecraft:deep_ocean",color:"#03009e"},{key:"minecraft:deep_lukewarm_ocean",name:"minecraft:deep_lukewarm_ocean",color:"#26008f"},{key:"minecraft:frozen_ocean",name:"minecraft:frozen_ocean",color:"#20afff"},{key:"minecraft:cold_ocean",name:"minecraft:cold_ocean",color:"#007bff"},{key:"minecraft:ocean",name:"minecraft:ocean",color:"#0000ff"},{key:"minecraft:warm_ocean",name:"minecraft:warm_ocean",color:"#6400ff"},{key:"minecraft:lukewarm_ocean",name:"minecraft:lukewarm_ocean",color:"#4c00ff"},{key:"minecraft:frozen_river",name:"minecraft:frozen_river",color:"#a6d4ff"},{key:"minecraft:river",name:"minecraft:river",color:"#4d82ff"},{key:"minecraft:swamp",name:"minecraft:swamp",color:"#5dbb8e"},{key:"minecraft:snowy_tundra",name:"minecraft:snowy_plains",color:"#ffffff"},{key:"minecraft:ice_spikes",name:"minecraft:ice_spikes",color:"#c8eefe"},{key:"minecraft:snowy_taiga",name:"minecraft:snowy_taiga",color:"#d1ffd3"},{key:"minecraft:plains",name:"minecraft:plains",color:"#73e43f"},{key:"minecraft:forest",name:"minecraft:forest",color:"#009903"},{key:"minecraft:taiga",name:"minecraft:taiga",color:"#457119"},{key:"minecraft:giant_spruce_taiga",name:"minecraft:old_growth_spruce_taiga",color:"#345011"},{key:"minecraft:giant_tree_taiga",name:"minecraft:old_growth_pine_taiga",color:"#444d00"},{key:"minecraft:sunflower_plains",name:"minecraft:sunflower_plains",color:"#a6ff00"},{key:"minecraft:flower_forest",name:"minecraft:flower_forest",color:"#77bc01"},{key:"minecraft:birch_forest",name:"minecraft:birch_forest",color:"#6ac65b"},{key:"minecraft:tall_birch_forest",name:"minecraft:old_growth_birch_forest",color:"#59e45a"},{key:"minecraft:dark_forest",name:"minecraft:dark_forest",color:"#017401"},{key:"minecraft:savanna",name:"minecraft:savanna",color:"#b3f23d"},{key:"minecraft:jungle",name:"minecraft:jungle",color:"#00ff00"},{key:"minecraft:eroded_badlands",name:"minecraft:eroded_badlands",color:"#b85000"},{key:"minecraft:badlands",name:"minecraft:badlands",color:"#ff6f00"},{key:"minecraft:wooded_badlands_plateau",name:"minecraft:wooded_badlands",color:"#db8b00"},{key:"minecraft:stone_shore",name:"minecraft:stony_shore",color:"#666666"},{key:"minecraft:snowy_beach",name:"minecraft:snowy_beach",color:"#d6daaa"},{key:"minecraft:beach",name:"minecraft:beach",color:"#fff98a"},{key:"minecraft:desert",name:"minecraft:desert",color:"#ffff00"},{key:"minecraft:shattered_savanna",name:"minecraft:windswept_savanna",color:"#abdb51"},{key:"minecraft:jungle_edge",name:"minecraft:sparse_jungle",color:"#80ff00"},{key:"minecraft:snowy_slopes",name:"minecraft:snowy_slopes",color:"#8acaea"},{key:"minecraft:grove",name:"minecraft:grove",color:"#afafe4"},{key:"minecraft:savanna_plateau",name:"minecraft:savanna_plateau",color:"#80ab30"},{key:"minecraft:gravelly_hills",name:"minecraft:windswept_gravelly_hills",color:"#819698"},{key:"minecraft:extreme_hills",name:"minecraft:windswept_hills",color:"#698e91"},{key:"minecraft:wooded_mountains",name:"minecraft:windswept_forest",color:"#427b5f"},{key:"minecraft:meadow",name:"minecraft:meadow",color:"#d2ff3d"},{key:"minecraft:lofty_peaks",name:"minecraft:jagged_peaks",color:"#d7acd3"},{key:"minecraft:snowcapped_peaks",name:"minecraft:frozen_peaks",color:"#dedede"},{key:"minecraft:stony_peaks",name:"minecraft:stony_peaks",color:"#adbfe1"},{key:"minecraft:bamboo_jungle",name:"minecraft:bamboo_jungle",color:"#00ff57"},{key:"minecraft:mangrove_swamp",name:"minecraft:mangrove_swamp",color:"#275442"},{key:"minecraft:deep_dark",name:"minecraft:deep_dark",color:"#08271f"},{key:"minecraft:soul_sand_valley",name:"minecraft:soul_sand_valley",r:140,g:132,b:108},{key:"minecraft:nether_wastes",name:"minecraft:nether_wastes",r:163,g:62,b:62},{key:"minecraft:crimson_forest",name:"minecraft:crimson_forest",r:219,g:60,b:46},{key:"minecraft:warped_forest",name:"minecraft:warped_forest",r:68,g:171,b:171},{key:"minecraft:basalt_deltas",name:"minecraft:basalt_deltas",r:79,g:73,b:66},{key:"minecraft:the_end",name:"minecraft:the_end",r:252,g:244,b:121},{key:"minecraft:small_end_islands",name:"minecraft:small_end_islands",r:234,g:247,b:52},{key:"minecraft:end_midlands",name:"minecraft:end_midlands",r:170,g:179,b:55},{key:"minecraft:end_highlands",name:"minecraft:end_highlands",r:112,g:117,b:46},{key:"minecraft:end_barrens",name:"minecraft:end_barrens",r:199,g:204,b:137},{key:"minecraft:the_void",name:"minecraft:the_void",r:0,g:0,b:0},{key:"minecraft:lush_caves",name:"minecraft:lush_caves",r:112,g:255,b:79},{key:"minecraft:dripstone_caves",name:"minecraft:dripstone_caves",r:140,g:124,b:0}],t}(),Pi=n(486),Ii=function(){function t(){}return t.default=function(){return Pi.cloneDeep(this.defaultSetting)},t.defaultSetting={erosion:{firstOctave:-9,amplitudes:[1,1,0,1,1]},weirdness:{firstOctave:-7,amplitudes:[1,2,1,0,0,0]},shift:{firstOctave:-3,amplitudes:[1,1,1,0]},temperature:{firstOctave:-10,amplitudes:[1.5,0,1,0,0,0]},humidity:{firstOctave:-8,amplitudes:[1,1,0,0,0,0]},continentalness:{firstOctave:-9,amplitudes:[1,1,2,2,2,1,1,1,1]}},t}(),Li=function(){function t(){}return t.offset={coordinate:"continents",points:[{location:-1.1,value:.044,derivative:0},{location:-1.02,value:-.2222,derivative:0},{location:-.51,value:-.2222,derivative:0},{location:-.44,value:-.12,derivative:0},{location:-.18,value:-.12,derivative:0},{location:-.16,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:-.08880186,derivative:.38940096},{location:1,value:.69000006,derivative:.38940096}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:-.115760356,derivative:.37788022},{location:1,value:.6400001,derivative:.37788022}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.2222,derivative:0},{location:-.75,value:-.2222,derivative:0},{location:-.65,value:0,derivative:0},{location:.5954547,value:2.9802322e-8,derivative:0},{location:.6054547,value:2.9802322e-8,derivative:.2534563},{location:1,value:.100000024,derivative:.2534563}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.3,derivative:.5},{location:-.4,value:.05,derivative:0},{location:0,value:.05,derivative:0},{location:.4,value:.05,derivative:0},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:.05,derivative:.1},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:0,derivative:0},{location:1,value:0,derivative:0}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:0,derivative:.06},{location:1,value:0,derivative:0}]},derivative:0}]},derivative:0},{location:-.15,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:-.08880186,derivative:.38940096},{location:1,value:.69000006,derivative:.38940096}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:-.115760356,derivative:.37788022},{location:1,value:.6400001,derivative:.37788022}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.2222,derivative:0},{location:-.75,value:-.2222,derivative:0},{location:-.65,value:0,derivative:0},{location:.5954547,value:2.9802322e-8,derivative:0},{location:.6054547,value:2.9802322e-8,derivative:.2534563},{location:1,value:.100000024,derivative:.2534563}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.3,derivative:.5},{location:-.4,value:.05,derivative:0},{location:0,value:.05,derivative:0},{location:.4,value:.05,derivative:0},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:.05,derivative:.1},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.15,derivative:.5},{location:-.4,value:0,derivative:0},{location:0,value:0,derivative:0},{location:.4,value:0,derivative:0},{location:1,value:0,derivative:0}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:0,derivative:.06},{location:1,value:0,derivative:0}]},derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:-.08880186,derivative:.38940096},{location:1,value:.69000006,derivative:.38940096}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:-.115760356,derivative:.37788022},{location:1,value:.6400001,derivative:.37788022}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.2222,derivative:0},{location:-.75,value:-.2222,derivative:0},{location:-.65,value:0,derivative:0},{location:.5954547,value:2.9802322e-8,derivative:0},{location:.6054547,value:2.9802322e-8,derivative:.2534563},{location:1,value:.100000024,derivative:.2534563}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.25,derivative:.5},{location:-.4,value:.05,derivative:0},{location:0,value:.05,derivative:0},{location:.4,value:.05,derivative:0},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.001,derivative:.01},{location:0,value:.003,derivative:.01},{location:.4,value:.05,derivative:.094000004},{location:1,value:.060000002,derivative:.007000001}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:.03,derivative:.12},{location:1,value:.1,derivative:.049}]},derivative:0}]},derivative:0},{location:.25,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:.20235021,derivative:0},{location:0,value:.7161751,derivative:.5138249},{location:1,value:1.23,derivative:.5138249}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.44682026,derivative:.43317974},{location:1,value:.88,derivative:.43317974}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.30829495,derivative:.3917051},{location:1,value:.70000005,derivative:.3917051}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.25,derivative:.5},{location:-.4,value:.35,derivative:0},{location:0,value:.35,derivative:0},{location:.4,value:.35,derivative:0},{location:1,value:.42000002,derivative:.049000014}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.0069999998,derivative:.07},{location:0,value:.021,derivative:.07},{location:.4,value:.35,derivative:.658},{location:1,value:.42000002,derivative:.049000014}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.4,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.58,value:{coordinate:"ridges",points:[{location:-1,value:-.1,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:0},{location:-.4,value:-.03,derivative:0},{location:0,value:-.03,derivative:0},{location:.4,value:.03,derivative:.12},{location:1,value:.1,derivative:.049}]},derivative:0}]},derivative:0},{location:1,value:{coordinate:"erosion",points:[{location:-.85,value:{coordinate:"ridges",points:[{location:-1,value:.34792626,derivative:0},{location:0,value:.9239631,derivative:.5760369},{location:1,value:1.5,derivative:.5760369}]},derivative:0},{location:-.7,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.5391705,derivative:.4608295},{location:1,value:1,derivative:.4608295}]},derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:.2,derivative:0},{location:0,value:.5391705,derivative:.4608295},{location:1,value:1,derivative:.4608295}]},derivative:0},{location:-.35,value:{coordinate:"ridges",points:[{location:-1,value:-.2,derivative:.5},{location:-.4,value:.5,derivative:0},{location:0,value:.5,derivative:0},{location:.4,value:.5,derivative:0},{location:1,value:.6,derivative:.070000015}]},derivative:0},{location:-.1,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:.099999994},{location:0,value:.03,derivative:.099999994},{location:.4,value:.5,derivative:.94},{location:1,value:.6,derivative:.070000015}]},derivative:0},{location:.2,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.4,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:0},{location:-.4,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:0,value:.17,derivative:0}]},derivative:0},{location:.58,value:{coordinate:"ridges",points:[{location:-1,value:-.05,derivative:.5},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0},{location:.7,value:{coordinate:"ridges",points:[{location:-1,value:-.02,derivative:.015},{location:-.4,value:.01,derivative:0},{location:0,value:.01,derivative:0},{location:.4,value:.03,derivative:.04},{location:1,value:.1,derivative:.049}]},derivative:0}]},derivative:0}]},t.factor={coordinate:"continents",points:[{location:-.19,value:3.95,derivative:0},{location:-.15,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:6.25,derivative:0}]},derivative:0},{location:.35,value:6.25,derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.9,value:6.25,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:6.25,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.9,value:6.25,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:6.25,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.62,value:6.25,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.47,derivative:0}]},derivative:0},{location:.35,value:5.47,derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.9,value:5.47,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.47,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.9,value:5.47,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.47,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.62,value:5.47,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:5.08,derivative:0}]},derivative:0},{location:.35,value:5.08,derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.9,value:5.08,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.08,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.9,value:5.08,derivative:0},{location:-.69,value:{coordinate:"weirdness",points:[{location:0,value:5.08,derivative:0},{location:.1,value:.625,derivative:0}]},derivative:0}]},derivative:0},{location:.62,value:5.08,derivative:0}]},derivative:0},{location:.06,value:{coordinate:"erosion",points:[{location:-.6,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.5,value:{coordinate:"weirdness",points:[{location:-.05,value:6.3,derivative:0},{location:.05,value:2.67,derivative:0}]},derivative:0},{location:-.35,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.25,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.1,value:{coordinate:"weirdness",points:[{location:-.05,value:2.67,derivative:0},{location:.05,value:6.3,derivative:0}]},derivative:0},{location:.03,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:.05,value:{coordinate:"ridges",points:[{location:.45,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:.7,value:1.56,derivative:0}]},derivative:0},{location:.4,value:{coordinate:"ridges",points:[{location:.45,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:.7,value:1.56,derivative:0}]},derivative:0},{location:.45,value:{coordinate:"ridges",points:[{location:-.7,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.15,value:1.37,derivative:0}]},derivative:0},{location:.55,value:{coordinate:"ridges",points:[{location:-.7,value:{coordinate:"weirdness",points:[{location:-.2,value:6.3,derivative:0},{location:.2,value:4.69,derivative:0}]},derivative:0},{location:-.15,value:1.37,derivative:0}]},derivative:0},{location:.58,value:4.69,derivative:0}]},derivative:0}]},t.jaggedness={coordinate:"continents",points:[{location:-.11,value:0,derivative:0},{location:.03,value:{coordinate:"erosion",points:[{location:-1,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.78,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.315,derivative:0},{location:.01,value:.15,derivative:0}]},derivative:0}]},derivative:0},{location:-.5775,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.315,derivative:0},{location:.01,value:.15,derivative:0}]},derivative:0}]},derivative:0},{location:-.375,value:0,derivative:0}]},derivative:0},{location:.65,value:{coordinate:"erosion",points:[{location:-1,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.78,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.5775,value:{coordinate:"ridges",points:[{location:.19999999,value:0,derivative:0},{location:.44999996,value:0,derivative:0},{location:1,value:{coordinate:"weirdness",points:[{location:-.01,value:.63,derivative:0},{location:.01,value:.3,derivative:0}]},derivative:0}]},derivative:0},{location:-.375,value:0,derivative:0}]},derivative:0}]},t}(),zi=function(){function t(t){var e=this;this.hoverHandle=void 0,this.builder=t,this.title=document.getElementById("layoutName"),this.canvas=document.getElementById("gridEditorCanvas"),this.splitIcon=new Path2D("M17.995,17.995C29.992,5.999,45.716,0,61.439,0s31.448,5.999,43.445,17.995c11.996,11.997,17.994,27.721,17.994,43.444 c0,15.725-5.998,31.448-17.994,43.445c-11.997,11.996-27.722,17.995-43.445,17.995s-31.448-5.999-43.444-17.995 C5.998,92.888,0,77.164,0,61.439C0,45.716,5.998,29.992,17.995,17.995L17.995,17.995z M57.656,31.182 c0-1.84,1.492-3.332,3.333-3.332s3.333,1.492,3.333,3.332v27.383h27.383c1.84,0,3.332,1.492,3.332,3.332 c0,1.841-1.492,3.333-3.332,3.333H64.321v27.383c0,1.84-1.492,3.332-3.333,3.332s-3.333-1.492-3.333-3.332V65.229H30.273 c-1.84,0-3.333-1.492-3.333-3.333c0-1.84,1.492-3.332,3.333-3.332h27.383V31.182L57.656,31.182z M61.439,6.665 c-14.018,0-28.035,5.348-38.731,16.044C12.013,33.404,6.665,47.422,6.665,61.439c0,14.018,5.348,28.036,16.043,38.731 c10.696,10.696,24.713,16.044,38.731,16.044s28.035-5.348,38.731-16.044c10.695-10.695,16.044-24.714,16.044-38.731 c0-14.017-5.349-28.035-16.044-38.73C89.475,12.013,75.457,6.665,61.439,6.665L61.439,6.665z");var n,i,r=void 0,o=!1;this.canvas.onmousemove=function(t){var s=e.getMousePosition(t);if(r){var a="x"===r.handle_type?s.mouse_x-n:s.mouse_y-n,l=.9*(p=e.canvas.width),u=.9*(_=e.canvas.height);if("x"===r.handle_type){var h=a/l*2.4,c=0===r.id?-1.2:e.xs[r.id-1],d=r.id===e.xs.length-1?1.2:e.xs[r.id+1];e.xs[r.id]=e.snap(i+h,c,d,.005)}else"y"===r.handle_type&&(h=a/u*2.4,c=0===r.id?-1.2:e.ys[r.id-1],d=e.double_ys[r.id]?r.id>=e.ys.length-2?1.2:e.ys[r.id+2]:r.id===e.ys.length-1?1.2:e.ys[r.id+1],e.ys[r.id]=e.snap(i+h,c,d,.005),e.double_ys[r.id]&&(e.ys[r.id+1]=e.ys[r.id]));e.hoverHandle=r,o=!0}else{var f=e.getHandle(s);e.hoverHandle=f,void 0===f?e.canvas.style.cursor="default":"x"===f.handle_type?e.canvas.style.cursor="ew-resize":"y"===f.handle_type?e.canvas.style.cursor="ns-resize":e.canvas.style.cursor="pointer"}if("erosion"===e.x_param&&"continentalness"===e.y_param){var p,_,v=.07*(p=e.canvas.width),m=.07*(_=e.canvas.height),g=(l=.93*p,u=.93*_,2.4*((s.mouse_x-v)/l-.5)),y=2.4*((s.mouse_y-m)/u-.5);$l.getInstance().splineDisplayManager.setPos({c:y,e:g}),$l.getInstance().splineDisplayManager.refresh()}e.drawRect()},this.canvas.onclick=function(n){var i=e.getMousePosition(n),r=e.getHandle(i);if(void 0!==r&&("add_x"===r.handle_type||"add_y"===r.handle_type||"edit_spline"===r.handle_type)){if("add_x"===r.handle_type)e.x_array?t.splitParam(e.x_param,r.id):(e.xs.splice(r.id+1,0,(e.xs[r.id]+e.xs[r.id+1])/2),e.builder.splines[$l.getInstance().sidebarManager.openedElement.key].splines.forEach((function(t){return t.splice(r.id+1,0,void 0)})));else if("add_y"===r.handle_type)if(e.y_array)t.splitParam(e.y_param,r.id);else{e.ys.splice(r.id+1,0,(e.ys[r.id]+e.ys[r.id+1])/2);for(var o=[],s=0;s<e.builder.splines[$l.getInstance().sidebarManager.openedElement.key].erosions.length;s++)o.push(void 0);e.builder.splines[$l.getInstance().sidebarManager.openedElement.key].splines.splice(r.id+1,0,o)}e.builder.hasChanges=!0,$l.getInstance().refresh({grids:!0,biome:{}})}},this.canvas.ondblclick=function(n){"y"===e.hoverHandle.handle_type&&"depth"===e.y_param&&(e.double_ys[e.hoverHandle.id]?t.deleteParam(e.y_param,e.hoverHandle.id):e.hoverHandle.id===e.ys.length-1?t.splitParam(e.y_param,e.hoverHandle.id-1,"end"):t.splitParam(e.y_param,e.hoverHandle.id,"start"),$l.getInstance().refresh({grids:!0,biome:{}}))},this.canvas.onmousedown=function(t){var s=e.getMousePosition(t),a=e.getHandle(s);void 0===a||"x"!==a.handle_type&&"y"!==a.handle_type||(r=a,o=!1,n="x"===a.handle_type?s.mouse_x:s.mouse_y,i="x"===a.handle_type?e.xs[a.id]:e.ys[a.id])},this.canvas.onmouseup=function(t){if(r&&("x"===r.handle_type||"y"===r.handle_type)){if(o){var n="y"===r.handle_type&&e.double_ys[r.id],s="x"===r.handle_type?e.xs:e.ys,a="x"===r.handle_type?e.x_array:e.y_array,l="x"===r.handle_type?e.x_param:e.y_param,u=0===r.id?void 0:s[r.id-1],h=n?r.id>=s.length-2?void 0:s[r.id+2]:r.id===s.length-1?void 0:s[r.id+1];if((s[r.id]===u||s[r.id]===h)&&(s.length<=2||!confirm("Deleting Segment. This will delete this segment from every defined Layout/Slice. Continue?")))return s[r.id]=i,n&&(s[r.id+1]=i),e.drawRect(),r=void 0,e.canvas.style.cursor="default",void $l.getInstance().refresh({grids:!0,biome:{}});if(a){for(var c=0;c<a.length;c++)a[c]=new pi.Param(s[c],s[c+1]);s[r.id]===u?(e.builder.deleteParam(l,r.id-1),$l.getInstance().refresh({grids:!0,biome:{}})):s[r.id]===h?("y"===r.handle_type&&e.double_ys[r.id]?e.builder.deleteParam(l,r.id+1):e.builder.deleteParam(l,r.id),$l.getInstance().refresh({grids:!0,biome:{}})):$l.getInstance().refresh({grids:!0})}else{if(s[r.id]===u||s[r.id]===h){var d=r.id;s.splice(d,1),e.builder.splines[$l.getInstance().sidebarManager.openedElement.key].splines.forEach((function(t){return t.splice(d,1)}))}$l.getInstance().refresh({spline:!0})}e.builder.hasChanges=!0}r=void 0}}}return t.prototype.snap=function(t,e,n,i){return t<e+.5*i?e:t>n-.5*i?n:t<e+i?e+i:t>n-i?n-i:.005*Math.round(t/.005)},t.prototype.getHandle=function(t){for(var e=this.canvas.width,n=this.canvas.height,i=.07*e,r=.07*n,o=.93*e,s=.93*n,a=0;a<this.xs.length-1;a++)if(this.xs[a+1]-this.xs[a]>=.1){var l=(this.xs[a]+this.xs[a+1])/2;if(t.mouse_x>(l/2.4+.5)*o+i-27.5&&t.mouse_y>r-60&&t.mouse_x<(l/2.4+.5)*o+i+27.5&&t.mouse_y<r-5)return{handle_type:"add_x",id:a}}for(var u=0;u<this.ys.length-1;u++)if(this.ys[u+1]-this.ys[u]>=.1){var h=(this.ys[u]+this.ys[u+1])/2;if(t.mouse_x>i-60&&t.mouse_y>(h/2.4+.5)*s+r-27.5&&t.mouse_x<i-5&&t.mouse_y<(h/2.4+.5)*s+r+27.5)return{handle_type:"add_y",id:u}}for(var c=void 0,d=41,f=0;f<this.xs.length;f++)l=this.xs[f],(v=Math.abs(t.mouse_x-((l/2.4+.5)*o+i)))<40&&v<d&&(c=f,d=v);var p=void 0,_=41;for(f=0;f<this.ys.length;f++){var v;h=this.ys[f],(v=Math.abs(t.mouse_y-((h/2.4+.5)*s+r)))<40&&v<_&&(p=f,_=v)}return d<_?{handle_type:"x",id:c}:_<41?{handle_type:"y",id:p}:void 0},t.prototype.drawRect=function(){var t,e=getComputedStyle(document.body),n=e.getPropertyValue("--secondary-bg-color"),i=e.getPropertyValue("--main-text-color"),r=(e.getPropertyValue("--secondary-text-color"),this.canvas.width),o=this.canvas.height,s=.07*r,a=.07*o,l=.93*r,u=.93*o,h=this.canvas.getContext("2d");h.clearRect(0,0,r,o);var c=this.ys[0],d=this.ys[this.ys.length-1];h.fillStyle=n,h.fillRect(s,a,l,u);for(var f=0;f<this.xs.length-1;f++)if(this.xs[f+1]-this.xs[f]>=.1){var p=(this.xs[f]+this.xs[f+1])/2;h.fillStyle="#222244",h.fillRect((p/2.4+.5)*l+s-27.5,a-60,55,55),h.translate((p/2.4+.5)*l+s-14,a-47.5),h.scale(.25,.25),h.fillStyle="white",h.fill(this.splitIcon),h.resetTransform()}for(f=0;f<this.xs.length;f++)p=this.xs[f],h.strokeStyle=this.xs[f-1]===p?"red":i,h.lineWidth=this.x_array?3:2,h.setLineDash(this.x_array?[1,0]:[3,3]),h.beginPath(),h.moveTo((p/2.4+.5)*l+s,(c/2.4+.5)*u+a),h.lineTo((p/2.4+.5)*l+s,(d/2.4+.5)*u+a),h.stroke(),this.hoverHandle&&("x"===this.hoverHandle.handle_type&&this.hoverHandle.id===f||"edit_spline"===this.hoverHandle.handle_type&&this.hoverHandle.id[0]===f)&&(h.setLineDash([5,10]),h.beginPath(),h.moveTo((p/2.4+.5)*l+s,a),h.lineTo((p/2.4+.5)*l+s,(c/2.4+.5)*u+a),h.stroke(),h.fillStyle=n,h.fillRect((p/2.4+.5)*l+s-40,a-60,80,55),h.fillStyle=this.xs[f-1]===p?"red":i,h.font="25px serif",h.textAlign="center",h.textBaseline="middle",h.fillText(p.toFixed(3),(p/2.4+.5)*l+s,a-30));for(var _=this.xs[0],v=this.xs[this.xs.length-1],m=0;m<this.ys.length-1;m++)if(this.ys[m+1]-this.ys[m]>=.1){var g=(this.ys[m]+this.ys[m+1])/2;h.fillStyle="#222244",h.fillRect(s-60,(g/2.4+.5)*u+a-27.5,55,55),h.fillStyle="white",h.translate(s-47.5,(g/2.4+.5)*u+a-15),h.scale(.25,.25),h.fillStyle="white",h.fill(this.splitIcon),h.resetTransform()}for(m=0;m<this.ys.length;m++){var y=this.ys[m];h.strokeStyle=this.double_ys[m]?"blue":this.ys[m-1]===y?"red":i,h.lineWidth=2,h.setLineDash([1,0]),h.beginPath(),h.moveTo((_/2.4+.5)*l+s,(y/2.4+.5)*u+a),h.lineTo((v/2.4+.5)*l+s,(y/2.4+.5)*u+a),h.stroke(),this.hoverHandle&&("y"===this.hoverHandle.handle_type&&this.hoverHandle.id===m||"edit_spline"===this.hoverHandle.handle_type&&this.hoverHandle.id[1]===m)&&(h.setLineDash([5,10]),h.beginPath(),h.moveTo(s,(y/2.4+.5)*u+a),h.lineTo((_/2.4+.5)*l+s,(y/2.4+.5)*u+a),h.stroke(),h.fillStyle=n,h.fillRect(s-85,(y/2.4+.5)*u+a-27.5,80,55),h.fillStyle=this.ys[m-1]===y?"red":i,h.font="25px serif",h.textAlign="center",h.textBaseline="middle",h.fillText(y.toFixed(3),s-42.5,(y/2.4+.5)*u+a))}if(h.fillStyle=i,"layout"!==$l.getInstance().sidebarManager.openedElement.key&&"edit_spline"===(null===(t=this.hoverHandle)||void 0===t?void 0:t.handle_type)){p=this.xs[this.hoverHandle.id[0]];var b=this.ys[this.hoverHandle.id[1]];h.fillRect((p/2.4+.5)*l+s-10,(b/2.4+.5)*u+a-10,20,20)}},t.prototype.getMousePosition=function(t){var e=this.canvas.getBoundingClientRect(),n=this.canvas.width/e.width,i=this.canvas.height/e.height;return{mouse_x:(t.clientX-e.left)*n,mouse_y:(t.clientY-e.top)*i}},t.prototype.refresh=function(){var t=this;this.canvas.parentElement.classList.remove("hidden"),this.title.readOnly=!1,$l.getInstance().splineDisplayManager.setWeirdnesses([]),"slice"===$l.getInstance().sidebarManager.openedElement.key?(this.title.value="Slice Grid",this.x_array=this.builder.erosions,this.y_array=this.builder.continentalnesses,this.x_param="erosion",this.y_param="continentalness",this.xs=this.x_array.map((function(t){return t.max})),this.xs.unshift(this.x_array[0].min),this.ys=this.y_array.map((function(t){return t.max})),this.ys.unshift(this.y_array[0].min),this.double_ys=this.ys.map((function(){return!1})),$l.getInstance().setLabels("Erosion","Continentalness")):"layout"===$l.getInstance().sidebarManager.openedElement.key?(this.title.value="Layout Grid",this.x_array=this.builder.humidities,this.y_array=this.builder.temperatures,this.x_param="humidity",this.y_param="temperature",this.xs=this.x_array.map((function(t){return t.max})),this.xs.unshift(this.x_array[0].min),this.ys=this.y_array.map((function(t){return t.max})),this.ys.unshift(this.y_array[0].min),this.double_ys=this.ys.map((function(){return!1})),$l.getInstance().setLabels("Humidity","Temperature")):"dimension"===$l.getInstance().sidebarManager.openedElement.key?(this.title.value="Biome Grid",this.x_array=this.builder.weirdnesses,this.y_array=this.builder.depths,this.x_param="weirdness",this.y_param="depth",this.xs=this.x_array.map((function(t){return t.max})),this.xs.unshift(this.x_array[0].min),this.ys=[this.y_array[0].min],this.double_ys=[!1],this.y_array.forEach((function(e){e.min===e.max?(t.double_ys[t.double_ys.length-1]=!0,t.double_ys.push(!0),t.ys.push(e.max)):(t.double_ys.push(!1),t.ys.push(e.max))})),$l.getInstance().setLabels("Weirdness","Depth")):(this.title.value="offset"===$l.getInstance().sidebarManager.openedElement.key?"Offset Spline Grid":"factor"===$l.getInstance().sidebarManager.openedElement.key?"Factor Spline Grid":"Jaggedness Spline Grid",this.xs=this.builder.splines[$l.getInstance().sidebarManager.openedElement.key].erosions,this.ys=this.builder.splines[$l.getInstance().sidebarManager.openedElement.key].continentalnesses,this.x_array=void 0,this.y_array=void 0,this.x_param="erosion",this.y_param="continentalness",$l.getInstance().setLabels("Erosion","Continentalness")),this.drawRect()},t.prototype.hide=function(){this.canvas.parentElement.classList.add("hidden")},t}(),Mi=n(733),Ci=function(){function t(){}return t.prototype.setHighlight=function(t,e){},t.prototype.draw=function(t,e,n,i,r,o,s){t.fillStyle="gray",t.fillRect(e,n,i,r),t.fillStyle="white",t.font=.75*i+"px serif",t.textAlign="center",t.textBaseline="middle",t.fillText("?",e+.5*i,n+.55*r)},t}(),Ni=function(){function t(){this.allowEdit=!1,this.name="- Unassigned -",this.type_id=1e3}return t.create=function(e){return new t},t.prototype.lookupKey=function(t,e){return this.getKey()},t.prototype.lookup=function(t,e){return this},t.prototype.lookupRecursive=function(t,e){return this},t.prototype.lookupRecursiveWithTracking=function(t,e,n){return{slice:void 0,layout:void 0,biome:void 0}},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new Ci),this.renderer},t.prototype.getKey=function(){return"unassigned"},t.prototype.has=function(t,e){return t===this.getKey()},t}(),Oi=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(s,a)}l((i=i.apply(t,e||[])).next())}))},Bi=function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ri=function(){function t(t){this.builder=t}return t.prototype.findIdx=function(t,e){return t<e[0].min?0:t>e[e.length-1].max?e.length-1:e.findIndex((function(e){return e.min<t&&t<e.max}))},t.prototype.generateZip=function(){return Oi(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x=this;return Bi(this,(function(k){switch(k.label){case 0:return t=this.builder.getVersionInfo(),e=new Mi,n=e.folder("data"),r=(i=e).file,o=["pack.mcmeta"],[4,fetch("export_presets/"+this.builder.targetVersion+"/pack.mcmeta")];case 1:return[4,k.sent().text()];case 2:return r.apply(i,o.concat([k.sent()])),a=(s=e).file,l=["pack.png"],[4,fetch("icons/icon_128.png")];case 3:if(a.apply(s,l.concat([k.sent().blob()])),this.builder.exportDimension){for(u=this.builder.dimensionName.split(":",2),c=u[0],d=u[1],f=n.folder(c).folder("dimension"),p=d.split("/"),_=p[p.length-1],v=0;v<p.length-1;v++)f=f.folder(p[v]);f.file(_+".json",this.getDimensionJSON())}if(!this.builder.exportSplines)return[3,6];if(!t.hasTerrainShaper)return[3,5];for(h=this.builder.noiseSettingsName.split(":",2),c=h[0],d=h[1],f=n.folder(c).folder("worldgen").folder("noise_settings"),p=d.split("/"),_=p[p.length-1],v=0;v<p.length-1;v++)f=f.folder(p[v]);return g=(m=f).file,y=[_+".json"],[4,this.getNoiseSettingJSON()];case 4:return g.apply(m,y.concat([k.sent()])),[3,6];case 5:t.hasDensityFunctions?((b=n.folder("minecraft").folder("worldgen").folder("density_function").folder("overworld")).file("offset.json",fetch("export_presets/"+this.builder.targetVersion+"/offset.json").then((function(t){return t.text()})).then((function(t){return t.replace("%s",JSON.stringify(x.builder.splines.offset.export()))}))),b.file("factor.json",fetch("export_presets/"+this.builder.targetVersion+"/factor.json").then((function(t){return t.text()})).then((function(t){return t.replace("%s",JSON.stringify(x.builder.splines.factor.export()))}))),b.file("jaggedness.json",fetch("export_presets/"+this.builder.targetVersion+"/jaggedness.json").then((function(t){return t.text()})).then((function(t){return t.replace("%s",JSON.stringify(x.builder.splines.jaggedness.export()))})))):console.warn("Target version does not support spline export"),k.label=6;case 6:return this.builder.exportNoises&&((w=n.folder("minecraft").folder("worldgen").folder("noise")).file("continentalness.json",JSON.stringify(this.builder.noiseSettings.continentalness)),w.file("erosion.json",JSON.stringify(this.builder.noiseSettings.erosion)),w.file("ridge.json",JSON.stringify(this.builder.noiseSettings.weirdness)),w.file("temperature.json",JSON.stringify(this.builder.noiseSettings.temperature)),w.file("vegetation.json",JSON.stringify(this.builder.noiseSettings.humidity)),w.file("offset.json",JSON.stringify(this.builder.noiseSettings.shift))),[2,e]}}))}))},t.prototype.insertIntoDirectory=function(t){return Oi(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,k,E,S,T,A,P,I,L,z,M,C=this;return Bi(this,(function(N){switch(N.label){case 0:e=this.builder.getVersionInfo(),n=function(t,e){return Oi(C,void 0,void 0,(function(){var n;return Bi(this,(function(r){switch(r.label){case 0:return[4,t.createWritable()];case 1:return(n=r.sent()).write(e),i.push(n),[2]}}))}))},i=[],N.label=1;case 1:return N.trys.push([1,60,,61]),[4,t.getDirectoryHandle("data")];case 2:return r=N.sent(),this.builder.exportDimension?(o=this.builder.dimensionName.split(":",2),a=o[0],l=o[1],[4,r.getDirectoryHandle(a,{create:!0})]):[3,12];case 3:return[4,N.sent().getDirectoryHandle("dimension",{create:!0})];case 4:u=N.sent(),h=l.split("/"),c=h[h.length-1],d=0,N.label=5;case 5:return d<h.length-1?[4,u.getDirectoryHandle(h[d],{create:!0})]:[3,8];case 6:u=N.sent(),N.label=7;case 7:return d++,[3,5];case 8:return[4,u.getFileHandle(c+".json",{create:!0})];case 9:return[4,N.sent().createWritable()];case 10:return[4,(_=N.sent()).write(this.getDimensionJSON())];case 11:N.sent(),i.push(_),N.label=12;case 12:return this.builder.exportSplines?e.hasTerrainShaper?(s=this.builder.noiseSettingsName.split(":",2),a=s[0],l=s[1],[4,r.getDirectoryHandle(a,{create:!0})]):[3,26]:[3,43];case 13:return[4,N.sent().getDirectoryHandle("worldgen",{create:!0})];case 14:return[4,N.sent().getDirectoryHandle("noise_settings",{create:!0})];case 15:u=N.sent(),h=l.split("/"),c=h[h.length-1],d=0,N.label=16;case 16:return d<h.length-1?[4,u.getDirectoryHandle(h[d],{create:!0})]:[3,19];case 17:u=N.sent(),N.label=18;case 18:return d++,[3,16];case 19:return[4,u.getFileHandle(c+".json",{create:!0})];case 20:return[4,(f=N.sent()).getFile()];case 21:return[4,N.sent().text()];case 22:return p=N.sent(),[4,f.createWritable()];case 23:return _=N.sent(),m=(v=_).write,[4,this.getNoiseSettingJSON(p)];case 24:return[4,m.apply(v,[N.sent()])];case 25:return N.sent(),i.push(_),[3,43];case 26:return e.hasDensityFunctions?[4,r.getDirectoryHandle("minecraft",{create:!0})]:[3,42];case 27:return[4,N.sent().getDirectoryHandle("worldgen",{create:!0})];case 28:return[4,N.sent().getDirectoryHandle("density_function",{create:!0})];case 29:return g=N.sent().getDirectoryHandle("overworld",{create:!0}),y=n,[4,g];case 30:return[4,N.sent().getFileHandle("offset.json",{create:!0})];case 31:return b=[N.sent()],[4,fetch("export_presets/"+this.builder.targetVersion+"/offset.json").then((function(t){return t.text()})).then((function(t){return t.replace("%s",JSON.stringify(C.builder.splines.offset.export()))}))];case 32:return[4,y.apply(void 0,b.concat([N.sent()]))];case 33:return N.sent(),w=n,[4,g];case 34:return[4,N.sent().getFileHandle("factor.json",{create:!0})];case 35:return x=[N.sent()],[4,fetch("export_presets/"+this.builder.targetVersion+"/factor.json").then((function(t){return t.text()})).then((function(t){return t.replace("%s",JSON.stringify(C.builder.splines.factor.export()))}))];case 36:return[4,w.apply(void 0,x.concat([N.sent()]))];case 37:return N.sent(),k=n,[4,g];case 38:return[4,N.sent().getFileHandle("jaggedness.json",{create:!0})];case 39:return E=[N.sent()],[4,fetch("export_presets/"+this.builder.targetVersion+"/jaggedness.json").then((function(t){return t.text()})).then((function(t){return t.replace("%s",JSON.stringify(C.builder.splines.jaggedness.export()))}))];case 40:return[4,k.apply(void 0,E.concat([N.sent()]))];case 41:return N.sent(),[3,43];case 42:console.warn("Target version does not support spline export"),N.label=43;case 43:return this.builder.exportNoises?[4,r.getDirectoryHandle("minecraft",{create:!0})]:[3,59];case 44:return[4,N.sent().getDirectoryHandle("worldgen",{create:!0})];case 45:return[4,N.sent().getDirectoryHandle("noise",{create:!0})];case 46:return S=N.sent(),T=n,[4,S.getFileHandle("continentalness.json",{create:!0})];case 47:return[4,T.apply(void 0,[N.sent(),JSON.stringify(this.builder.noiseSettings.continentalness)])];case 48:return N.sent(),A=n,[4,S.getFileHandle("erosion.json",{create:!0})];case 49:return[4,A.apply(void 0,[N.sent(),JSON.stringify(this.builder.noiseSettings.erosion)])];case 50:return N.sent(),P=n,[4,S.getFileHandle("ridge.json",{create:!0})];case 51:return[4,P.apply(void 0,[N.sent(),JSON.stringify(this.builder.noiseSettings.weirdness)])];case 52:return N.sent(),I=n,[4,S.getFileHandle("temperature.json",{create:!0})];case 53:return[4,I.apply(void 0,[N.sent(),JSON.stringify(this.builder.noiseSettings.temperature)])];case 54:return N.sent(),L=n,[4,S.getFileHandle("vegetation.json",{create:!0})];case 55:return[4,L.apply(void 0,[N.sent(),JSON.stringify(this.builder.noiseSettings.humidity)])];case 56:return N.sent(),z=n,[4,S.getFileHandle("offset.json",{create:!0})];case 57:return[4,z.apply(void 0,[N.sent(),JSON.stringify(this.builder.noiseSettings.shift)])];case 58:N.sent(),N.label=59;case 59:return i.forEach((function(t){t.close()})),[3,61];case 60:throw M=N.sent(),i.forEach((function(t){t.abort()})),M;case 61:return[2]}}))}))},t.prototype.getDimensionJSON=function(){for(var t=[],e=this.builder.fixedNoises.depth?this.findIdx(this.builder.fixedNoises.depth,this.builder.weirdnesses):void 0,n=this.builder.fixedNoises.weirdness?this.findIdx(this.builder.fixedNoises.weirdnesses,this.builder.weirdnesses):void 0,i=this.builder.fixedNoises.continentalness?this.findIdx(this.builder.fixedNoises.continentalness,this.builder.continentalnesses):void 0,r=this.builder.fixedNoises.erosion?this.findIdx(this.builder.fixedNoises.erosion,this.builder.erosions):void 0,o=this.builder.fixedNoises.temperature?this.findIdx(this.builder.fixedNoises.temperature,this.builder.temperatures):void 0,s=this.builder.fixedNoises.humidity?this.findIdx(this.builder.fixedNoises.humidity,this.builder.humidities):void 0,a=0;a<this.builder.depths.length;a++){t[a]=[];for(var l=0;l<this.builder.weirdnesses.length;l++){t[a][l]=[];for(var u=0;u<this.builder.continentalnesses.length;u++){t[a][l][u]=[];for(var h=0;h<this.builder.erosions.length;h++){t[a][l][u][h]=[];for(var c=0;c<this.builder.temperatures.length;c++){t[a][l][u][h][c]=[];for(var d=0;d<this.builder.humidities.length;d++){var f=this.builder.dimension.lookupRecursive({d:null!=e?e:a,w:null!=n?n:l,c:null!=i?i:u,e:null!=r?r:h,h:null!=s?s:d,t:null!=o?o:c},"Any");void 0===f||f instanceof Ni?t[a][l][u][h][c][d]={biome:"",done:!0}:f instanceof Ti?t[a][l][u][h][c][d]={biome:f.name,done:!1}:console.warn("Data structure corruption at w: "+l,NaN+u+" e: "+h+" t: "+c+" h: "+d+" - Found element of type "+f.constructor.name)}}}}}}var p=[];for(a=0;a<this.builder.depths.length;a++)for(l=0;l<this.builder.weirdnesses.length;l++)for(u=0;u<this.builder.continentalnesses.length;u++)for(h=0;h<this.builder.erosions.length;h++)for(c=0;c<this.builder.temperatures.length;c++)for(d=0;d<this.builder.humidities.length;d++)if(!t[a][l][u][h][c][d].done){var _=void 0;for(_=h;_<this.builder.erosions.length&&this.checkRange(t,l,a,u,h,c,d,l,a,u,_,c,d);_++);_--;var v=void 0;for(v=l;v<this.builder.weirdnesses.length&&this.checkRange(t,l,a,u,h,c,d,v,a,u,_,c,d);v++);v--;var m=void 0;for(m=a;m<this.builder.depths.length&&this.checkRange(t,l,a,u,h,c,d,v,m,u,_,c,d);m++);m--;var g=void 0;for(g=u;g<this.builder.continentalnesses.length&&this.checkRange(t,l,a,u,h,c,d,v,m,g,_,c,d);g++);g--;var y=void 0;for(y=d;y<this.builder.humidities.length&&this.checkRange(t,l,a,u,h,c,d,v,m,g,_,c,y);y++);y--;var b=void 0;for(b=c;b<this.builder.temperatures.length&&this.checkRange(t,l,a,u,h,c,d,v,m,g,_,b,y);b++);b--,this.setDone(t,l,a,u,h,c,d,v,m,g,_,b,y),p.push({parameters:{weirdness:[this.builder.weirdnesses[l].min,this.builder.weirdnesses[v].max],continentalness:[this.builder.continentalnesses[u].min,this.builder.continentalnesses[g].max],erosion:[this.builder.erosions[h].min,this.builder.erosions[_].max],temperature:[this.builder.temperatures[c].min,this.builder.temperatures[b].max],humidity:[this.builder.humidities[d].min,this.builder.humidities[y].max],depth:[this.builder.depths[a].min,this.builder.depths[m].max],offset:0},biome:t[a][l][u][h][c][d].biome})}var w={type:"minecraft:overworld",generator:{biome_source:{biomes:p,type:"minecraft:multi_noise"},seed:this.builder.getVersionInfo().fixedSeed?Number(this.builder.seed):void 0,settings:this.builder.noiseSettingsName,type:"minecraft:noise"}};return console.log("Emmited "+p.length+" Biome settings..."),JSON.stringify(w)},t.prototype.checkRange=function(t,e,n,i,r,o,s,a,l,u,h,c,d){for(var f,p,_,v,m,g,y,b,w,x,k,E,S=t[n][e][i][r][o][s].biome,T=n;T<=l;T++)for(var A=e;A<=a;A++)for(var P=i;P<=u;P++)for(var I=r;I<=h;I++)for(var L=o;L<=c;L++)for(var z=s;z<=d;z++)if(void 0===(null===(g=null===(m=null===(v=null===(_=null===(p=null===(f=t[T])||void 0===f?void 0:f[A])||void 0===p?void 0:p[P])||void 0===_?void 0:_[I])||void 0===v?void 0:v[L])||void 0===m?void 0:m[z])||void 0===g?void 0:g.biome)&&console.warn("undefined element at w: "+A+" c: "+P+" e: "+I+" t: "+L+" h: "+z),(null===(E=null===(k=null===(x=null===(w=null===(b=null===(y=t[T])||void 0===y?void 0:y[A])||void 0===b?void 0:b[P])||void 0===w?void 0:w[I])||void 0===x?void 0:x[L])||void 0===k?void 0:k[z])||void 0===E?void 0:E.biome)!==S)return!1;return!0},t.prototype.setDone=function(t,e,n,i,r,o,s,a,l,u,h,c,d){for(var f=n;f<=l;f++)for(var p=e;p<=a;p++)for(var _=i;_<=u;_++)for(var v=r;v<=h;v++)for(var m=o;m<=c;m++)for(var g=s;g<=d;g++)t[f][p][_][v][m][g].done=!0},t.prototype.getNoiseSettingJSON=function(t){return Oi(this,void 0,void 0,(function(){var e,n,i,r,o,s,a;return Bi(this,(function(l){if(!this.builder.getVersionInfo().hasTerrainShaper)throw new Error("trying to export noise settings in unsupporeted version");if(e={offset:$l.getInstance().builder.splines.offset.exportLegacy($l.getInstance().builder.fixedNoises),factor:$l.getInstance().builder.splines.factor.exportLegacy($l.getInstance().builder.fixedNoises),jaggedness:$l.getInstance().builder.splines.jaggedness.exportLegacy($l.getInstance().builder.fixedNoises)},n=JSON.stringify(e),void 0===t||""===t)return[2,fetch("export_presets/"+this.builder.targetVersion+"/noise_settings.json").then((function(t){return t.text()})).then((function(t){return t.replace("%s",n)}))];if(i=JSON.parse(t),r=t.indexOf('"terrain_shaper":'),o=t.indexOf("{",r),t.indexOf(",",r)<o)throw new Error("terrain shaper not of correct format in file");if(s=this.findClosingBracket(t,o),a=t.substring(0,o)+n+t.substring(s+1),i.noise.terrain_shaper=e,JSON.stringify(JSON.parse(a))!==JSON.stringify(i))throw new Error("inserting terrain shaper failed");return[2,a]}))}))},t.prototype.findClosingBracket=function(t,e){for(var n=["{","["],i=["}","]"],r=[],o=e;;){if(o>=t.length)throw new Error("Unclosed Brackets");var s=t[o],a=n.indexOf(s);if(a>=0)r.push(a);else{var l=i.indexOf(s);if(l>=0&&r.pop()!==l)throw new Error("Mismatched Brackets")}if(0===r.length)return o;o++}},t}(),Di=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(s,a)}l((i=i.apply(t,e||[])).next())}))},Fi=function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Zi=function(){function t(){}return t.loadVanilla=function(t){var e=this;this.confirmUnsavedChanges()&&($l.getInstance().builder.hasChanges=!1,fetch(t).then((function(t){return t.text()})).then((function(t){e.fileHandle=void 0,e.fileName="New Snowcapped File.snowcapped.json",$l.getInstance().builder.loadJSON(JSON.parse(t)),$l.getInstance().sidebarManager.openElement({type:"dimension",key:"dimension"}),$l.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})})))},t.createClickHandlers=function(){var t=this;this.loadVanilla118Button=document.getElementById("loadVanilla118Button"),this.loadVanilla119Button=document.getElementById("loadVanilla119Button"),this.loadEmptyButton=document.getElementById("loadEmptyButton"),this.openButton=document.getElementById("openButton"),this.saveButton=document.getElementById("saveButton"),this.saveAsButton=document.getElementById("saveAsButton"),this.exportZipButton=document.getElementById("exportZipButton"),this.exportInsertButton=document.getElementById("exportInsertButton"),this.settingsButton=document.getElementById("settingsButton"),this.toggleDarkmodeButton=document.getElementById("toggleDarkmodeButton"),this.loadVanilla118Button.onclick=function(e){t.loadVanilla("minecraft_overworld_1_18.snowcapped.json")},this.loadVanilla119Button.onclick=function(e){t.loadVanilla("minecraft_overworld_1_19.snowcapped.json")},this.loadEmptyButton.onclick=function(e){t.confirmUnsavedChanges()&&($l.getInstance().builder.hasChanges=!1,fetch("empty.snowcapped.json").then((function(t){return t.text()})).then((function(e){t.fileHandle=void 0,t.fileName="New Snowcapped File.snowcapped.json",$l.getInstance().builder.loadJSON(JSON.parse(e)),$l.getInstance().sidebarManager.openElement({type:"dimension",key:"dimension"}),$l.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})})))},this.openButton.onclick=function(e){return Di(t,void 0,void 0,(function(){var t,e,n,i=this;return Fi(this,(function(r){switch(r.label){case 0:return this.confirmUnsavedChanges()?($l.getInstance().builder.hasChanges=!1,"showOpenFilePicker"in window?(t=this,[4,window.showOpenFilePicker({types:[{description:"Snowcapped File",accept:{"application/json":[".snowcapped.json"]}},{description:"All JSON files",accept:{"application/json":[".json"]}}]})]):[3,4]):[2];case 1:return t.fileHandle=r.sent()[0],this.fileName=this.fileHandle.name,[4,this.fileHandle.getFile()];case 2:return[4,r.sent().text()];case 3:return e=r.sent(),$l.getInstance().builder.loadJSON(JSON.parse(e)),$l.getInstance().sidebarManager.openElement({type:"dimension",key:"dimension"}),$l.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0}),[3,5];case 4:(n=document.createElement("input")).type="file",n.accept=".snowcapped.json,.json",n.onchange=function(t){var e=t.target.files[0],n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(t){i.fileHandle=void 0,i.fileName=e.name;var n=t.target.result;$l.getInstance().builder.loadJSON(JSON.parse(n)),$l.getInstance().sidebarManager.openElement({type:"dimension",key:"dimension"}),$l.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})},console.log(e)},n.click(),r.label=5;case 5:return this.updateTitle(),[2]}}))}))};var e=function(){return Di(t,void 0,void 0,(function(){var t,e,n,i,r;return Fi(this,(function(o){switch(o.label){case 0:return $l.getInstance().builder.is_experimental_upgraded&&!confirm("You are currently using an experimental version of Snowcapped. Save files from this version can not be loaded in the stable release. Please don't override your old file!")?[2]:(t=JSON.stringify($l.getInstance().builder.toJSON()),"showSaveFilePicker"in window?(e=this,[4,window.showSaveFilePicker({types:[{description:"Snowcapped File",accept:{"application/json":[".snowcapped.json"]}},{description:"All JSON files",accept:{"application/json":[".json"]}}],suggestedName:this.fileName})]):[3,5]);case 1:return e.fileHandle=o.sent(),this.fileName=this.fileHandle.name,[4,this.fileHandle.createWritable()];case 2:return[4,(n=o.sent()).write(JSON.stringify($l.getInstance().builder.toJSON()))];case 3:return o.sent(),[4,n.close()];case 4:return o.sent(),$l.getInstance().builder.is_experimental_upgraded=!1,[3,6];case 5:i=new Blob([t],{type:"text/plain"}),(r=document.createElement("a")).download=this.fileName,r.href=window.URL.createObjectURL(i),r.click(),o.label=6;case 6:return $l.getInstance().builder.hasChanges=!1,this.updateTitle(),[2]}}))}))},n=function(n){return Di(t,void 0,void 0,(function(){var t;return Fi(this,(function(n){switch(n.label){case 0:return!this.fileHandle||$l.getInstance().builder.is_experimental_upgraded?[3,4]:[4,this.fileHandle.createWritable()];case 1:return[4,(t=n.sent()).write(JSON.stringify($l.getInstance().builder.toJSON()))];case 2:return n.sent(),[4,t.close()];case 3:return n.sent(),$l.getInstance().builder.hasChanges=!1,this.updateTitle(),[3,5];case 4:e(),n.label=5;case 5:return[2]}}))}))};this.saveAsButton.onclick=e,this.saveButton.onclick=n,document.addEventListener("keydown",(function(t){(t.metaKey||t.ctrlKey)&&"s"===t.key&&(t.preventDefault(),n())})),this.exportZipButton.onclick=function(e){return Di(t,void 0,void 0,(function(){var t,e,n,i;return Fi(this,(function(r){switch(r.label){case 0:return[4,new Ri($l.getInstance().builder).generateZip()];case 1:return[4,r.sent().generateAsync({type:"blob"})];case 2:return t=r.sent(),"showSaveFilePicker"in window?(e=this,[4,window.showSaveFilePicker({types:[{description:"Zip Files",accept:{"application/zip":[".zip"]}}],suggestedName:this.fileName.replace(".snowcapped.json","").replace(".json","")+".zip"})]):[3,7];case 3:return e.fileHandle=r.sent(),[4,this.fileHandle.createWritable()];case 4:return[4,(n=r.sent()).write(t)];case 5:return r.sent(),[4,n.close()];case 6:return r.sent(),[3,8];case 7:(i=document.createElement("a")).download=this.fileName.replace(".snowcapped.json","").replace(".json","")+".zip",i.href=window.URL.createObjectURL(t),i.click(),r.label=8;case 8:return[2]}}))}))},this.exportInsertButton.onclick=function(e){return Di(t,void 0,void 0,(function(){var t,e,n;return Fi(this,(function(i){switch(i.label){case 0:return"showDirectoryPicker"in window?[4,window.showDirectoryPicker()]:(alert("Inserting into Datapack is not supported in your browser"),[2]);case 1:t=i.sent(),e=new Ri($l.getInstance().builder),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,e.insertIntoDirectory(t)];case 3:return i.sent(),[3,5];case 4:return n=i.sent(),alert("Could not insert into datapack: "+n),[3,5];case 5:return[2]}}))}))},this.settingsButton.onclick=function(e){var n=!document.getElementById("settings").classList.toggle("hidden");document.getElementById("editor").classList.toggle("hidden",n),t.settingsButton.classList.toggle("open",n)},this.toggleDarkmodeButton.onclick=function(e){var n=document.body.classList.toggle("light");t.toggleDarkmodeButton.children[0].src=n?"images/moon.svg":"images/sun.svg",$l.getInstance().refresh({})},window.onbeforeunload=function(t){if($l.getInstance().builder.hasChanges)return"You have unsaved changes. Continue?"}},t.confirmUnsavedChanges=function(){return!$l.getInstance().builder.hasChanges||confirm("You have unsaved changes. Continue?")},t.updateTitle=function(){document.title=($l.getInstance().builder.hasChanges?"*":"")+this.fileName.replace(".snowcapped.json","").replace(".json","")+" - Snowcapped"},t.toggleAction=function(t,e){document.getElementById(t).classList.toggle("hidden",!e)},t.fileName="New Snowcapped File.snowcapped.json",t}();function ji(t,e,n){return(1-n)*t+n*e}var Ui=function(){function t(t){var e=this;this.builder=t,this.title=document.getElementById("layoutName"),this.canvas=document.getElementById("layoutEditorCanvas"),this.backButton=document.getElementById("backButton");var n=document.getElementById("layoutEditorTooltip"),i=n.getElementsByClassName("name")[0],r=n.getElementsByClassName("noises")[0],o=n.getElementsByClassName("noise_x")[0],s=n.getElementsByClassName("noise_y")[0];this.title.onchange=function(t){e.layout.name=e.title.value,e.builder.hasChanges=!0,$l.getInstance().refresh({})},this.canvas.onmousemove=function(a){var l=e.layout.getRenderer();e.mouse_position=e.getMousePosition(a);var u=l.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,e.mouse_position.mouse_x,e.mouse_position.mouse_y);if(void 0===u||-1===u.indexes.d)return n.classList.add("hidden"),Zi.toggleAction("paint",!1),Zi.toggleAction("paint-mode",!1),void Zi.toggleAction("open",!1);Zi.toggleAction("paint",!0),e.canvas.focus(),n.style.left=Math.min(a.pageX+20,document.body.clientWidth-n.clientWidth)+"px",n.style.top=a.pageY+15+"px",n.classList.remove("hidden");var h=e.layout.lookup(u.indexes,u.mode);if(e.layout instanceof iu?h instanceof ou?(Zi.toggleAction("paint-mode",!1),h=h.getElement(u.mode)):Zi.toggleAction("paint-mode",!0):Zi.toggleAction("paint-mode",!1),h instanceof iu&&"slice"===h.getType()?(i.innerHTML="&crarr; "+h.name+" (Slice)",Zi.toggleAction("open",!0),Zi.toggleAction("remove",!0)):h instanceof iu&&"layout"===h.getType()?(i.innerHTML="&crarr; "+h.name+" (Layout)",Zi.toggleAction("open",!0),Zi.toggleAction("remove",!0)):h instanceof Ti?(i.innerHTML=h.name,Zi.toggleAction("open",!1),Zi.toggleAction("remove",!0)):(i.innerHTML="Unassigned",Zi.toggleAction("open",!1),Zi.toggleAction("remove",!1)),r.classList.remove("hidden"),"dimension"===e.layout.getType()?(o.innerHTML="Weirdness: ["+e.builder.weirdnesses[u.indexes.w].min.toFixed(3)+", "+e.builder.weirdnesses[u.indexes.w].max.toFixed(3)+"]",s.innerHTML="Depth: ["+e.builder.depths[u.indexes.d].min.toFixed(3)+", "+e.builder.depths[u.indexes.d].max.toFixed(3)+"]"):"slice"===e.layout.getType()?(o.innerHTML="Erosion: ["+e.builder.erosions[u.indexes.e].min.toFixed(3)+", "+e.builder.erosions[u.indexes.e].max.toFixed(3)+"]",s.innerHTML="Continentalness: ["+e.builder.continentalnesses[u.indexes.c].min.toFixed(3)+", "+e.builder.continentalnesses[u.indexes.c].max.toFixed(3)+"]"):"layout"===e.layout.getType()&&(o.innerHTML="Humitiy: ["+e.builder.humidities[u.indexes.h].min.toFixed(3)+", "+e.builder.humidities[u.indexes.h].max.toFixed(3)+"]",s.innerHTML="Temperature: ["+e.builder.temperatures[u.indexes.t].min.toFixed(3)+", "+e.builder.temperatures[u.indexes.t].max.toFixed(3)+"]"),e.layout instanceof iu&&"slice"===e.layout.getType()){var c=t.continentalnesses[u.indexes.c],d=ji(c.min,c.max,u.local_t),f=t.erosions[u.indexes.e],p=ji(f.min,f.max,u.local_h);$l.getInstance().splineDisplayManager.setPos({c:d,e:p}),$l.getInstance().splineDisplayManager.refresh()}},this.canvas.onmouseleave=function(t){n.classList.add("hidden"),$l.getInstance().splineDisplayManager.setPos(void 0),$l.getInstance().splineDisplayManager.refresh(),Zi.toggleAction("paint",!1),Zi.toggleAction("paint-mode",!1),Zi.toggleAction("open",!1),Zi.toggleAction("remove",!1)},this.canvas.onclick=function(t){var n=e.layout.getRenderer(),i=e.getMousePosition(t),r=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);void 0!==r&&e.handleInteraction(r.indexes,r.mode,t.ctrlKey||t.metaKey?"add_alt":t.altKey?"pick":"add")},this.canvas.onauxclick=function(t){if(1===t.button){var n=e.layout.getRenderer(),i=e.getMousePosition(t),r=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);if(void 0===r)return;e.handleInteraction(r.indexes,r.mode,"pick")}},this.canvas.oncontextmenu=function(t){var n=e.layout.getRenderer(),i=e.getMousePosition(t),r=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);void 0!==r&&(e.handleInteraction(r.indexes,r.mode,"open"),t.preventDefault())},this.canvas.onkeydown=function(t){"z"===t.key&&(t.ctrlKey||t.metaKey)&&(e.undo(),$l.getInstance().refresh({biome:{}}))},this.canvas.onkeyup=function(t){if("Delete"===t.key){var n=e.layout.getRenderer(),i=e.mouse_position,r=n.getIdsFromPosition(0,0,e.canvas.width,e.canvas.height,i.mouse_x,i.mouse_y);if(void 0===r)return;e.handleInteraction(r.indexes,r.mode,"remove"),t.preventDefault}},this.backButton.onclick=function(){$l.getInstance().sidebarManager.back()}}return t.prototype.highlight=function(t,e){var n=this.builder.getLayoutElement($l.getInstance().sidebarManager.openedElement.key);n instanceof iu&&(this.layout=n),this.layout.getRenderer().setHighlight(t,e)},t.prototype.getMousePosition=function(t){var e=this.canvas.getBoundingClientRect(),n=this.canvas.width/e.width,i=this.canvas.height/e.height;return{mouse_x:(t.clientX-e.left)*n,mouse_y:(t.clientY-e.top)*i}},t.prototype.handleInteraction=function(t,e,n){var i;if(-1===t.d)return"add"!==n&&"add_alt"!==n||(this.builder.modes[t.w]="A"===this.builder.modes[t.w]?"B":"A"),void $l.getInstance().refresh({biome:{w:t.w}});var r=this.layout.lookup(t,e),o=r;o instanceof ou&&(o="A"===e?this.builder.getLayoutElement(o.elementA):this.builder.getLayoutElement(o.elementB));var s=null===(i=$l.getInstance().sidebarManager.selectedElement)||void 0===i?void 0:i.key;if("remove"===n&&(s="unassigned",n="add"),"pick"===n)$l.getInstance().sidebarManager.selectElement({type:o instanceof iu?o.getType():"biome",key:s=o.getKey()});else if("add"!==n&&"add_alt"!==n||void 0===s)"open"===n&&o instanceof iu&&$l.getInstance().sidebarManager.openElement({type:o.getType(),key:o.getKey()},!0);else{var a=this.builder.gridElements.get(s);if(void 0===a){var l=this.builder.vanillaBiomes.get(s);void 0!==l&&this.builder.registerBiome(l),a=l}if(a.has(this.layout.getKey(),t))return;!a&&this.builder.vanillaBiomes.has(s)&&this.builder.registerGridElement(this.builder.vanillaBiomes.get(s)),"add_alt"!==n||r instanceof ou?r instanceof ou?"A"===e?s===r.elementB?this.layout.set(t,s):this.layout.set(t,s+"/"+r.elementB):s===r.elementA?this.layout.set(t,s):this.layout.set(t,r.elementA+"/"+s):this.layout.set(t,s):"A"===e?this.layout.set(t,s+"/"+r.getKey()):this.layout.set(t,r.getKey()+"/"+s),$l.getInstance().refresh({biome:t})}},t.prototype.undo=function(){this.layout.undo()},t.prototype.refresh=function(){this.canvas.parentElement.classList.remove("hidden"),this.title.readOnly=!1;var t=$l.getInstance().sidebarManager.openedElement.type,e="dimension"===t?this.builder.dimension:this.builder.getLayoutElement($l.getInstance().sidebarManager.openedElement.key);e instanceof iu&&(this.layout=e),this.title.value=this.layout.name,$l.getInstance().splineDisplayManager.setWeirdnesses([]),$l.getInstance().splineDisplayManager.setPos(void 0);var n=this.layout.getSize();"dimension"===t?($l.getInstance().setLabels("Weirdness","Depth"),n[1]++):"slice"===t?$l.getInstance().setLabels("Erosion","Continentalness"):"layout"===t&&$l.getInstance().setLabels("Humidity","Temperature");var i=Math.max(n[0],n[1]);this.canvas.width=2500/i*n[0],this.canvas.height=2500/i*n[1];var r=this.canvas.getContext("2d");r.clearRect(0,0,this.canvas.width,this.canvas.height),this.layout.getRenderer().setDirty(),this.layout.getRenderer().draw(r,0,0,this.canvas.width,this.canvas.height,{},!1),this.backButton.classList.toggle("hidden",0==$l.getInstance().sidebarManager.parentElements.length)},t.prototype.hide=function(){this.canvas.parentElement.classList.add("hidden")},t}(),Hi=function(){function t(t){this.builder=t,this.refresh()}return t.prototype.refresh=function(){var t=this,e=document.getElementById("dimension_name");e.value=this.builder.dimensionName,e.onchange=function(n){t.builder.hasChanges=!0,t.builder.dimensionName=e.value};var n=document.getElementById("seed");n.value=this.builder.seed.toString(),n.onkeypress=function(t){t.key.match(/^[0-9|-]+$/)||t.preventDefault()},n.onchange=function(e){t.builder.hasChanges=!0,t.builder.seed=BigInt(n.value),$l.getInstance().refresh({noises:!0})},n.onkeyup=function(t){"Enter"===t.key&&n.blur()};var i=document.getElementById("noise_settings_name");i.value=this.builder.noiseSettingsName,i.onchange=function(e){t.builder.hasChanges=!0,t.builder.noiseSettingsName=i.value};var r=document.getElementById("export_dimension");r.checked=this.builder.exportDimension,r.onchange=function(e){t.builder.hasChanges=!0,t.builder.exportDimension=r.checked};var o=document.getElementById("export_splines");o.checked=this.builder.exportDimension,o.onchange=function(e){t.builder.hasChanges=!0,t.builder.exportDimension=o.checked};var s=document.getElementById("export_noises");s.checked=this.builder.exportDimension,s.onchange=function(e){t.builder.hasChanges=!0,t.builder.exportDimension=s.checked};var a=["1_18_1","1_18_2","1_19"],l=document.getElementById("target_version");l.selectedIndex=a.indexOf(this.builder.targetVersion),l.onchange=function(e){t.builder.hasChanges=!0,t.builder.targetVersion=a[l.selectedIndex]},this.createNoiseSettingFields(document.getElementById("continentalness_setting"),"Continentalness",this.builder.noiseSettings.continentalness),this.createNoiseSettingFields(document.getElementById("erosion_setting"),"Erosion",this.builder.noiseSettings.erosion),this.createNoiseSettingFields(document.getElementById("weirdness_setting"),"Weirdness",this.builder.noiseSettings.weirdness),this.createNoiseSettingFields(document.getElementById("temperature_setting"),"Temperature",this.builder.noiseSettings.temperature),this.createNoiseSettingFields(document.getElementById("humidity_setting"),"Humidity",this.builder.noiseSettings.humidity),this.createNoiseSettingFields(document.getElementById("shift_setting"),"Shift",this.builder.noiseSettings.shift),document.getElementById("reset_noises").onclick=function(e){t.builder.hasChanges=!0,t.builder.noiseSettings=Ii.default(),$l.getInstance().refresh({noises:!0})},this.handleFixNoiseSetting(document.getElementById("fix_continentalness_setting"),"continentalness"),this.handleFixNoiseSetting(document.getElementById("fix_erosion_setting"),"erosion"),this.handleFixNoiseSetting(document.getElementById("fix_weirdness_setting"),"weirdness"),this.handleFixNoiseSetting(document.getElementById("fix_temperature_setting"),"temperature"),this.handleFixNoiseSetting(document.getElementById("fix_humidity_setting"),"humidity")},t.prototype.handleFixNoiseSetting=function(t,e){var n,i,r,o,s=this,a=t.getElementsByClassName("enabled")[0],l=t.getElementsByClassName("range")[0],u=t.getElementsByClassName("display")[0];a.checked=void 0!==this.builder.fixedNoises[e],l.disabled=void 0===this.builder.fixedNoises[e],u.value=null!==(i=null===(n=this.builder.fixedNoises[e])||void 0===n?void 0:n.toFixed(2))&&void 0!==i?i:"0.00",l.value=null!==(o=null===(r=this.builder.fixedNoises[e])||void 0===r?void 0:r.toString())&&void 0!==o?o:"0",a.oninput=function(t){l.disabled=!a.checked,a.checked?s.builder.fixedNoises[e]=parseFloat(l.value):s.builder.fixedNoises[e]=void 0,$l.getInstance().refresh({noises:!0,biome:{},grids:!0})},l.oninput=function(t){s.builder.fixedNoises[e]=parseFloat(l.value),u.value=s.builder.fixedNoises[e].toFixed(2)},l.onchange=function(t){$l.getInstance().refresh({noises:!0,biome:{},grids:!0})}},t.prototype.createNoiseSettingFields=function(t,e,n){var i=this;t.innerHTML="";var r=document.createElement("span");r.classList.add("description"),r.innerHTML=e+":",t.appendChild(r);var o=document.createElement("label"),s=document.createElement("div");s.classList.add("description","minor"),s.innerHTML="FO:",s.title="First Octave",o.appendChild(s);var a=document.createElement("input");a.classList.add("small"),a.type="number",a.value=n.firstOctave.toString(),a.max="-1",a.step="1",a.onkeypress=function(t){t.key.match(/^[0-9|-]+$/)||t.preventDefault()},a.onchange=function(t){n.firstOctave=parseInt(a.value),a.value=n.firstOctave.toString(),i.builder.hasChanges=!0,$l.getInstance().refresh({noises:!0})},a.onkeyup=function(t){"Enter"===t.key&&a.blur()},o.appendChild(a),t.appendChild(o);var l=document.createElement("label"),u=document.createElement("div");u.classList.add("description","minor"),u.innerHTML="A:",u.title="Amplitudes",l.appendChild(u);for(var h=function(t){var e=document.createElement("input");e.classList.add("small"),t===n.amplitudes.length-1&&t>0&&e.classList.add("last"),e.type="number",e.value=n.amplitudes[t].toString(),e.min="0",e.step="0.1",e.onkeypress=function(t){t.key.match(/^[0-9|.]+$/)||t.preventDefault()},e.onchange=function(r){n.amplitudes[t]=parseFloat(e.value),i.builder.hasChanges=!0,$l.getInstance().refresh({noises:!0})},e.onkeyup=function(t){"Enter"===t.key&&e.blur()},l.appendChild(e)},c=0;c<n.amplitudes.length;c++)h(c);if(n.amplitudes.length>1){var d=document.createElement("button");d.classList.add("delete");var f=document.createElement("img");f.src="images/trash-bin.svg",d.appendChild(f),d.onclick=function(t){n.amplitudes.splice(n.amplitudes.length-1,1),i.builder.hasChanges=!0,$l.getInstance().refresh({noises:!0})},l.appendChild(d)}var p=document.createElement("button");p.classList.add("add");var _=document.createElement("img");_.src="images/add.svg",p.appendChild(_),p.onclick=function(t){n.amplitudes[n.amplitudes.length]=0,n.firstOctave=parseInt(a.value),a.value=n.firstOctave.toString(),i.builder.hasChanges=!0,$l.getInstance().refresh({noises:!0})},l.appendChild(p),t.appendChild(l)},t}();function Wi(){}function Gi(t){return null==t?Wi:function(){return this.querySelector(t)}}function Vi(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Ki(){return[]}function Ji(t){return null==t?Ki:function(){return this.querySelectorAll(t)}}function Xi(t){return function(){return this.matches(t)}}function qi(t){return function(e){return e.matches(t)}}var Yi=Array.prototype.find;function $i(){return this.firstElementChild}var Qi=Array.prototype.filter;function tr(){return Array.from(this.children)}function er(t){return new Array(t.length)}function nr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ir(t){return function(){return t}}function rr(t,e,n,i,r,o){for(var s,a=0,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new nr(t,o[a]);for(;a<l;++a)(s=e[a])&&(r[a]=s)}function or(t,e,n,i,r,o,s){var a,l,u,h=new Map,c=e.length,d=o.length,f=new Array(c);for(a=0;a<c;++a)(l=e[a])&&(f[a]=u=s.call(l,l.__data__,a,e)+"",h.has(u)?r[a]=l:h.set(u,l));for(a=0;a<d;++a)u=s.call(t,o[a],a,o)+"",(l=h.get(u))?(i[a]=l,l.__data__=o[a],h.delete(u)):n[a]=new nr(t,o[a]);for(a=0;a<c;++a)(l=e[a])&&h.get(f[a])===l&&(r[a]=l)}function sr(t){return t.__data__}function ar(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function lr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}nr.prototype={constructor:nr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ur="http://www.w3.org/1999/xhtml";const hr={svg:"http://www.w3.org/2000/svg",xhtml:ur,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cr(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),hr.hasOwnProperty(e)?{space:hr[e],local:t}:t}function dr(t){return function(){this.removeAttribute(t)}}function fr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pr(t,e){return function(){this.setAttribute(t,e)}}function _r(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function vr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function mr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function yr(t){return function(){this.style.removeProperty(t)}}function br(t,e,n){return function(){this.style.setProperty(t,e,n)}}function wr(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function xr(t,e){return t.style.getPropertyValue(e)||gr(t).getComputedStyle(t,null).getPropertyValue(e)}function kr(t){return function(){delete this[t]}}function Er(t,e){return function(){this[t]=e}}function Sr(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Tr(t){return t.trim().split(/^|\s+/)}function Ar(t){return t.classList||new Pr(t)}function Pr(t){this._node=t,this._names=Tr(t.getAttribute("class")||"")}function Ir(t,e){for(var n=Ar(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Lr(t,e){for(var n=Ar(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function zr(t){return function(){Ir(this,t)}}function Mr(t){return function(){Lr(this,t)}}function Cr(t,e){return function(){(e.apply(this,arguments)?Ir:Lr)(this,t)}}function Nr(){this.textContent=""}function Or(t){return function(){this.textContent=t}}function Br(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Rr(){this.innerHTML=""}function Dr(t){return function(){this.innerHTML=t}}function Fr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Zr(){this.nextSibling&&this.parentNode.appendChild(this)}function jr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ur(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ur&&e.documentElement.namespaceURI===ur?e.createElement(t):e.createElementNS(n,t)}}function Hr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wr(t){var e=cr(t);return(e.local?Hr:Ur)(e)}function Gr(){return null}function Vr(){var t=this.parentNode;t&&t.removeChild(this)}function Kr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Jr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xr(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function qr(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function Yr(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function $r(t,e,n){var i=gr(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Qr(t,e){return function(){return $r(this,t,e)}}function to(t,e){return function(){return $r(this,t,e.apply(this,arguments))}}Pr.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var eo=[null];function no(t,e){this._groups=t,this._parents=e}function io(){return new no([[document.documentElement]],eo)}no.prototype=io.prototype={constructor:no,select:function(t){"function"!=typeof t&&(t=Gi(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],l=a.length,u=i[r]=new Array(l),h=0;h<l;++h)(o=a[h])&&(s=t.call(o,o.__data__,h,a))&&("__data__"in o&&(s.__data__=o.__data__),u[h]=s);return new no(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Vi(t.apply(this,arguments))}}(t):Ji(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,u=0;u<l;++u)(s=a[u])&&(i.push(t.call(s,s.__data__,u,a)),r.push(s));return new no(i,r)},selectChild:function(t){return this.select(null==t?$i:function(t){return function(){return Yi.call(this.children,t)}}("function"==typeof t?t:qi(t)))},selectChildren:function(t){return this.selectAll(null==t?tr:function(t){return function(){return Qi.call(this.children,t)}}("function"==typeof t?t:qi(t)))},filter:function(t){"function"!=typeof t&&(t=Xi(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&l.push(o);return new no(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,sr);var n=e?or:rr,i=this._parents,r=this._groups;"function"!=typeof t&&(t=ir(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var h=i[u],c=r[u],d=c.length,f=ar(t.call(h,h&&h.__data__,u,i)),p=f.length,_=a[u]=new Array(p),v=s[u]=new Array(p),m=l[u]=new Array(d);n(h,c,_,v,m,f,e);for(var g,y,b=0,w=0;b<p;++b)if(g=_[b]){for(b>=w&&(w=b+1);!(y=v[w])&&++w<p;);g._next=y||null}}return(s=new no(s,i))._enter=a,s._exit=l,s},enter:function(){return new no(this._enter||this._groups.map(er),this._parents)},exit:function(){return new no(this._exit||this._groups.map(er),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var u,h=n[l],c=i[l],d=h.length,f=a[l]=new Array(d),p=0;p<d;++p)(u=h[p]||c[p])&&(f[p]=u);for(;l<r;++l)a[l]=n[l];return new no(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=lr);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,u=r[o]=new Array(l),h=0;h<l;++h)(s=a[h])&&(u[h]=s);u.sort(e)}return new no(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=cr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?fr:dr:"function"==typeof e?n.local?mr:vr:n.local?_r:pr)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?yr:"function"==typeof e?wr:br)(t,e,null==n?"":n)):xr(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?kr:"function"==typeof e?Sr:Er)(t,e)):this.node()[t]},classed:function(t,e){var n=Tr(t+"");if(arguments.length<2){for(var i=Ar(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Cr:e?zr:Mr)(n,e))},text:function(t){return arguments.length?this.each(null==t?Nr:("function"==typeof t?Br:Or)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Rr:("function"==typeof t?Fr:Dr)(t)):this.node().innerHTML},raise:function(){return this.each(Zr)},lower:function(){return this.each(jr)},append:function(t){var e="function"==typeof t?t:Wr(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Wr(t),i=null==e?Gr:"function"==typeof e?e:Gi(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Vr)},clone:function(t){return this.select(t?Jr:Kr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=Xr(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Yr:qr,i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var l,u=0,h=a.length;u<h;++u)for(i=0,l=a[u];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?to:Qr)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i)}};const ro=io;var oo={value:()=>{}};function so(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new ao(i)}function ao(t){this._=t}function lo(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function uo(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function ho(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=oo,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}ao.prototype=so.prototype={constructor:ao,on:function(t,e){var n,i=this._,r=lo(t+"",i),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=r[o]).type)i[n]=ho(i[n],t.name,e);else if(null==e)for(n in i)i[n]=ho(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=r[o]).type)&&(n=uo(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ao(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const co=so;var fo,po,_o=0,vo=0,mo=0,go=0,yo=0,bo=0,wo="object"==typeof performance&&performance.now?performance:Date,xo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ko(){return yo||(xo(Eo),yo=wo.now()+bo)}function Eo(){yo=0}function So(){this._call=this._time=this._next=null}function To(t,e,n){var i=new So;return i.restart(t,e,n),i}function Ao(){yo=(go=wo.now())+bo,_o=vo=0;try{!function(){ko(),++_o;for(var t,e=fo;e;)(t=yo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_o}()}finally{_o=0,function(){for(var t,e,n=fo,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:fo=e);po=t,Io(i)}(),yo=0}}function Po(){var t=wo.now(),e=t-go;e>1e3&&(bo-=e,go=t)}function Io(t){_o||(vo&&(vo=clearTimeout(vo)),t-yo>24?(t<1/0&&(vo=setTimeout(Ao,t-wo.now()-bo)),mo&&(mo=clearInterval(mo))):(mo||(go=wo.now(),mo=setInterval(Po,1e3)),_o=1,xo(Ao)))}function Lo(t,e,n){var i=new So;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}So.prototype=To.prototype={constructor:So,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ko():+n)+(null==e?0:+e),this._next||po===this||(po?po._next=this:fo=this,po=this),this._call=t,this._time=n,Io()},stop:function(){this._call&&(this._call=null,this._time=1/0,Io())}};var zo=co("start","end","cancel","interrupt"),Mo=[];function Co(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(l){var u,h,c,d;if(1!==n.state)return a();for(u in r)if((d=r[u]).name===n.name){if(3===d.state)return Lo(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(Lo((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),u=0,h=-1;u<c;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=To((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:zo,tween:Mo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function No(t,e){var n=Bo(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Oo(t,e){var n=Bo(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Bo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ro(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Do,Fo=180/Math.PI,Zo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jo(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Fo,skewX:Math.atan(l)*Fo,scaleX:s,scaleY:a}}function Uo(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],l=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:Ro(t,r)},{i:l-2,x:Ro(i,o)})}else(r||o)&&s.push("translate("+r+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Ro(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,s.rotate,a,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Ro(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,s.skewX,a,l),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Ro(t,n)},{i:a-2,x:Ro(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var Ho=Uo((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zo:jo(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Wo=Uo((function(t){return null==t?Zo:(Do||(Do=document.createElementNS("http://www.w3.org/2000/svg","g")),Do.setAttribute("transform",t),(t=Do.transform.baseVal.consolidate())?jo((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Zo)}),", ",")",")");function Go(t,e){var n,i;return function(){var r=Oo(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i}}function Vo(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Oo(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=a;break}l===u&&r.push(a)}o.tween=r}}function Ko(t,e,n){var i=t._id;return t.each((function(){var t=Oo(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Bo(t,i).value[e]}}function Jo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xo(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function qo(){}var Yo=.7,$o=1/Yo,Qo="\\s*([+-]?\\d+)\\s*",ts="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",es="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ns=/^#([0-9a-f]{3,8})$/,is=new RegExp("^rgb\\("+[Qo,Qo,Qo]+"\\)$"),rs=new RegExp("^rgb\\("+[es,es,es]+"\\)$"),os=new RegExp("^rgba\\("+[Qo,Qo,Qo,ts]+"\\)$"),ss=new RegExp("^rgba\\("+[es,es,es,ts]+"\\)$"),as=new RegExp("^hsl\\("+[ts,es,es]+"\\)$"),ls=new RegExp("^hsla\\("+[ts,es,es,ts]+"\\)$"),us={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hs(){return this.rgb().formatHex()}function cs(){return this.rgb().formatRgb()}function ds(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ns.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?fs(e):3===n?new ms(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ps(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ps(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=is.exec(t))?new ms(e[1],e[2],e[3],1):(e=rs.exec(t))?new ms(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=os.exec(t))?ps(e[1],e[2],e[3],e[4]):(e=ss.exec(t))?ps(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=as.exec(t))?ws(e[1],e[2]/100,e[3]/100,1):(e=ls.exec(t))?ws(e[1],e[2]/100,e[3]/100,e[4]):us.hasOwnProperty(t)?fs(us[t]):"transparent"===t?new ms(NaN,NaN,NaN,0):null}function fs(t){return new ms(t>>16&255,t>>8&255,255&t,1)}function ps(t,e,n,i){return i<=0&&(t=e=n=NaN),new ms(t,e,n,i)}function _s(t){return t instanceof qo||(t=ds(t)),t?new ms((t=t.rgb()).r,t.g,t.b,t.opacity):new ms}function vs(t,e,n,i){return 1===arguments.length?_s(t):new ms(t,e,n,null==i?1:i)}function ms(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function gs(){return"#"+bs(this.r)+bs(this.g)+bs(this.b)}function ys(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function bs(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ws(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ks(t,e,n,i)}function xs(t){if(t instanceof ks)return new ks(t.h,t.s,t.l,t.opacity);if(t instanceof qo||(t=ds(t)),!t)return new ks;if(t instanceof ks)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new ks(s,a,l,t.opacity)}function ks(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Es(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ss(t,e,n,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*i+s*r)/6}Jo(qo,ds,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:hs,formatHex:hs,formatHsl:function(){return xs(this).formatHsl()},formatRgb:cs,toString:cs}),Jo(ms,vs,Xo(qo,{brighter:function(t){return t=null==t?$o:Math.pow($o,t),new ms(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Yo:Math.pow(Yo,t),new ms(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gs,formatHex:gs,formatRgb:ys,toString:ys})),Jo(ks,(function(t,e,n,i){return 1===arguments.length?xs(t):new ks(t,e,n,null==i?1:i)}),Xo(qo,{brighter:function(t){return t=null==t?$o:Math.pow($o,t),new ks(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Yo:Math.pow(Yo,t),new ks(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ms(Es(t>=240?t-240:t+120,r,i),Es(t,r,i),Es(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ts=t=>()=>t;function As(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ts(isNaN(t)?e:t)}const Ps=function t(e){var n=function(t){return 1==(t=+t)?As:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Ts(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=vs(t)).r,(e=vs(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=As(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function Is(t){return function(e){var n,i,r=e.length,o=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=vs(e[n]),o[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return o=t(o),s=t(s),a=t(a),i.opacity=1,function(t){return i.r=o(t),i.g=s(t),i.b=a(t),i+""}}}Is((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],s=i>0?t[i-1]:2*r-o,a=i<e-1?t[i+2]:2*o-r;return Ss((n-i/e)*e,s,r,o,a)}})),Is((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],a=t[(i+2)%e];return Ss((n-i/e)*e,r,o,s,a)}}));var Ls=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zs=new RegExp(Ls.source,"g");function Ms(t,e){var n,i,r,o=Ls.lastIndex=zs.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=Ls.exec(t))&&(i=zs.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Ro(n,i)})),o=zs.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function Cs(t,e){var n;return("number"==typeof e?Ro:e instanceof ds?Ps:(n=ds(e))?(e=n,Ps):Ms)(t,e)}function Ns(t){return function(){this.removeAttribute(t)}}function Os(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bs(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function Rs(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function Ds(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttribute(t)}}function Fs(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttributeNS(t.space,t.local)}}function Zs(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function js(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Us(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&js(t,r)),n}return r._value=e,r}function Hs(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Zs(t,r)),n}return r._value=e,r}function Ws(t,e){return function(){No(this,t).delay=+e.apply(this,arguments)}}function Gs(t,e){return e=+e,function(){No(this,t).delay=e}}function Vs(t,e){return function(){Oo(this,t).duration=+e.apply(this,arguments)}}function Ks(t,e){return e=+e,function(){Oo(this,t).duration=e}}function Js(t,e){if("function"!=typeof e)throw new Error;return function(){Oo(this,t).ease=e}}function Xs(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?No:Oo;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}var qs=ro.prototype.constructor;function Ys(t){return function(){this.style.removeProperty(t)}}function $s(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Qs(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&$s(t,o,n)),i}return o._value=e,o}function ta(t){return function(e){this.textContent=t.call(this,e)}}function ea(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ta(i)),e}return i._value=t,i}var na=0;function ia(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ra(){return++na}var oa=ro.prototype;ia.prototype=function(t){return ro().transition(t)}.prototype={constructor:ia,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Gi(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,l,u=i[s],h=u.length,c=o[s]=new Array(h),d=0;d<h;++d)(a=u[d])&&(l=t.call(a,a.__data__,d,u))&&("__data__"in a&&(l.__data__=a.__data__),c[d]=l,Co(c[d],e,n,d,c,Bo(a,n)));return new ia(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ji(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l,u=i[a],h=u.length,c=0;c<h;++c)if(l=u[c]){for(var d,f=t.call(l,l.__data__,c,u),p=Bo(l,n),_=0,v=f.length;_<v;++_)(d=f[_])&&Co(d,e,n,_,f,p);o.push(f),s.push(l)}return new ia(o,s,e,n)},selectChild:oa.selectChild,selectChildren:oa.selectChildren,filter:function(t){"function"!=typeof t&&(t=Xi(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&l.push(o);return new ia(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,u=e[a],h=n[a],c=u.length,d=s[a]=new Array(c),f=0;f<c;++f)(l=u[f]||h[f])&&(d[f]=l);for(;a<i;++a)s[a]=e[a];return new ia(s,this._parents,this._name,this._id)},selection:function(){return new qs(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ra(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,u=0;u<l;++u)if(s=a[u]){var h=Bo(s,e);Co(s,t,n,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ia(i,this._parents,t,n)},call:oa.call,nodes:oa.nodes,node:oa.node,size:oa.size,empty:oa.empty,each:oa.each,on:function(t,e){var n=this._id;return arguments.length<2?Bo(this.node(),n).on.on(t):this.each(Xs(n,t,e))},attr:function(t,e){var n=cr(t),i="transform"===n?Wo:Cs;return this.attrTween(t,"function"==typeof e?(n.local?Fs:Ds)(n,i,Ko(this,"attr."+t,e)):null==e?(n.local?Os:Ns)(n):(n.local?Rs:Bs)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=cr(t);return this.tween(n,(i.local?Us:Hs)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Ho:Cs;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=xr(this,t),s=(this.style.removeProperty(t),xr(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,Ys(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var s=xr(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=xr(this,t)),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}(t,i,Ko(this,"style."+t,e))).each(function(t,e){var n,i,r,o,s="style."+e,a="end."+s;return function(){var l=Oo(this,t),u=l.on,h=null==l.value[s]?o||(o=Ys(e)):void 0;u===n&&r===h||(i=(n=u).copy()).on(a,r=h),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var s=xr(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Qs(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ko(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,ea(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Bo(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Go:Vo)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ws:Gs)(e,t)):Bo(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vs:Ks)(e,t)):Bo(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Js(e,t)):Bo(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Oo(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0==--r&&o()}};n.each((function(){var n=Oo(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===r&&o()}))},[Symbol.iterator]:oa[Symbol.iterator]};var sa={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function aa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}ro.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,r,o=t.__transition,s=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition}}(this,t)}))},ro.prototype.transition=function(t){var e,n;t instanceof ia?(e=t._id,t=t._name):(e=ra(),(n=sa).time=ko(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,u=0;u<l;++u)(s=a[u])&&Co(s,t,e,u,a,n||aa(s,e));return new ia(i,this._parents,t,e)};const{abs:la,max:ua,min:ha}=Math;function ca(t){return{type:t}}function da(t){return"string"==typeof t?new no([[document.querySelector(t)]],[document.documentElement]):new no([[t]],eo)}function fa(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(ca),["n","s"].map(ca),["n","w","e","s","nw","ne","sw","se"].map(ca);const pa={passive:!1},_a={capture:!0,passive:!1};function va(t){t.stopImmediatePropagation()}function ma(t){t.preventDefault(),t.stopImmediatePropagation()}const ga=t=>()=>t;function ya(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function ba(t){return!t.ctrlKey&&!t.button}function wa(){return this.parentNode}function xa(t,e){return null==e?{x:t.x,y:t.y}:e}function ka(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ea(){var t,e,n,i,r=ba,o=wa,s=xa,a=ka,l={},u=co("start","drag","end"),h=0,c=0;function d(t){t.on("mousedown.drag",f).filter(a).on("touchstart.drag",v).on("touchmove.drag",m,pa).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!i&&r.call(this,s,a)){var l=y(this,o.call(this,s,a),s,a,"mouse");l&&(da(s.view).on("mousemove.drag",p,_a).on("mouseup.drag",_,_a),function(t){var e=t.document.documentElement,n=da(t).on("dragstart.drag",ma,_a);"onselectstart"in e?n.on("selectstart.drag",ma,_a):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(s.view),va(s),n=!1,t=s.clientX,e=s.clientY,l("start",s))}}function p(i){if(ma(i),!n){var r=i.clientX-t,o=i.clientY-e;n=r*r+o*o>c}l.mouse("drag",i)}function _(t){da(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,i=da(t).on("dragstart.drag",null);e&&(i.on("click.drag",ma,_a),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),ma(t),l.mouse("end",t)}function v(t,e){if(r.call(this,t,e)){var n,i,s=t.changedTouches,a=o.call(this,t,e),l=s.length;for(n=0;n<l;++n)(i=y(this,a,t,e,s[n].identifier,s[n]))&&(va(t),i("start",t,s[n]))}}function m(t){var e,n,i=t.changedTouches,r=i.length;for(e=0;e<r;++e)(n=l[i[e].identifier])&&(ma(t),n("drag",t,i[e]))}function g(t){var e,n,r=t.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<o;++e)(n=l[r[e].identifier])&&(va(t),n("end",t,r[e]))}function y(t,e,n,i,r,o){var a,c,f,p=u.copy(),_=fa(o||n,e);if(null!=(f=s.call(t,new ya("beforestart",{sourceEvent:n,target:d,identifier:r,active:h,x:_[0],y:_[1],dx:0,dy:0,dispatch:p}),i)))return a=f.x-_[0]||0,c=f.y-_[1]||0,function n(o,s,u){var v,m=_;switch(o){case"start":l[r]=n,v=h++;break;case"end":delete l[r],--h;case"drag":_=fa(u||s,e),v=h}p.call(o,t,new ya(o,{sourceEvent:s,subject:f,target:d,identifier:r,active:v,x:_[0]+a,y:_[1]+c,dx:_[0]-m[0],dy:_[1]-m[1],dispatch:p}),i)}}return d.filter=function(t){return arguments.length?(r="function"==typeof t?t:ga(!!t),d):r},d.container=function(t){return arguments.length?(o="function"==typeof t?t:ga(t),d):o},d.subject=function(t){return arguments.length?(s="function"==typeof t?t:ga(t),d):s},d.touchable=function(t){return arguments.length?(a="function"==typeof t?t:ga(!!t),d):a},d.on=function(){var t=u.on.apply(u,arguments);return t===u?d:t},d.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,d):Math.sqrt(c)},d}ya.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Sa=Math.sqrt(50),Ta=Math.sqrt(10),Aa=Math.sqrt(2);function Pa(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=Sa?10:o>=Ta?5:o>=Aa?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=Sa?10:o>=Ta?5:o>=Aa?2:1)}function Ia(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function La(t){let e=t,n=t,i=t;function r(t,e,r=0,o=t.length){if(r<o){if(0!==n(e,e))return o;do{const n=r+o>>>1;i(t[n],e)<0?r=n+1:o=n}while(r<o)}return r}return 2!==t.length&&(e=(e,n)=>t(e)-n,n=Ia,i=(e,n)=>Ia(t(e),n)),{left:r,center:function(t,n,i=0,o=t.length){const s=r(t,n,i,o-1);return s>i&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,r=0,o=t.length){if(r<o){if(0!==n(e,e))return o;do{const n=r+o>>>1;i(t[n],e)<=0?r=n+1:o=n}while(r<o)}return r}}}const za=La(Ia),Ma=za.right,Ca=(za.left,La((function(t){return null===t?NaN:+t})).center,Ma);function Na(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=Da(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}function Oa(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ba(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Da(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}function Ra(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function Da(t,e){var n,i=typeof e;return null==e||"boolean"===i?Ts(e):("number"===i?Ro:"string"===i?(n=ds(e))?(e=n,Ps):Ms:e instanceof ds?Ps:e instanceof Date?Oa:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Ra:Array.isArray(e)?Na:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ba:Ro)(t,e)}function Fa(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Za(t){return+t}var ja=[0,1];function Ua(t){return t}function Ha(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Wa(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=Ha(r,i),o=n(s,o)):(i=Ha(i,r),o=n(o,s)),function(t){return o(i(t))}}function Ga(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=Ha(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=Ca(t,e,1,i)-1;return o[n](r[n](e))}}function Va(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ka(){return function(){var t,e,n,i,r,o,s=ja,a=ja,l=Da,u=Ua;function h(){var t=Math.min(s.length,a.length);return u!==Ua&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),i=t>2?Ga:Wa,r=o=null,c}function c(e){return null==e||isNaN(e=+e)?n:(r||(r=i(s.map(t),a,l)))(t(u(e)))}return c.invert=function(n){return u(e((o||(o=i(a,s.map(t),Ro)))(n)))},c.domain=function(t){return arguments.length?(s=Array.from(t,Za),h()):s.slice()},c.range=function(t){return arguments.length?(a=Array.from(t),h()):a.slice()},c.rangeRound=function(t){return a=Array.from(t),l=Fa,h()},c.clamp=function(t){return arguments.length?(u=!!t||Ua,h()):u!==Ua},c.interpolate=function(t){return arguments.length?(l=t,h()):l},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,i){return t=n,e=i,h()}}()(Ua,Ua)}function Ja(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Xa,qa=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ya(t){if(!(e=qa.exec(t)))throw new Error("invalid format: "+t);var e;return new $a({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function $a(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Qa(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function tl(t){return(t=Qa(Math.abs(t)))?t[1]:NaN}function el(t,e){var n=Qa(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Ya.prototype=$a.prototype,$a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const nl={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>el(100*t,e),r:el,s:function(t,e){var n=Qa(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Xa=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Qa(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function il(t){return t}var rl,ol,sl,al=Array.prototype.map,ll=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ul(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,o,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(s=Pa(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),i=Math.round(e/s);for(n*s<t&&++n,i*s>e&&--i,o=new Array(r=i-n+1);++a<r;)o[a]=(n+a)*s}else{s=-s;let n=Math.round(t*s),i=Math.round(e*s);for(n/s<t&&++n,i/s>e&&--i,o=new Array(r=i-n+1);++a<r;)o[a]=(n+a)/s}return i&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return function(t,e,n,i){var r,o=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=Sa?r*=10:o>=Ta?r*=5:o>=Aa&&(r*=2),e<t?-r:r}(t,e,n);switch((i=Ya(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(tl(e)/3)))-tl(Math.abs(t)))}(o,s))||(i.precision=r),sl(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,tl(e)-tl(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-tl(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type))}return ol(i)}(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,o=e(),s=0,a=o.length-1,l=o[s],u=o[a],h=10;for(u<l&&(r=l,l=u,u=r,r=s,s=a,a=r);h-- >0;){if((r=Pa(l,u,n))===i)return o[s]=l,o[a]=u,e(o);if(r>0)l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r}i=r}return t},t}function hl(){var t=Ka();return t.copy=function(){return Va(t,hl())},Ja.apply(t,arguments),ul(t)}rl=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?il:(e=al.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?il:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(al.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"−":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function c(t){var e=(t=Ya(t)).fill,n=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,_=t.comma,v=t.precision,m=t.trim,g=t.type;"n"===g?(_=!0,g="g"):nl[g]||(void 0===v&&(v=12),m=!0,g="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var y="$"===d?r:"#"===d&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===d?o:/[%p]/.test(g)?l:"",w=nl[g],x=/[defgprs%]/.test(g);function k(t){var r,o,l,d=y,k=b;if("c"===g)k=w(t)+k,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:w(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==c&&(E=!1),d=(E?"("===c?c:u:"-"===c||"("===c?"":c)+d,k=("s"===g?ll[8+Xa/3]:"")+k+(E&&"("===c?")":""),x)for(r=-1,o=t.length;++r<o;)if(48>(l=t.charCodeAt(r))||l>57){k=(46===l?s+t.slice(r+1):t.slice(r))+k,t=t.slice(0,r);break}}_&&!f&&(t=i(t,1/0));var S=d.length+t.length+k.length,T=S<p?new Array(p-S+1).join(e):"";switch(_&&f&&(t=i(T+t,T.length?p-k.length:1/0),T=""),n){case"<":t=d+t+k+T;break;case"=":t=d+T+t+k;break;case"^":t=T.slice(0,S=T.length>>1)+d+t+k+T.slice(S);break;default:t=T+d+t+k}return a(t)}return v=void 0===v?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:c,formatPrefix:function(t,e){var n=c(((t=Ya(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(tl(e)/3))),r=Math.pow(10,-i),o=ll[8+i/3];return function(t){return n(r*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),ol=rl.format,sl=rl.formatPrefix;const cl=Math.PI,dl=2*cl,fl=1e-6,pl=dl-fl;function _l(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vl(){return new _l}_l.prototype=vl.prototype={constructor:_l,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,s=this._y1,a=n-t,l=i-e,u=o-t,h=s-e,c=u*u+h*h;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>fl)if(Math.abs(h*a-l*u)>fl&&r){var d=n-o,f=i-s,p=a*a+l*l,_=d*d+f*f,v=Math.sqrt(p),m=Math.sqrt(c),g=r*Math.tan((cl-Math.acos((p+c-_)/(2*v*m)))/2),y=g/m,b=g/v;Math.abs(y-1)>fl&&(this._+="L"+(t+y*u)+","+(e+y*h)),this._+="A"+r+","+r+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),l=t+s,u=e+a,h=1^o,c=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>fl||Math.abs(this._y1-u)>fl)&&(this._+="L"+l+","+u),n&&(c<0&&(c=c%dl+dl),c>pl?this._+="A"+n+","+n+",0,1,"+h+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u):c>fl&&(this._+="A"+n+","+n+",0,"+ +(c>=cl)+","+h+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const ml=vl;function gl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function yl(t){return function(){return t}}function bl(t){this._context=t}function wl(t){return new bl(t)}function xl(t){return t[0]}function kl(t){return t[1]}function El(t,e){var n=yl(!0),i=null,r=wl,o=null;function s(s){var a,l,u,h=(s=gl(s)).length,c=!1;for(null==i&&(o=r(u=ml())),a=0;a<=h;++a)!(a<h&&n(l=s[a],a,s))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(l,a,s),+e(l,a,s));if(u)return o=null,u+""||null}return t="function"==typeof t?t:void 0===t?xl:yl(t),e="function"==typeof e?e:void 0===e?kl:yl(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:yl(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:yl(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:yl(!!t),s):n},s.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),s):r},s.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),s):i},s}function Sl(t,e,n){var i=null,r=yl(!0),o=null,s=wl,a=null;function l(l){var u,h,c,d,f,p=(l=gl(l)).length,_=!1,v=new Array(p),m=new Array(p);for(null==o&&(a=s(f=ml())),u=0;u<=p;++u){if(!(u<p&&r(d=l[u],u,l))===_)if(_=!_)h=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),c=u-1;c>=h;--c)a.point(v[c],m[c]);a.lineEnd(),a.areaEnd()}_&&(v[u]=+t(d,u,l),m[u]=+e(d,u,l),a.point(i?+i(d,u,l):v[u],n?+n(d,u,l):m[u]))}if(f)return a=null,f+""||null}function u(){return El().defined(r).curve(s).context(o)}return t="function"==typeof t?t:void 0===t?xl:yl(+t),e="function"==typeof e?e:yl(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?kl:yl(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:yl(+e),i=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:yl(+e),l):t},l.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:yl(+t),l):i},l.y=function(t){return arguments.length?(e="function"==typeof t?t:yl(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:yl(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:yl(+t),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(i).y(e)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:yl(!!t),l):r},l.curve=function(t){return arguments.length?(s=t,null!=o&&(a=s(o)),l):s},l.context=function(t){return arguments.length?(null==t?o=a=null:a=s(o=t),l):o},l}function Tl(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Al(t,e){this._context=t,this._k=(1-e)/6}function Pl(t,e){this._context=t,this._alpha=e}Array.prototype.slice,bl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI,Al.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Tl(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Tl(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new Al(t,e)}return n.tension=function(e){return t(+e)},n}(0),Pl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,r=t._y1,o=t._x2,s=t._y2;if(t._l01_a>1e-12){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/h,s=(s*u+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(i,r,o,s,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Il=function t(e){function n(t){return e?new Pl(t,e):new Al(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ll(t,e,n){this.k=t,this.x=e,this.y=n}Ll.prototype={constructor:Ll,scale:function(t){return 1===t?this:new Ll(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ll(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Ll(1,0,0),Ll.prototype;var zl,Ml=function(){function t(t){var e=this;this.parentElements=[],this.openedElement={type:"dimension",key:"dimension"};var n=da("#sidebar_menu");this.builder=t;var i=this;n.selectAll(".sidebar_entry_list#splines .sidebar_entry.spline").on("click",(function(t){"dimension"===this.id?i.openElement({type:"dimension",key:this.id}):i.openElement({type:"spline",key:this.id}),t.stopPropagation()})).on("contextmenu",(function(t){"dimension"===this.id?i.openElement({type:"dimension",key:"dimension"}):i.openElement({type:"spline",key:this.id}),t.stopPropagation(),t.preventDefault()})).selectAll(".edit_grid_button").on("click",(function(t){i.openElement({type:"grid",key:this.parentElement.id}),t.stopPropagation()})),n.select("#splines_grid_view_button").on("click",(function(t){var e=!n.select("#splines").classed("compact");n.select("#splines").classed("compact",e),n.select("#splines_grid_view_button").attr("src",e?"images/list-view.svg":"images/grid-view.svg")})),n.select("#slices_grid_view_button").on("click",(function(t){var e=!n.select("#slices").classed("compact");n.select("#slices").classed("compact",e),n.select("#slices_grid_view_button").attr("src",e?"images/list-view.svg":"images/grid-view.svg")})),n.select("#layouts_grid_view_button").on("click",(function(t){var e=!n.select("#layouts").classed("compact");n.select("#layouts").classed("compact",e),n.select("#layouts_grid_view_button").attr("src",e?"images/list-view.svg":"images/grid-view.svg")})),n.select("#biomes_grid_view_button").on("click",(function(t){var e=!n.select("#biomes").classed("compact");n.select("#biomes").classed("compact",e),n.select("#vanilla_biomes").classed("compact",e),n.select("#biomes_grid_view_button").attr("src",e?"images/list-view.svg":"images/grid-view.svg")})),n.select("#assign_slices_button").on("click",(function(t){e.openElement({type:"assign_slices"}),t.preventDefault()})).on("contextmenu",(function(t){e.openElement({type:"assign_slices"}),t.preventDefault()})),n.select("#edit_slices_grid_button").on("click",(function(t){e.openElement({type:"grid",key:"slice"}),t.stopPropagation()})),n.select("#add_slices_button").on("click",(function(t){var n=iu.create(e.builder,"New Slice",new eu);e.builder.hasChanges=!0,e.openElement({type:"slice",key:n.getKey()}),t.stopPropagation()})),n.select("#hide_all_slices_button").on("click",(function(t){var n=e.builder.slices.every((function(t){return!t.hidden}));e.builder.slices.forEach((function(t){return t.hidden=n})),$l.getInstance().refresh({biome:{}}),t.stopPropagation()})),n.select("#add_layout_button").on("click",(function(t){var n=iu.create(e.builder,"New Layout",new nu);e.builder.hasChanges=!0,e.openElement({type:"layout",key:n.getKey()}),t.stopPropagation()})),n.select("#hide_all_layouts_button").on("click",(function(t){var n=e.builder.layouts.every((function(t){return!t.hidden}));e.builder.layouts.forEach((function(t){return t.hidden=n})),e.builder.hasChanges=!0,$l.getInstance().refresh({biome:{}}),t.stopPropagation()})),n.select("#edit_layout_grid_button").on("click",(function(t){e.openElement({type:"grid",key:"layout"}),t.stopPropagation()})),n.select("#add_biome_button").on("click",(function(t){var i=prompt("Input biome name:","new:biome");null!==i&&(Ti.create(e.builder,i,"#888888"),e.builder.hasChanges=!0,e.refresh(),e.resizeBottomSpacer(n),t.stopPropagation())})),n.select("#hide_all_biomes_button").on("click",(function(t){var n=e.builder.biomes.every((function(t){return!t.hidden}));e.builder.biomes.forEach((function(t){return t.hidden=n})),$l.getInstance().refresh({biome:{}}),t.stopPropagation()}));var r=n.select("#biome_search_bar");r.on("input",(function(t){n.select("#sidebar_bottom_spacer").style("height","10000pt"),n.select(".sidebar_entry_list#biomes").selectAll(".sidebar_entry").data(e.builder.biomes,(function(t){return t.getKey()})).classed("hidden",(function(t){return!t.name.includes(r.property("value"))})),n.select(".sidebar_entry_list#vanilla_biomes").selectAll(".sidebar_entry").data(Array.from(e.builder.vanillaBiomes.values()).filter((function(t){return!e.builder.gridElements.has(t.getKey())})),(function(t){return t.getKey()})).classed("hidden",(function(t){return!t.name.includes(r.property("value"))})),e.resizeBottomSpacer(n)})),n.on("scroll",(function(t){e.resizeBottomSpacer(n)}))}return t.prototype.resizeBottomSpacer=function(t){var e=t.select("#sidebar_bottom_spacer"),n=e.node().getBoundingClientRect().top-t.node().getBoundingClientRect().top,i=Math.max(t.node().clientHeight-n-20,0);e.style("height",i+"px")},t.prototype.openElement=function(t,e,n){var i,r;void 0===e&&(e=!1),void 0===n&&(n=!1),"biome"!==t.type&&"vanilla_biome"!==t.type&&(e?this.parentElements.push(this.openedElement):n||(this.parentElements=[]),this.openedElement=null!=t?t:this.openedElement,("assign_slices"===this.openedElement.type&&"slice"!==(null===(i=this.selectedElement)||void 0===i?void 0:i.type)||"layout"===this.openedElement.type&&"slice"===(null===(r=this.selectedElement)||void 0===r?void 0:r.type)||this.openedElement.type.startsWith("modify_")||"spline"===this.openedElement.type||"spline_grid"===this.openedElement.type)&&(this.selectedElement=void 0),$l.getInstance().splineEditor.zoom=.01,$l.getInstance().refresh({}))},t.prototype.back=function(){0!=this.parentElements.length&&this.openElement(this.parentElements.pop(),!1,!0)},t.prototype.selectElement=function(t){"assign_slices"===this.openedElement.type&&"slice"!==t.type||"layout"===this.openedElement.type&&"slice"===t.type||this.openedElement.type.startsWith("modify_")||(this.selectedElement=t,this.refresh())},t.prototype.refresh=function(){var t=this,e=da("#sidebar_menu"),n=this;e.selectAll(".sidebar_entry_list#splines .sidebar_entry.spline").classed("open",(function(){return"spline"===n.openedElement.type&&this.id===n.openedElement.key||"dimension"===n.openedElement.type&&"dimension"===this.id})).selectAll(".edit_grid_button").classed("open",(function(){return"grid"===n.openedElement.type&&this.parentElement.id===n.openedElement.key})),e.select("#assign_slices_button").classed("open","assign_slices"===this.openedElement.type),e.select("#hide_all_slices_button").classed("enabled",!this.builder.slices.every((function(t){return!t.hidden}))),e.select("#edit_slices_grid_button").classed("open","grid"===this.openedElement.type&&"slice"===this.openedElement.key),e.select("#hide_all_layouts_button").classed("enabled",!this.builder.layouts.every((function(t){return!t.hidden}))),e.select("#edit_layout_grid_button").classed("open","grid"===this.openedElement.type&&"layout"===this.openedElement.key),e.select("#hide_all_biomes_button").classed("enabled",!this.builder.biomes.every((function(t){return!t.hidden}))),this.handleElementDivs(this.builder.slices,"slice",e.select(".sidebar_entry_list#slices"),120,!1,!1),this.handleElementDivs(this.builder.layouts,"layout",e.select(".sidebar_entry_list#layouts"),80,!1,!1),this.handleElementDivs(this.builder.biomes,"biome",e.select(".sidebar_entry_list#biomes"),44,!1,!0),this.handleElementDivs(Array.from(this.builder.vanillaBiomes.values()).filter((function(e){return!t.builder.gridElements.has(e.getKey())})),"vanilla_biome",e.select(".sidebar_entry_list#vanilla_biomes"),44,!0,!0)},t.prototype.handleElementDivs=function(t,e,n,i,r,o){var s=this,a=da("#layoutEditorTooltip"),l=n.selectAll(".sidebar_entry").data(t,(function(t){return t.getKey()})).join((function(l){var u=l.append("div").classed("sidebar_entry",!0).classed(e,!0);if(o?u.append("input").attr("type","color").classed("color_selector",!0).attr("disabled",r?"":void 0).property("value",(function(t){return t.color})).on("change",(function(t,e){e.setColor(this.value),$l.getInstance().refresh({biome:{}})})):u.append("canvas").classed("grid",!0).attr("width",i).attr("height",i).each((function(t,e,n){return t.getRenderer().draw(n[e].getContext("2d"),0,0,i,i,{},!0)})),u.append("span").classed("name",!0),u.attr("draggable",!r),r||(u.filter((function(t){return t.allowEdit})).append("img").classed("button",!0).classed("edit",!0).attr("src","images/edit-pen.svg").attr("title","Rename").on("click",(function(t,e){var n=prompt("Edit name of "+e.constructor.name,e.name);null!==n&&(e.name=n,s.refresh(),t.stopPropagation())})),u.append("img").classed("button",!0).classed("delete",!0).attr("src","images/trash-bin.svg").attr("title","Delete").on("click",(function(t,e){confirm("Deleting "+e.constructor.name+' "'+e.name+'"')&&(s.builder.hasChanges=!0,s.builder.removeGridElement(e),$l.getInstance().refresh({biome:{}}),t.stopPropagation())})),u.append("img").classed("button",!0).classed("hide",!0).attr("src","images/eye.svg").attr("title","Hide/Show").on("click",(function(t,e){e.hidden=!e.hidden,$l.getInstance().refresh({biome:{}}),t.stopPropagation()}))),u.on("click",(function(t,n){s.selectElement({type:e,key:n.getKey()})})),u.on("dblclick",(function(t,n){s.openElement({type:e,key:n.getKey()}),t.preventDefault()})),u.on("contextmenu",(function(t,n){s.openElement({type:e,key:n.getKey()}),t.preventDefault()})),u.on("mouseover",(function(t,e){if(n.classed("compact")){var i=this.getBoundingClientRect();a.select(".name").text(e.name),a.style("left",i.left+"px"),a.style("top",i.bottom+"px"),a.classed("hidden",!1),a.select(".noises").classed("hidden",!0)}})),u.on("mouseleave",(function(t,e){a.classed("hidden",!0)})),!r){var h=s;u.on("dragstart",(function(t,n){a.classed("hidden",!0),h.dragType=e,h.dragKey=n.getKey(),this.classList.add("dragged")})),u.on("dragend",(function(t,e){h.dragType=void 0,h.dragKey=void 0,this.classList.remove("dragged")})),u.on("dragover",(function(n,i){h.dragover(this,e,t,i)&&n.preventDefault()})),u.on("dragleave",(function(t,e){var n=this;setTimeout((function(){return n.classList.remove("dragover_up","dragover_down")}),20),t.preventDefault()})),u.on("drop",(function(n,i){h.drop(this,e,t,i)&&(n.preventDefault(),h.refresh())}))}return u}));l.classed("open",(function(t){var e;return(null===(e=s.openedElement)||void 0===e?void 0:e.key)===t.getKey()})),l.classed("selected",(function(t){var e;return(null===(e=s.selectedElement)||void 0===e?void 0:e.key)===t.getKey()})),l.select("canvas.grid").filter((function(t){return t.getKey()===s.openedElement.key})).each((function(t,e,n){var r=n[e].getContext("2d");r.clearRect(0,0,i,i),t.getRenderer().draw(r,0,0,i,i,{},!0)})),l.select("span.name").text((function(t){return t.name})),l.select("input.color_selector").attr("aria-label",(function(t){return"Color of Biome "+t.name})),l.select("img.button.hide").classed("enabled",(function(t){return t.hidden}))},t.prototype.dragover=function(t,e,n,i){var r,o,s=this;return this.dragType===e&&this.dragKey!==i.getKey()&&(n.findIndex((function(t){return t.getKey()===i.getKey()}))<n.findIndex((function(t){return t.getKey()===s.dragKey}))?t.classList.add("dragover_up"):t.classList.add("dragover_down"),this.lastDragedOverDiv!=t&&(null===(o=null===(r=this.lastDragedOverDiv)||void 0===r?void 0:r.classList)||void 0===o||o.remove("dragover_up","dragover_down"),this.lastDragedOverDiv=t),!0)},t.prototype.drop=function(t,e,n,i){var r=this;if(t.classList.remove("dragover_up","dragover_down"),this.dragType===e&&this.dragKey!==i.getKey()){var o=n.indexOf(i),s=n.findIndex((function(t){return t.getKey()===r.dragKey}));return n.splice(o,0,n.splice(s,1)[0]),!0}return!1},t}(),Cl=function(){function t(t){this.builder=t,this.splineCanvas=document.getElementById("splineDisplayCanvas"),this.weirdnesses=[]}return t.prototype.setPos=function(t){this.pos=t},t.prototype.setWeirdnesses=function(t){this.weirdnesses=t},t.prototype.refresh=function(){var t,e,n,i,r=0,o=da("#splineDisplaySvg"),s=parseInt(o.style("width"),10),a=parseInt(o.style("height"),10),l=hl().domain([-1.5,1.5]).range([0,s]),u=hl().domain([-.3,1.2]).range([a,0]),h=hl().domain([8,0]).range([a,0]),c=hl().domain([0,1]).range([a-10,0]),d=[],f=[],p=[];if(this.pos)for(var _=-1.5;_<=1.51;_+=.05)d.push([_,this.builder.splines.offset.apply(this.pos.c,this.pos.e,_)]),f.push([_,this.builder.splines.factor.apply(this.pos.c,this.pos.e,_)]),p.push([_,this.builder.splines.jaggedness.apply(this.pos.c,this.pos.e,_)]);else r=-.3;o.select("rect.water").attr("x",0).attr("y",u(r)).attr("width",s).attr("height",a-u(r));var v=Sl().x((function(t){return l(t[0])})).y0((function(t){return u(t[1])})).y1((function(t){return u(-1.5)})).curve(Il.alpha(.5)),m=El().x((function(t){return l(t[0])})).y((function(t){return h(t[1])})).curve(Il.alpha(.5)),g=El().x((function(t){return l(t[0])})).y((function(t){return c(t[1])})).curve(Il.alpha(.5));o.select("path.terrain").datum(d).attr("d",v),o.select("path.factor").datum(f).attr("d",m),o.select("path.roughness").datum(p).attr("d",g),o.select("g.weirdnesses").selectAll("rect").data(this.weirdnesses).join("rect").attr("x",(function(t){return l(t.min)})).attr("y",-5).attr("width",(function(t){return l(t.max)-l(t.min)})).attr("height",a+10),o.select("line.weirdness").attr("x1",l(null!==(e=null===(t=this.pos)||void 0===t?void 0:t.w)&&void 0!==e?e:-2)).attr("x2",l(null!==(i=null===(n=this.pos)||void 0===n?void 0:n.w)&&void 0!==i?i:-2)).attr("y1",-5).attr("y2",a+5)},t}(),Nl=function(){function t(t){this.points=t,this.order()}return t.prototype.toJSON=function(t){for(var e=[],n=0,i=this.points;n<i.length;n++){var r=i[n];e.push({location:r.location,value:r.value,derivative:r.derivative_left}),r.derivative_left!==r.derivative_right&&e.push({location:r.location,value:r.value,derivative:r.derivative_right})}return{coordinate:t,points:e}},t.fromJSON=function(e){if("ridges"===e.coordinate||"weirdness"===e.coordinate){for(var n=[],i="ridges"===e.coordinate,r=function(e){var r=e.location,s=e.derivative,a="number"==typeof e.value?{apply:function(t){return e.value}}:t.fromJSON(e.value);if(i)for(var l=o.inversPeaksAndValleys(r),u=0;u<l.weirdnesses.length;u++){var h=l.derivative_factors[u];"number"==typeof h?n.push({location:l.weirdnesses[u],derivative_left:s*h,derivative_right:s*h,value:a.apply(l.weirdnesses[u])}):n.push({location:l.weirdnesses[u],derivative_left:s*h[0],derivative_right:s*h[1],value:a.apply(l.weirdnesses[u])})}else n.length>0&&Math.abs(n[n.length-1].location-r)<1e-5?n[n.length-1].derivative_right=s:n.push({location:r,derivative_left:s,derivative_right:s,value:a.apply(r)})},o=this,s=0,a=e.points;s<a.length;s++)r(a[s]);return new t(n)}console.warn("Trying to create SimpleSpline from non weirdness parameter")},t.peaksAndValleys=function(t){return 3*-(Math.abs(Math.abs(t)-.6666667)-.33333334)},t.inversPeaksAndValleys=function(t){if(t>1||t<-1)return{weirdnesses:[],derivative_factors:[]};var e=t/3-.33333334;return e-.6666667<-1.5?{weirdnesses:[-e-.6666667,e+.6666667],derivative_factors:[-3,3]}:1===t?{weirdnesses:[-.6666667,.6666667],derivative_factors:[[3,-3],[3,-3]]}:-1===t?{weirdnesses:[-1.33333334,0,1.33333334],derivative_factors:[3,[-3,3],-3]}:{weirdnesses:[e-.6666667,-e-.6666667,e+.6666667,.6666667-e],derivative_factors:[3,-3,3,-3]}},t.prototype.order=function(){this.points.sort((function(t,e){return t.location-e.location}))},t.prototype.apply=function(t){var e=this,n=t,i=Dn(0,this.points.length,(function(t){return n<e.points[t].location}))-1,r=this.points.length-1;if(i<0)return this.points[0].value+this.points[0].derivative_left*(n-this.points[0].location);if(i===r)return this.points[r].value+this.points[r].derivative_right*(n-this.points[r].location);var o=this.points[i].location,s=this.points[i+1].location,a=this.points[i].derivative_right,l=this.points[i+1].derivative_left,u=(n-o)/(s-o),h=this.points[i].value,c=this.points[i+1].value,d=a*(s-o)-(c-h),f=-l*(s-o)+(c-h);return On(u,h,c)+u*(1-u)*On(u,d,f)},t.prototype.derivative=function(t,e){var n=this;void 0===e&&(e="left");var i=t,r=this.points.find((function(t){return t.location===i}));if(r)return"left"===e?r.derivative_left:r.derivative_right;var o=Dn(0,this.points.length,(function(t){return i<n.points[t].location}))-1,s=this.points.length-1;if(o<0)return this.points[0].derivative_left;if(o===s)return this.points[s].derivative_right;var a=this.points[o].location,l=this.points[o+1].location,u=this.points[o].derivative_right,h=this.points[o+1].derivative_left,c=(i-a)/(l-a),d=this.points[o].value,f=this.points[o+1].value,p=u*(l-a)-(f-d),_=-h*(l-a)+(f-d);return(-d+f+p+2*c*(_-2*p)+3*c*c*(p-_))/(l-a)},t}(),Ol=function(){function t(t){var e=this;this.builder=t,this.title=document.getElementById("layoutName"),this.hide(),this.zoom=1;var n=da("#splineEditorDiv"),i=parseInt(n.style("width"),10),r=parseInt(n.style("height"),10)-20;da("#splineEditorDiv").append("div").classed("zoomDiv",!0).style("width",i).style("height",r).on("wheel",(function(t){var n=da("#splineEditorDiv"),i=parseInt(n.style("width"),10),r=parseInt(n.style("height"),10)-30,o=(n.property("scrollTop")+.5*i)/e.zoom,s=(n.property("scrollLeft")+.5*r)/e.zoom;e.zoom=Math.max(e.zoom*(t.wheelDelta>0?1.15:1/1.15),.01),e.refresh(),n.property("scrollTop",o*e.zoom-.5*i),n.property("scrollLeft",s*e.zoom-.5*r)}),{passive:!0}).call(Ea().filter((function(t){return 2===t.button})).on("start",(function(t,e){})).on("drag",(function(t,e){n.property("scrollTop",n.property("scrollTop")-t.dy),n.property("scrollLeft",n.property("scrollLeft")-t.dx)})).on("end",(function(t,e){}))).on("contextmenu",(function(t){return t.preventDefault()}))}return t.prototype.dragLocationValue=function(t,e,n,i,r,o,s){var a,l,u,h,c,d,f,p,_,v,m,g,y,b,w,x,k,E,S,T,A,P,I=$l.getInstance().sidebarManager.openedElement.key;if(i){var L=n?void 0:s.spline.points.find((function(e){return Math.abs(e.location+t)<.1})),z=null!==(_=null!==(d=null!==(u=s.col>0?null===(l=null===(a=this.builder.splines[I].splines[s.row][s.col-1])||void 0===a?void 0:a.points)||void 0===l?void 0:l.find((function(e){return Math.abs(e.location-t)<.1})):void 0)&&void 0!==u?u:s.col<this.builder.splines[I].erosions.length-1?null===(c=null===(h=this.builder.splines[I].splines[s.row][s.col+1])||void 0===h?void 0:h.points)||void 0===c?void 0:c.find((function(e){return Math.abs(e.location-t)<.1})):void 0)&&void 0!==d?d:s.row>0?null===(p=null===(f=this.builder.splines[I].splines[s.row-1][s.col])||void 0===f?void 0:f.points)||void 0===p?void 0:p.find((function(e){return Math.abs(e.location-t)<.1})):void 0)&&void 0!==_?_:s.row<this.builder.splines[I].continentalnesses.length-1?null===(m=null===(v=this.builder.splines[I].splines[s.row+1][s.col])||void 0===v?void 0:v.points)||void 0===m?void 0:m.find((function(e){return Math.abs(e.location-t)<.1})):void 0,M=s.spline.points.find((function(t){return Math.abs(t.value-e)<.05&&t!==r&&(!n||t!==o)}));if(this.snapModeLocation="none",this.snapModeValue="none",L&&(t=-L.location,this.snapModeLocation="self"),M&&(e=M.value,this.snapModeValue="self"),z&&("none"===this.snapModeLocation||"none"===this.snapModeValue)){t=z.location,this.snapModeLocation="neighbor";var C=null!==(T=null!==(k=null!==(b=s.col>0?null===(y=null===(g=this.builder.splines[I].splines[s.row][s.col-1])||void 0===g?void 0:g.points)||void 0===y?void 0:y.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0)&&void 0!==b?b:s.col<this.builder.splines[I].erosions.length-1?null===(x=null===(w=this.builder.splines[I].splines[s.row][s.col+1])||void 0===w?void 0:w.points)||void 0===x?void 0:x.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0)&&void 0!==k?k:s.row>0?null===(S=null===(E=this.builder.splines[I].splines[s.row-1][s.col])||void 0===E?void 0:E.points)||void 0===S?void 0:S.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0)&&void 0!==T?T:s.row<this.builder.splines[I].continentalnesses.length-1?null===(P=null===(A=this.builder.splines[I].splines[s.row+1][s.col])||void 0===A?void 0:A.points)||void 0===P?void 0:P.find((function(n){return n.location===t&&Math.abs(n.value-e)<.05})):void 0;C&&(e=C.value,this.snapModeValue="neighbor")}}r.location=t,r.value=e,this.dragValue=e,this.dragLocation=t,this.dragCol=s.col,this.dragRow=s.row,o&&n&&(o.location=-t,o.value=e),s.spline.order()},t.prototype.draw=function(t){var e=this,n=$l.getInstance().sidebarManager.openedElement.key,i=this.builder.splines[n].erosions.length,r=this.builder.splines[n].continentalnesses.length,o=da("#splineEditorDiv"),s=o.select(".zoomDiv"),a=Math.min(parseInt(o.style("width"),10)/i-10,parseInt(o.style("height"),10)/r-10)/50;this.zoom<a&&(this.zoom=a);var l=50*this.zoom;da("#splineEditorDiv .zoomDiv").style("width",(l+10)*i).style("height",(l+10)*r);var u,h,c=hl().domain([-1.5,1.5]).range([0,l]),d=3/l;"offset"===n?(u=hl().domain([-.3,1.6]).range([l,0]),h=-1.9/l):"factor"===n?(u=hl().domain([8,0]).range([l,0]),h=8/l):"jaggedness"===n&&(u=hl().domain([0,2]).range([.9*l,0]),h=-2/(.9*l));var f,p,_,v=d*d/h/h,m=Sl().x((function(t){return c(t[0])})).y0((function(t){return u(-.3)})).y1((function(t){return u(t[1])})),g=El().x((function(t){return c(t[0])})).y((function(t){return u(t[1])})),y=this,b=s.selectAll("div.row"+(t?"#row_"+t.row:"")).data(this.builder.splines[n].splines).join((function(t){var e=t.append("div").classed("row",!0).attr("id",(function(t,e){return"row_"+e}));return e})).selectAll("svg"+(t?"#col_"+t.col:"")).data((function(t,e){return t.map((function(t,n){return{spline:t,row:e,col:n}}))})).join((function(t){var e=t.append("svg").attr("id",(function(t,e){return"col_"+e}));e.append("rect").classed("water",!0),e.append("image").classed("add",!0).attr("href","images/add-gray.svg");var n=e.append("g").classed("splines",!0);return n.append("path").classed("spline",!0),n.append("path").classed("spline_pointer",!0),e.append("line").classed("value_indicator",!0).classed("snap_indicator",!0),e.append("line").classed("location_indicator",!0).classed("snap_indicator",!0),e.append("line").classed("mirror_location_indicator",!0).classed("snap_indicator",!0),e.append("g").classed("spline_points",!0),e})).attr("width",l).attr("height",l);b.select("rect.water").attr("x",0).attr("y",u(0)).attr("width",l).attr("height",l-u(0)).classed("hide",(function(t){return"offset"!==n||void 0===t.spline})),b.select(".add").classed("hide",(function(t){return void 0!==t.spline})).attr("width",l).attr("height",l),b.on("click",(function(t,i){i.spline||(y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,e.builder.splines[n].createSpline(i.row,i.col),$l.getInstance().refresh({spline:!0}))}));var w,x=b.selectAll("g.splines").data((function(t){var e=[];if(t.spline){for(var n=-1.5;n<=1.5001;n+=.05)e.push([n,t.spline.apply(n)]);for(var i=0,r=t.spline.points;i<r.length;i++)n=r[i],e.push([n.location,n.value]);e.sort((function(t,e){return t[0]-e[0]}))}else e.push([0,0]);return[e]}));x.select(".spline").datum((function(t){return t})).classed("area","offset"===n).attr("d","offset"===n?m:g),x.select("path.spline_pointer").datum((function(t){return t})).attr("d",g).call(Ea().filter((function(t){return!t.button})).on("start",(function(t,e){var i=da(this.parentElement.parentElement).datum().spline;y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,_=Math.abs(i.apply(c.invert(t.x))-i.apply(-c.invert(t.x)))<1e-5&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey,f={location:c.invert(t.x),value:i.apply(c.invert(t.x)),derivative_left:i.derivative(c.invert(t.x)),derivative_right:i.derivative(c.invert(t.x))},i.points.push(f),_&&(p={location:-f.location,value:f.value,derivative_left:-f.derivative_right,derivative_right:-f.derivative_left},i.points.push(p)),i.order()})).on("drag",(function(t,e){var n=da(this.parentElement.parentElement).datum(),i=!t.sourceEvent.altKey,r=c.invert(t.x),o=u.invert(t.y);y.dragLocationValue(r,o,_,i,f,p,n),y.refresh()})).on("end",(function(t,e){if(y.snapModeLocation="none",y.snapModeValue="none",0===f.location&&_){var n=da(this.parentElement.parentElement).datum().spline,i=n.points.indexOf(f),r=n.points.indexOf(p);i>r?f.derivative_left=p.derivative_left:f.derivative_right=p.derivative_right,n.points.splice(r,1)}$l.getInstance().refresh({spline:!0})})));var k=b.select("g.spline_points ").selectAll("g").data((function(t){var e,n;return null!==(n=null===(e=t.spline)||void 0===e?void 0:e.points)&&void 0!==n?n:[]})).join((function(t){var e=t.append("g").classed("handle",!0);return e.append("circle"),e.append("line").classed("handle_line_left",!0).classed("handle_line",!0),e.append("line").classed("handle_line_left_pointer",!0).classed("handle_line_pointer",!0),e.append("line").classed("handle_line_right",!0).classed("handle_line",!0),e.append("line").classed("handle_line_right_pointer",!0).classed("handle_line_pointer",!0),e})).on("contextmenu",(function(t,e){var i=da(this.parentElement).datum();y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0;var r=i.spline.points.indexOf(e);i.spline.points.splice(r,1);var o=i.spline.points.findIndex((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_left===-e.derivative_right&&t.derivative_right===-e.derivative_left}));o>-1&&!t.ctrlKey&&!t.metaKey&&i.spline.points.splice(o,1),0===i.spline.points.length&&(y.builder.splines[n].splines[i.row][i.col]=void 0),$l.getInstance().refresh({spline:!0}),t.preventDefault()})).call(Ea().filter((function(t){return!t.button})).on("start",(function(t,e){da(this).classed("dragged",!0);var i=da(this.parentElement).datum().spline;y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,Math.pow(c(e.location)-t.x,2)+Math.pow(u(e.value)-t.y,2)<25?(w="value",t.sourceEvent.ctrlKey||t.sourceEvent.metaKey?(_=!1,p=void 0):0===e.location?(p={location:0,value:e.value,derivative_left:e.derivative_right,derivative_right:e.derivative_right},i.points.push(p),e.derivative_right=e.derivative_left,_=!0):(p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value})),_=void 0!==p)):e.derivative_left!==e.derivative_right||t.sourceEvent.shiftKey?c(e.location)>t.x?(w="derivative_left",p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_right===-e.derivative_left})),_=p&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey):(w="derivative_right",p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_left===-e.derivative_right})),_=p&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey):(w="derivative",p=i.points.find((function(t){return t.location===-e.location&&t.value===e.value&&t.derivative_left===-e.derivative_right&&t.derivative_right===-e.derivative_left})),_=p&&!t.sourceEvent.ctrlKey&&!t.sourceEvent.metaKey)})).on("drag",(function(t,e){var n=da(this.parentElement).datum(),i=!t.sourceEvent.altKey;if("value"===w){var r=c.invert(t.x),o=u.invert(t.y);y.dragLocationValue(r,o,_,i,e,p,n)}else{var s=c.invert(t.x)-e.location,a=u.invert(t.y)-e.value;if(Math.abs(s)>.001){var l=a/s;Math.abs(l)<.1&&(l=0),"derivative_left"===w?Math.abs(l-e.derivative_right)<.2?l=e.derivative_right:!_&&Math.abs(l+(null==p?void 0:p.derivative_right))<.2&&(l=-p.derivative_right):"derivative_right"===w?Math.abs(l-e.derivative_left)<.2?l=e.derivative_left:!_&&Math.abs(l+(null==p?void 0:p.derivative_left))<.2&&(l=-p.derivative_left):"derivative"===w&&(!_&&Math.abs(l-(null==p?void 0:p.derivative_left))<.2?l=-p.derivative_left:!_&&Math.abs(l+(null==p?void 0:p.derivative_right))<.2&&(l=-p.derivative_right)),"derivative_right"!==w&&(e.derivative_left=l,p&&_&&(p.derivative_right=-l)),"derivative_left"!==w&&(e.derivative_right=l,p&&_&&(p.derivative_left=-l))}}y.refresh()})).on("end",(function(t,e){if(da(this).classed("dragged",!1),y.snapModeLocation="none",y.snapModeValue="none",0===e.location&&_&&"value"===w){var n=da(this.parentElement).datum().spline,i=n.points.indexOf(e),r=n.points.indexOf(p);i>r?e.derivative_left=p.derivative_left:e.derivative_right=p.derivative_right,n.points.splice(r,1)}$l.getInstance().refresh({spline:!0})})));k.select("circle").attr("cx",(function(t){return c(t.location)})).attr("cy",(function(t){return u(t.value)})).attr("r",Math.max(l/120,2));var E=l/10;k.select("line.handle_line_left").attr("x1",(function(t){return c(t.location)-E/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("y1",(function(t){return u(t.value)-E*t.derivative_left*d/h/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),k.select("line.handle_line_left_pointer").attr("x1",(function(t){return c(t.location)-E/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("y1",(function(t){return u(t.value)-E*t.derivative_left*d/h/Math.sqrt(t.derivative_left*t.derivative_left*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),k.select("line.handle_line_right").attr("x1",(function(t){return c(t.location)+E/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("y1",(function(t){return u(t.value)+E*t.derivative_right*d/h/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),k.select("line.handle_line_right_pointer").attr("x1",(function(t){return c(t.location)+E/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("y1",(function(t){return u(t.value)+E*t.derivative_right*d/h/Math.sqrt(t.derivative_right*t.derivative_right*v+1)})).attr("x2",(function(t){return c(t.location)})).attr("y2",(function(t){return u(t.value)})),b.select(".value_indicator").style("visibility",(function(t){return t.spline&&("none"!==e.snapModeValue&&t.col===e.dragCol&&t.row===e.dragRow||"neighbor"===e.snapModeLocation&&Math.abs(t.col-e.dragCol)+Math.abs(t.row-e.dragRow)===1&&t.spline.points.findIndex((function(t){return t.location===e.dragLocation&&t.value===e.dragValue}))>=0)?"visible":"hidden"})).attr("x1",0).attr("x2",l).attr("y1",u(this.dragValue)).attr("y2",u(this.dragValue)),b.select(".location_indicator").style("visibility",(function(t){return t.spline&&("self"===e.snapModeLocation&&t.col===e.dragCol&&t.row===e.dragRow||"neighbor"===e.snapModeLocation&&Math.abs(t.col-e.dragCol)+Math.abs(t.row-e.dragRow)<=1&&t.spline.points.findIndex((function(t){return t.location===e.dragLocation}))>=0)?"visible":"hidden"})).attr("x1",c(this.dragLocation)).attr("x2",c(this.dragLocation)).attr("y1",0).attr("y2",l),b.select(".mirror_location_indicator").style("visibility",(function(t){return t.spline&&"self"===e.snapModeLocation&&t.col===e.dragCol&&t.row===e.dragRow?"visible":"hidden"})).attr("x1",c(-this.dragLocation)).attr("x2",c(-this.dragLocation)).attr("y1",0).attr("y2",l),b.on("mouseover",(function(t,n){return e.hover=n})),b.on("mouseout",(function(t,n){return e.hover=void 0})),da("body").on("keydown",(function(t){e.hover&&("Delete"===t.key?(y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,y.builder.splines[n].splines[e.hover.row][e.hover.col]=void 0,$l.getInstance().refresh({spline:!0})):"KeyC"===t.code&&(t.ctrlKey||t.metaKey)?e.copy=e.hover.spline:"KeyV"===t.code&&(t.ctrlKey||t.metaKey)&&e.copy?(y.builder.splines[n].addUndoStep(),y.builder.hasChanges=!0,y.builder.splines[n].splines[e.hover.row][e.hover.col]=new Nl(e.copy.points.map((function(t){return Object.create(t)}))),$l.getInstance().refresh({spline:!0})):"KeyZ"===t.code&&(t.ctrlKey||t.metaKey)&&(y.builder.splines[n].undo(),y.builder.hasChanges=!0,$l.getInstance().refresh({spline:!0})))}))},t.prototype.refresh=function(){this.title.readOnly=!0,this.title.value="offset"===$l.getInstance().sidebarManager.openedElement.key?"Offset Spline":"factor"===$l.getInstance().sidebarManager.openedElement.key?"Factor Spline":"Jaggedness Spline",da("#splineEditorDiv").attr("hidden",void 0),$l.getInstance().splineDisplayManager.setWeirdnesses([]),$l.getInstance().splineDisplayManager.setPos(void 0),$l.getInstance().setLabels("Erosion","Continentalness"),this.draw()},t.prototype.hide=function(){da("#splineEditorDiv").attr("hidden",!0)},t}(),Bl=n(243),Rl=(zl=function(t,e){return zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},zl(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}zl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Dl=n(196);function Fl(t,e,n){return new Promise((function(i,r){var o=2,s=0;setTimeout((function a(){s++;var l=t.clientWaitSync(e,0,0);if(l!=t.WAIT_FAILED){if(l==t.TIMEOUT_EXPIRED)return o=5,void setTimeout(a,n);o=5,i(s*n)}else 0==--o?r("Wait failed"):setTimeout(a,n)}),n)}))}var Zl=function(t){function e(e,n){var i=t.call(this,n)||this;return i.visualization_manager=e,i.timer_query=null,i.Tiles={},i.renderingQueue=[],i.isRendering=!1,i.gpu_timer_results=[],i}return Rl(e,t),e.preInitalize=function(t){var e=Bl.DomUtil.create("canvas"),n=e.getContext("webgl2",{premultipliedAlpha:!1});console.time("Load GL Program");var i=n.getExtension("KHR_parallel_shader_compile"),r=n.createProgram(),o=n.createShader(n.VERTEX_SHADER),s=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(o,"#version 300 es\nin vec2 aVertexCoords;  in vec2 aCRSCoords;  out vec2 vCRSCoords;  void main(void) {  \tgl_Position = vec4(aVertexCoords , 1.0, 1.0);  \tvCRSCoords = aCRSCoords;  }"),n.shaderSource(s,Dl),n.compileShader(o),n.compileShader(s),n.attachShader(r,o),n.attachShader(r,s),i?this.initPromise=new Promise((function(t){n.linkProgram(r),function(t,e,n){return new Promise((function(i){var r=setInterval((function(){t.getProgramParameter(e,n.COMPLETION_STATUS_KHR)&&(clearInterval(r),i())}),200)}))}(n,r,i).then((function(){return t({renderer:e,gl:n,glProgram:r})}))})):t&&(this.initPromise=new Promise((function(t){setTimeout((function(){n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS),t({renderer:e,gl:n,glProgram:r})}),50)})))},e.prototype.initialize=function(t){var n=this;this.isCompiled=!1,void 0===t&&(t={}),this.builder=$l.getInstance().builder,t.noWrap=!0,t=Bl.setOptions(this,t),this.tileSize=t.tileSize,this.resolution=1/16,void 0===e.initPromise&&(console.log("need to pre init syncronized"),e.preInitalize(!0)),e.initPromise.then((function(t){n.renderer=t.renderer,n.gl=t.gl,n.glProgram=t.glProgram,n.renderer.width=n.renderer.height=n.tileSize*n.resolution,n.gl.viewport(0,0,n.tileSize*n.resolution,n.tileSize*n.resolution),n.timer_query_ext=n.gl.getExtension("EXT_disjoint_timer_query_webgl2"),n.loadGLProgram()}))},e.prototype.getGlError=function(){return this.glError},e.prototype.updateResolution=function(){for(var t in console.log("New resolution: "+this.resolution),this.renderer.width=this.renderer.height=this.tileSize*this.resolution,this.gl.viewport(0,0,this.tileSize*this.resolution,this.tileSize*this.resolution),this._tiles)this.Tiles[t].canvas.width<this.tileSize*this.resolution&&this.addRenderingTask(t,(function(){}))},e.prototype.loadGLProgram=function(){console.log("is compiled"),this.gl.useProgram(this.glProgram);var t=this.gl.getAttribLocation(this.glProgram,"aCRSCoords"),e=this.gl.getAttribLocation(this.glProgram,"aVertexCoords");this.CRSBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.CRSBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(8),this.gl.STATIC_DRAW),-1!==t&&(this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,8,0));var n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),this.gl.STATIC_DRAW),-1!==e&&(this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,!1,8,0)),this.uniformLocations={enable_isolines:this.gl.getUniformLocation(this.glProgram,"enable_isolines"),enable_hillshading:this.gl.getUniformLocation(this.glProgram,"enable_hillshading"),y_level:this.gl.getUniformLocation(this.glProgram,"y_level"),fixed_continentalness:this.gl.getUniformLocation(this.glProgram,"fixed_continentalness"),fixed_erosion:this.gl.getUniformLocation(this.glProgram,"fixed_erosion"),fixed_weirdness:this.gl.getUniformLocation(this.glProgram,"fixed_weirdness"),fixed_temperature:this.gl.getUniformLocation(this.glProgram,"fixed_temperature"),fixed_humidity:this.gl.getUniformLocation(this.glProgram,"fixed_humidity")},this.parameterTexture=this.gl.createTexture(),this.gl.uniform1i(this.gl.getUniformLocation(this.glProgram,"parameterTexture"),0),this.biomeTexture=this.gl.createTexture(),this.gl.uniform1i(this.gl.getUniformLocation(this.glProgram,"biomeTexture"),1),this.splinesTexture=this.gl.createTexture(),this.gl.uniform1i(this.gl.getUniformLocation(this.glProgram,"splineTexture"),2),console.log("is setup"),this.isCompiled=!0,console.timeEnd("Load GL Program"),this.reRender({biome:{},grids:!0,noises:!0,spline:!0}),!this.isRendering&&this.renderingQueue.length>0&&(this.isRendering=!0,this.doNextRenderingTask())},e.prototype.getIdxs=function(t){var e,n,i,r,o;if(void 0!==this.normalnoises){var s=this._map.options.crs.project(t).multiplyBy(.25),a=s.x+4*this.normalnoises.shift.sample(s.x,0,-s.y),l=-s.y+4*this.normalnoises.shift.sample(-s.y,s.x,0),u={c:null!==(e=this.builder.fixedNoises.continentalness)&&void 0!==e?e:this.normalnoises.continentalness.sample(a,0,l),e:null!==(n=this.builder.fixedNoises.erosion)&&void 0!==n?n:this.normalnoises.erosion.sample(a,0,l),w:null!==(i=this.builder.fixedNoises.weirdness)&&void 0!==i?i:this.normalnoises.weirdness.sample(a,0,l),t:null!==(r=this.builder.fixedNoises.temperature)&&void 0!==r?r:this.normalnoises.temperature.sample(a,0,l),h:null!==(o=this.builder.fixedNoises.humidity)&&void 0!==o?o:this.normalnoises.humidity.sample(a,0,l),d:-.01};return{idx:this.builder.getIndexes(u),values:u,position:{x:4*s.x,z:4*-s.y}}}},e.prototype.render=function(t){this.gl.clearColor(.5,.5,.5,0),this.gl.enable(this.gl.BLEND);var e=this._tileCoordsToBounds(t),n=e.getWest(),i=e.getEast(),r=e.getNorth(),o=e.getSouth(),s=this._map.options.crs,a=s.project(Bl.latLng(o,n)),l=s.project(Bl.latLng(r,i)),u=[l.x,l.y,a.x,l.y,l.x,a.y,a.x,a.y];this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.CRSBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(u),this.gl.STATIC_DRAW),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},e.prototype.bindParametersTexture=function(t){void 0===this.parameterArray&&(this.parameterArray=new Float32Array(65536)),this.fillParameterArray(t),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.parameterTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.R32F,256,256,0,this.gl.RED,this.gl.FLOAT,this.parameterArray),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)},e.prototype.fillParameterArray=function(t){var e=10402,n=["weirdness","continentalness","erosion","temperature","humidity","shift"];if(t.noises)for(var i=0;i<n.length;i++){var r=n[i],o=this.builder.noiseSettings[r];this.parameterArray[i*e]=o.firstOctave;for(var s=1/0,a=-1/0,l=0;l<o.amplitudes.length;l+=1)0!==o.amplitudes[l]&&(s=Math.min(s,l),a=Math.max(a,l));var u=1/6/(.1*(1+1/(a-s+1))),h=Math.pow(2,o.amplitudes.length-1)/(Math.pow(2,o.amplitudes.length)-1);for(this.parameterArray[i*e+1]=u*h,l=0;l<20;l++)this.parameterArray[i*e+2+l]=o.amplitudes.length>l?o.amplitudes[l]:0;for(var c=0;c<=1;c++)for(var d=this.normalnoises[r][0===c?"first":"second"].noiseLevels,f=0;f<20;f++){var p=i*e+2+20+20+5180*c+259*f;if(f<d.length&&void 0!==d[f]){var _=d[f];for(this.parameterArray[p]=_.xo,this.parameterArray[p+1]=_.yo,this.parameterArray[p+2]=_.zo,l=0;l<256;l++)this.parameterArray[p+3+l]=_.p[l]}else for(l=0;l<259;l++)this.parameterArray.fill(0,p,p+258)}}if(t.grids){var v={weirdness:this.builder.weirdnesses,continentalness:this.builder.continentalnesses,erosion:this.builder.erosions,temperature:this.builder.temperatures,humidity:this.builder.humidities,shift:this.builder.depths};for(i=0;i<n.length;i++)for(r=n[i],l=0;l<20;l++)l<v[r].length-1?this.parameterArray[i*e+2+20+l]=v[r][l].max:this.parameterArray[i*e+2+20+l]=-200}},e.prototype.bindBiomeTexture=function(t){if(t.grids||void 0===this.biomeArray){var e=this.builder.depths.length*this.builder.humidities.length*this.builder.temperatures.length*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length;this.biomeTextureSize=Math.ceil(Math.sqrt(e)),this.biomeArray=new Uint8Array(this.biomeTextureSize*this.biomeTextureSize*4)}this.fillBiomeArray(t.biome),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.biomeTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.biomeTextureSize,this.biomeTextureSize,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.biomeArray),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)},e.prototype.fillBiomeArray=function(t){for(var e,n,i,r,o,s,a,l,u,h,c,d,f=null!==(e=t.d)&&void 0!==e?e:0;f<=(null!==(n=t.d)&&void 0!==n?n:this.builder.depths.length-1);f++)for(var p=null!==(i=t.h)&&void 0!==i?i:0;p<=(null!==(r=t.h)&&void 0!==r?r:this.builder.humidities.length-1);p++)for(var _=null!==(o=t.t)&&void 0!==o?o:0;_<=(null!==(s=t.t)&&void 0!==s?s:this.builder.temperatures.length-1);_++)for(var v=null!==(a=t.w)&&void 0!==a?a:0;v<=(null!==(l=t.w)&&void 0!==l?l:this.builder.weirdnesses.length-1);v++)for(var m=null!==(u=t.e)&&void 0!==u?u:0;m<=(null!==(h=t.e)&&void 0!==h?h:this.builder.erosions.length-1);m++)for(var g=null!==(c=t.c)&&void 0!==c?c:0;g<=(null!==(d=t.c)&&void 0!==d?d:this.builder.continentalnesses.length-1);g++){var y=this.builder.dimension.lookupRecursive({d:f,w:v,c:g,e:m,h:p,t:_},"Any",!0),b=4*(f*this.builder.humidities.length*this.builder.temperatures.length*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length+p*this.builder.temperatures.length*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length+_*this.builder.weirdnesses.length*this.builder.erosions.length*this.builder.continentalnesses.length+v*this.builder.erosions.length*this.builder.continentalnesses.length+m*this.builder.continentalnesses.length+g);if(void 0!==y&&y instanceof Ti){var w=y.raw_color;this.biomeArray[b]=w.r,this.biomeArray[b+1]=w.g,this.biomeArray[b+2]=w.b,this.biomeArray[b+3]=255}else this.biomeArray[b]=0,this.biomeArray[b+1]=0,this.biomeArray[b+2]=0,this.biomeArray[b+3]=0}},e.prototype.bindSplinesTexture=function(){void 0===this.splinesArray&&(this.splinesArray=new Float32Array(65536)),this.fillSplinesArray(),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.splinesTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.R32F,256,256,0,this.gl.RED,this.gl.FLOAT,this.splinesArray),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)},e.prototype.fillSplinesArray=function(){this.splinesArray[21]=this.builder.splines.offset.erosions.length;for(var t=0;t<this.builder.splines.offset.erosions.length;t++)this.splinesArray[t+22]=this.builder.splines.offset.erosions[t];for(var e=0,n=0;n<this.builder.splines.offset.continentalnesses.length;n++){for(var i=!1,r=0;r<this.builder.splines.offset.erosions.length;r++){var o=42+161*(20*(n-e)+r);if(void 0===this.builder.splines.offset.splines[n][r])this.splinesArray[o]=0;else{i=!0,this.splinesArray[o]=this.builder.splines.offset.splines[n][r].points.length;for(var s=0;s<this.builder.splines.offset.splines[n][r].points.length;s++)this.splinesArray[o+1+4*s]=this.builder.splines.offset.splines[n][r].points[s].location,this.splinesArray[o+1+4*s+1]=this.builder.splines.offset.splines[n][r].points[s].value,this.splinesArray[o+1+4*s+2]=this.builder.splines.offset.splines[n][r].points[s].derivative_left,this.splinesArray[o+1+4*s+3]=this.builder.splines.offset.splines[n][r].points[s].derivative_right}}i?this.splinesArray[n+1-e]=this.builder.splines.offset.continentalnesses[n]:e++}this.splinesArray[0]=this.builder.splines.offset.continentalnesses.length-e},e.prototype.createTile=function(t,e){var n=Bl.DomUtil.create("canvas","leaflet-tile");n.width=n.height=this.tileSize*this.resolution,n.onselectstart=n.onmousemove=Bl.Util.falseFn;var i=n.getContext("2d");if(this._map){var r=this._tileCoordsToKey(t);return this.Tiles[r]={canvas:n,ctx:i},this.addRenderingTask(r,(function(){e()})),n}},e.prototype._removeTile=function(t){delete this.Tiles[t],Bl.TileLayer.prototype._removeTile.call(this,t)},e.prototype.reRender=function(t){if(console.time("reRender BiomeLayerGL"),this.isCompiled){if(t.noises){var e=Zn.create(this.builder.seed).fork();this.normalnoises={temperature:new Wn(e.forkWithHashOf("minecraft:temperature"),this.builder.noiseSettings.temperature),humidity:new Wn(e.forkWithHashOf("minecraft:vegetation"),this.builder.noiseSettings.humidity),continentalness:new Wn(e.forkWithHashOf("minecraft:continentalness"),this.builder.noiseSettings.continentalness),erosion:new Wn(e.forkWithHashOf("minecraft:erosion"),this.builder.noiseSettings.erosion),weirdness:new Wn(e.forkWithHashOf("minecraft:ridge"),this.builder.noiseSettings.weirdness),shift:new Wn(e.forkWithHashOf("minecraft:offset"),this.builder.noiseSettings.shift)}}for(var n in(t.noises||t.grids)&&this.bindParametersTexture(t),void 0!==t.biome&&this.bindBiomeTexture(t),t.spline&&this.bindSplinesTexture(),this.gl.uniform1i(this.uniformLocations.enable_isolines,this.visualization_manager.enable_isolines?1:0),this.gl.uniform1i(this.uniformLocations.enable_hillshading,this.visualization_manager.enable_hillshading?1:0),this.gl.uniform1i(this.uniformLocations.y_level,"surface"===this.builder.vis_y_level?1e4:this.builder.vis_y_level),this.gl.uniform1f(this.uniformLocations.fixed_continentalness,void 0===this.builder.fixedNoises.continentalness?1e4:this.builder.fixedNoises.continentalness),this.gl.uniform1f(this.uniformLocations.fixed_erosion,void 0===this.builder.fixedNoises.erosion?1e4:this.builder.fixedNoises.erosion),this.gl.uniform1f(this.uniformLocations.fixed_weirdness,void 0===this.builder.fixedNoises.weirdness?1e4:this.builder.fixedNoises.weirdness),this.gl.uniform1f(this.uniformLocations.fixed_temperature,void 0===this.builder.fixedNoises.temperature?1e4:this.builder.fixedNoises.temperature),this.gl.uniform1f(this.uniformLocations.fixed_humidity,void 0===this.builder.fixedNoises.humidity?1e4:this.builder.fixedNoises.humidity),this._tiles)this.addRenderingTask(n,(function(){}))}console.timeEnd("reRender BiomeLayerGL")},e.prototype.addRenderingTask=function(t,e){this.renderingQueue.findIndex((function(e){return e.key===t}))>=0||(this.renderingQueue.push({key:t,callback:e}),!this.isRendering&&this.isCompiled&&(this.isRendering=!0,this.doNextRenderingTask()))},e.prototype.doNextRenderingTask=function(){var t,e=this;do{if(0===this.renderingQueue.length)return void(this.isRendering=!1);t=this.renderingQueue.shift()}while(void 0===this.Tiles[t.key]);this.isRendering=!0;var n=this._keyToTileCoords(t.key);requestAnimationFrame((function(){return i=e,r=void 0,s=function(){var e,i,r,o,s,a,l,u=this;return function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(h){switch(h.label){case 0:return void 0===(e=this.Tiles[t.key])?[3,3]:(i=!1,this.timer_query_ext&&(r=this.gl.createQuery(),this.gl.beginQuery(this.timer_query_ext.TIME_ELAPSED_EXT,r),i=!0),this.render(n),this.timer_query_ext?[3,2]:(o=this.gl.fenceSync(this.gl.SYNC_GPU_COMMANDS_COMPLETE,0),this.gl.flush(),a=(s=this.gpu_timer_results).push,[4,Fl(this.gl,o,2)]));case 1:a.apply(s,[h.sent()]),h.label=2;case 2:e.canvas.width=e.canvas.height=this.tileSize*this.resolution,e.ctx.clearRect(0,0,this.tileSize*this.resolution,this.tileSize*this.resolution),e.ctx.drawImage(this.renderer,0,0),i?(this.gl.endQuery(this.timer_query_ext.TIME_ELAPSED_EXT),(c=this.gl,d=this.timer_query_ext,f=r,new Promise((function(t,e){setTimeout((function n(){var i=c.getQueryParameter(f,c.QUERY_RESULT_AVAILABLE),r=c.getParameter(d.GPU_DISJOINT_EXT);i&&!r?t():r?e("Disjoint Timer"):setTimeout(n,20)}),20)}))).then((function(){if(u.gpu_timer_results.push(1e-6*u.gl.getQueryParameter(r,u.gl.QUERY_RESULT)),u.gpu_timer_results.length>=6){var t=u.gpu_timer_results.reduce((function(t,e){return t+e}))/u.gpu_timer_results.length;u.gpu_timer_results.length>20&&u.gpu_timer_results.shift(),t>18&&(u.gpu_timer_results.length=0,u.resolution/=2,u.resolution,u.updateResolution()),t<6&&u.resolution<1&&(u.gpu_timer_results.length=0,u.resolution=Math.min(1,2*u.resolution),u.updateResolution())}})).catch((function(t){console.warn("failed to read timer: "+t)})).finally((function(){u.gl.deleteQuery(r)}))):this.gpu_timer_results.length>=6&&(l=this.gpu_timer_results.reduce((function(t,e){return t+e}))/this.gpu_timer_results.length,this.gpu_timer_results.length>20&&this.gpu_timer_results.shift(),l>18&&(this.gpu_timer_results.length=0,this.resolution/=2,this.updateResolution()),l<6&&this.resolution<1&&(this.gpu_timer_results.length=0,this.resolution=Math.min(1,2*this.resolution),this.updateResolution())),setTimeout(t.callback,0),h.label=3;case 3:return this.doNextRenderingTask(),[2]}var c,d,f}))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{l(s.next(t))}catch(t){e(t)}}function a(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){e.done?t(e.value):function(t){return t instanceof o?t:new o((function(e){e(t)}))}(e.value).then(n,a)}l((s=s.apply(i,r||[])).next())}));var i,r,o,s}))},e}(Bl.GridLayer);function jl(t,e,n){return t<e?(n-t)/(e-t):(t-n)/(t-e)}function Ul(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function Hl(t,e,n,i){var r=[];return t.polygons.forEach((function(t){t.forEach((function(t){t[0]+=e,t[1]+=n})),i.linearRing&&t.push(t[0]),r.push(t)})),r}function Wl(t,e,n,i){return 0===n?(t+=1,e+=i[0][1]):1===n?t+=i[0][0]:2===n?e+=i[0][1]:3===n&&(t+=i[0][0],e+=1),[t,e]}function Gl(t,e,n){return 0===n?t++:1===n||(2===n?e++:3===n&&(t++,e++)),[t,e]}function Vl(t,e,n,i,r){var o=i,s=r,a=0,l=0;if(this.x=e,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===i&&1===r)this.lowerBound=Math.min(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]),this.upperBound=Math.max(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]);else{if(i>1){for(;0!==o;)o>>=1,a++;i===1<<a-1&&a--,o=1<<a-1}if(r>1){for(;0!==s;)s>>=1,l++;r===1<<l-1&&l--,s=1<<l-1}this.childA=new Vl(t,e,n,o,s),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,i-o>0&&(this.childB=new Vl(t,e+o,n,i-o,s),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),r-s>0&&(this.childC=new Vl(t,e+o,n+s,i-o,r-s),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),r-s>0&&(this.childD=new Vl(t,e,n+s,o,r-s),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function Kl(t){var e,n;if(!t)throw new Error("data is required");if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("data must be scalar field, i.e. array of arrays");if(t.length<2)throw new Error("data must contain at least two rows");if((n=t[0].length)<2)throw new Error("data must contain at least two columns");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw new Error("Row "+e+" is not an array");if(t[e].length!=n)throw new Error("unequal row lengths detected, please provide a regular grid")}this.data=t,this.root=new Vl(t,0,0,t[0].length-1,t.length-1)}function Jl(t,e,n,i){var r,o,s,a,l,u,h=0,c=t[n+1][e],d=t[n+1][e+1],f=t[n][e+1],p=t[n][e],_=i.threshold;if(!(isNaN(p)||isNaN(f)||isNaN(d)||isNaN(c))){switch(h|=c>=_?8:0,h|=d>=_?4:0,h|=f>=_?2:0,u={cval:h=+(h|=p>=_?1:0),polygons:[],edges:{},x0:p,x1:f,x2:d,x3:c},h){case 0:i.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:r=i.interpolate(p,c,_),a=i.interpolate(p,f,_),i.polygons_full&&(u.edges.left={path:[[0,r],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,r],[a,0]]);break;case 13:a=i.interpolate(p,f,_),o=i.interpolate(f,d,_),i.polygons_full&&(u.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[a,0],[1,o],[1,0]]);break;case 11:o=i.interpolate(f,d,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[1,o],[s,1],[1,1]]);break;case 7:r=i.interpolate(p,c,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.top={path:[[s,1],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[s,1],[0,r],[0,1]]);break;case 1:r=i.interpolate(p,c,_),a=i.interpolate(p,f,_),i.polygons_full&&(u.edges.bottom={path:[[a,0],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[a,0],[0,r],[0,1],[1,1],[1,0]]);break;case 2:a=i.interpolate(p,f,_),o=i.interpolate(f,d,_),i.polygons_full&&(u.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,o],[a,0]]);break;case 4:o=i.interpolate(f,d,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[s,1],[1,o],[1,0]]);break;case 8:r=i.interpolate(p,c,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.left={path:[[0,r],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[0,0],[0,r],[s,1],[1,1],[1,0]]);break;case 12:r=i.interpolate(p,c,_),o=i.interpolate(f,d,_),i.polygons_full&&(u.edges.left={path:[[0,r],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[0,0],[0,r],[1,o],[1,0]]);break;case 9:a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.bottom={path:[[a,0],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[a,0],[s,1],[1,1],[1,0]]);break;case 3:r=i.interpolate(p,c,_),o=i.interpolate(f,d,_),i.polygons_full&&(u.edges.right={path:[[1,o],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[0,r],[0,1],[1,1],[1,o]]);break;case 6:a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),i.polygons_full&&(u.edges.top={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[s,1],[a,0]]);break;case 10:r=i.interpolate(p,c,_),o=i.interpolate(f,d,_),a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),l=(p+f+d+c)/4,i.polygons_full&&(l<_?(u.edges.left={path:[[0,r],[s,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}):(u.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.left={path:[[0,r],[a,0]],move:{x:0,y:-1,enter:"top"}})),i.polygons&&(l<_?u.polygons.push([[0,0],[0,r],[s,1],[1,1],[1,o],[a,0]]):(u.polygons.push([[0,0],[0,r],[a,0]]),u.polygons.push([[s,1],[1,1],[1,o]])));break;case 5:r=i.interpolate(p,c,_),o=i.interpolate(f,d,_),a=i.interpolate(p,f,_),s=i.interpolate(c,d,_),l=(p+f+d+c)/4,i.polygons_full&&(l<_?(u.edges.bottom={path:[[a,0],[0,r]],move:{x:-1,y:0,enter:"right"}},u.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}):(u.edges.top={path:[[s,1],[0,r]],move:{x:-1,y:0,enter:"right"}},u.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}})),i.polygons&&(l<_?u.polygons.push([[0,r],[0,1],[s,1],[1,o],[1,0],[a,0]]):(u.polygons.push([[0,r],[0,1],[s,1]]),u.polygons.push([[a,0],[1,o],[1,0]])))}return u}}Vl.prototype.cellsInBand=function(t,e,n){var i=[];return n=void 0===n||n,this.lowerBound>e||this.upperBound<t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(i=i.concat(this.childA.cellsInBand(t,e,n))),this.childB&&(i=i.concat(this.childB.cellsInBand(t,e,n))),this.childD&&(i=i.concat(this.childD.cellsInBand(t,e,n))),this.childC&&(i=i.concat(this.childC.cellsInBand(t,e,n)))):(n||this.lowerBound<=t||this.upperBound>=e)&&i.push({x:this.x,y:this.y})),i},Vl.prototype.cellsBelowThreshold=function(t,e){var n=[];return e=void 0===e||e,this.lowerBound>t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&n.push({x:this.x,y:this.y})),n};var Xl=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ql=function(t){function e(e){var n=t.call(this)||this;return n.builder=e,n}return Xl(e,t),e.prototype.createTile=function(t,e){var n,i,r,o,s=Bl.DomUtil.create("canvas","leaflet-tile");return n=this,i=void 0,o=function(){var n,i,r,o,a,l,u=this;return function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(h){switch(h.label){case 0:return n=s.getContext("2d"),i=this.getTileSize(),s.width=i.x,s.height=i.y,(r=this.gridIndicesManager.get(t))instanceof Promise?[4,r]:[3,2];case 1:return r=h.sent(),[3,3];case 2:s.classList.add("leaflet-tile-loaded"),h.label=3;case 3:return o=r.values.map((function(t){return t.map((function(t){return u.builder.splines.offset.apply(t.c,t.e,t.w)}))})),a=Array(14).fill(0).map((function(t,e){return.15*(e-7)})),l=function(t,e,n){var i,r,o,s=!1,a=!1,l=null,u=null,h=null,c=null,d=null,f=[];if(!t)throw new Error("data is required");if(null==e)throw new Error("threshold is required");if(n&&"object"!=typeof n)throw new Error("options must be an object");if(i=function(t){var e,n,i,r,o;for(r=new Ul,t=t||{},o=Object.keys(r),e=0;e<o.length;e++)null!=(i=t[n=o[e]])&&(r[n]=i);return r.polygons_full=!r.polygons,r.interpolate=jl,r}(n),t instanceof Kl)l=t,u=t.root,h=t.data,i.noQuadTree||(s=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");h=t}if(Array.isArray(e)){for(a=!0,i.noQuadTree||(s=!0),r=0;r<e.length;r++)if(isNaN(+e[r]))throw new Error("threshold["+r+"] is not a number")}else{if(isNaN(+e))throw new Error("threshold must be a number or array of numbers");e=[e]}return s&&!u&&(l=new Kl(h),u=l.root,h=l.data),i.verbose&&(i.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),a&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),e.forEach((function(t,e){if(d=[],i.threshold=t,i.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+t),i.polygons)if(s)u.cellsBelowThreshold(i.threshold,!0).forEach((function(t){d=d.concat(Hl(Jl(h,t.x,t.y,i),t.x,t.y,i))}));else for(o=0;o<h.length-1;++o)for(e=0;e<h[0].length-1;++e)d=d.concat(Hl(Jl(h,e,o,i),e,o,i));else{for(c=[],e=0;e<h[0].length-1;++e)c[e]=[];if(s)u.cellsBelowThreshold(i.threshold,!1).forEach((function(t){c[t.x][t.y]=Jl(h,t.x,t.y,i)}));else for(e=0;e<h[0].length-1;++e)for(o=0;o<h.length-1;++o)c[e][o]=Jl(h,e,o,i);d=function(t,e,n){var i,r,o,s,a,l,u,h,c,d,f,p,_,v,m,g=[],y=t.length-1,b=t[0].length-1,w=["right","bottom","left","top"],x=[0,-1,0,1],k=[-1,0,1,0],E={bottom:1,left:2,top:3,right:0};return n.noFrame||function(t,e){var n,i,r,o,s;for(n=!0,i=t[0].length,r=t.length,s=0;s<r;s++)if(t[s][0]>=e||t[s][i-1]>=e){n=!1;break}if(n&&(t[r-1][0]>=e||t[r-1][i-1]>=e)&&(n=!1),n)for(o=0;o<i-1;o++)if(t[0][o]>=e||t[r-1][o]>e){n=!1;break}return n}(t,n.threshold)&&(n.linearRing?g.push([[0,0],[0,y],[b,y],[b,0],[0,0]]):g.push([[0,0],[0,y],[b,y],[b,0]])),e.forEach((function(t,S){t.forEach((function(t,T){for(i=null,r=0;r<4;r++)if(i=w[r],"object"==typeof t.edges[i]){for(a=[],o=t.edges[i],l=i,u=S,h=T,c=!1,d=[S+o.path[0][0],T+o.path[0][1]],a.push(d);!c&&"object"==typeof(s=e[u][h]).edges[l];)if(o=s.edges[l],delete s.edges[l],(f=o.path[1])[0]+=u,f[1]+=h,a.push(f),l=o.move.enter,u+=o.move.x,h+=o.move.y,void 0===e[u]||void 0===e[u][h]){if(!n.linearRing)break;if(p=0,_=0,u===b?(u--,p=0):u<0?(u++,p=2):h===y?(h--,p=3):h<0&&(h++,p=1),u===S&&h===T&&p===E[i]){c=!0,l=i;break}for(;;){if(v=!1,_>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==e[u]&&void 0!==e[u][h]&&(s=e[u][h],m=w[p],"object"==typeof s.edges[m])){o=s.edges[m],a.push(Wl(u,h,p,o.path)),l=m,v=!0;break}if(v)break;if(a.push(Gl(u,h,p)),h+=k[p],void 0!==e[u+=x[p]]&&void 0!==e[u][h]||(0===p&&h<0||1===p&&u<0||2===p&&h===y||3===p&&u===b)&&(u-=x[p],h-=k[p],p=(p+1)%4,_++),u===S&&h===T&&p===E[i]){c=!0,l=i;break}}}!n.linearRing||a[a.length-1][0]===d[0]&&a[a.length-1][1]===d[1]||a.push(d),g.push(a)}}))})),g}(h,c,i)}a?f.push(d):f=d,"function"==typeof i.successCallback&&i.successCallback(f,t)})),f}(o,a,{noFrame:!0,polygons:!1}),n.strokeStyle="black",n.lineWidth=1,l.forEach((function(t){t.forEach((function(t){n.beginPath();for(var e=0;e<t.length;e++){var r=t[e],o=!0,s=i.x/u.gridIndicesManager.resolution;if(e>0){var a=t[e-1];0===r[0]&&0===a[0]&&(o=!1),0===r[1]&&0===a[1]&&(o=!1),r[0]===s&&a[0]===s&&(o=!1),r[1]===s&&a[1]===s&&(o=!1)}o?n.lineTo(r[1]*u.gridIndicesManager.resolution,r[0]*u.gridIndicesManager.resolution):n.moveTo(r[1]*u.gridIndicesManager.resolution,r[0]*u.gridIndicesManager.resolution)}n.stroke()}))})),e(null,s),[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function s(t){try{l(o.next(t))}catch(t){e(t)}}function a(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){e.done?t(e.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(e.value).then(s,a)}l((o=o.apply(n,i||[])).next())})),s},e}(Bl.GridLayer),Yl=function(){function t(t){var e=this;this.enable_isolines=!1,this.enable_hillshading=!0,this.builder=t;var n=document.getElementById("visualization");this.closeContainer=n.parentElement.parentElement,this.closeContainer.onopenchange=function(){e.biomeLayer.reRender({biome:{},grids:!0,noises:!0,spline:!0})},this.map=Bl.map("visualization_map"),this.map.setView([0,0],15),this.map.setMaxZoom(18),this.map.setMinZoom(11),this.biomeLayer=new Zl(this,{tileSize:256}),this.biomeLayer.addTo(this.map),this.contourLayer=new ql(this.builder);var i=document.getElementById("toggleIsolinesButton");i.onclick=function(t){e.enable_isolines=!e.enable_isolines,i.classList.toggle("enabled",e.enable_isolines),$l.getInstance().refresh({})};var r=document.getElementById("toggleHillshadeButton");r.onclick=function(t){e.enable_hillshading=!e.enable_hillshading,r.classList.toggle("enabled",e.enable_hillshading),$l.getInstance().refresh({})};var o=document.getElementById("mapHeightSelection"),s=document.getElementById("mapHeightLabel");o.value=o.max,o.oninput=function(){var t=Number(o.value),e=Number(o.min),n=Number(o.max);s.innerHTML=t===n?"Surface":t.toFixed(0);var i=.94*(1-(t-e)/(n-e))*parseInt(getComputedStyle(o).height);s.style.top=i+"px"},o.onchange=function(){var t=Number(o.value),n=(Number(o.min),Number(o.max));e.builder.vis_y_level=t===n?"surface":t,e.refresh({})};var a=document.getElementById("mapFullscreenButton");a.onclick=function(t){var i=n.classList.toggle("fullscreen");a.classList.toggle("enabled",i),e.map.invalidateSize()};var l,u,h=document.getElementById("visualizationTooltip"),c=h.getElementsByClassName("position")[0],d=h.getElementsByClassName("noise_values")[0],f=h.getElementsByClassName("slice")[0],p=h.getElementsByClassName("mode")[0],_=h.getElementsByClassName("layout")[0],v=h.getElementsByClassName("biome")[0];this.map.addEventListener("click",(function(t){var n=e.getIdxs(t.latlng),i=e.builder.lookupRecursiveWithTracking(n.idx);void 0===i.slice||i.slice instanceof Ni||(void 0!==i.layout&&(t.originalEvent.ctrlKey||t.originalEvent.metaKey)?(i.layout.getRenderer().setHighlight(n.idx.t,n.idx.h),$l.getInstance().sidebarManager.openElement({type:"layout",key:i.layout.getKey()})):(i.slice.getRenderer().setHighlight(n.idx.c,n.idx.e),$l.getInstance().sidebarManager.openElement({type:"slice",key:i.slice.getKey()})))})),this.map.addEventListener("mousemove",(function(n){var i,r,o,s=e.getIdxs(n.latlng);if(void 0!==s){var a=s?e.builder.lookupRecursiveWithTracking(s.idx):void 0;h.style.left=Math.min(n.originalEvent.pageX+20,document.body.clientWidth-300)+"px",h.style.top=n.originalEvent.pageY+15+"px",h.classList.remove("hidden"),a&&(p.src="images/mode_"+(null==a?void 0:a.mode)+".png");var m,g,y=t.splines.offset.apply(s.values.c,s.values.e,s.values.w);"surface"===t.vis_y_level?(m=s?128*y+64:void 0,g=0):(m=t.vis_y_level,g=-(t.vis_y_level-64)/128+y),c.innerHTML="X: "+s.position.x.toFixed(0)+(m?", Y: "+m.toFixed(0):"")+", Z: "+s.position.z.toFixed(0),d.innerHTML="C: "+s.values.c.toFixed(2)+", E: "+s.values.e.toFixed(2)+", W: "+s.values.w.toFixed(2)+"<br /> T: "+s.values.t.toFixed(2)+", H: "+s.values.h.toFixed(2)+", D: "+g.toFixed(2),f.innerHTML="&crarr; "+(null===(i=null==a?void 0:a.slice)||void 0===i?void 0:i.name)+" (Slice)",_.innerHTML="&crarr; "+(null===(r=null==a?void 0:a.layout)||void 0===r?void 0:r.name)+" (Layout)",v.innerHTML=null===(o=null==a?void 0:a.biome)||void 0===o?void 0:o.name,p.classList.toggle("hidden",void 0===(null==a?void 0:a.mode)),f.parentElement.classList.toggle("hidden",void 0===(null==a?void 0:a.slice)||a.slice instanceof Ni),_.parentElement.classList.toggle("hidden",void 0===(null==a?void 0:a.layout)||a.layout instanceof Ni),v.parentElement.classList.toggle("hidden",void 0===(null==a?void 0:a.biome)||a.biome instanceof Ni),s&&($l.getInstance().splineDisplayManager.setPos({c:s.values.c,e:s.values.e,w:s.values.w}),$l.getInstance().splineDisplayManager.refresh()),Zi.toggleAction("open-slice",void 0!==(null==a?void 0:a.slice)&&!((null==a?void 0:a.slice)instanceof Ni)),Zi.toggleAction("open-layout",void 0!==(null==a?void 0:a.layout)),Zi.toggleAction("copy",!0),l=s.position,u=m}})),this.map.addEventListener("mouseout",(function(t){h.classList.add("hidden"),$l.getInstance().splineDisplayManager.setPos(void 0),$l.getInstance().splineDisplayManager.refresh(),Zi.toggleAction("open-slice",!1),Zi.toggleAction("open-layout",!1),Zi.toggleAction("copy",!1)})),this.map.addEventListener("keydown",(function(e){"c"===e.originalEvent.key&&(e.originalEvent.ctrlKey||e.originalEvent.metaKey)&&navigator.clipboard.writeText("/execute in "+t.dimensionName+" run tp @s "+l.x.toFixed(0)+" "+(u+10).toFixed(0)+" "+l.z.toFixed(0))}))}return t.prototype.getIdxs=function(t){return this.biomeLayer.getIdxs(t)},t.prototype.refresh=function(t){return e=this,n=void 0,r=function(){return function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){return this.closeContainer.classList.contains("closed")||this.biomeLayer.reRender(t),[2]}))},new((i=void 0)||(i=Promise))((function(t,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(s,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r},t}(),$l=function(){function t(e){t.instance=this,this.builder=e,this.layoutEditor=new Ui(e),this.sidebarManager=new Ml(e),this.splineDisplayManager=new Cl(e),this.visualizationManager=new Yl(e),this.gridEditor=new zi(e),this.splineEditor=new Ol(e),this.settingsManager=new Hi(e),this.horizonalLabel=document.getElementById("horizontal_label"),this.verticalLabel=document.getElementById("vertical_label"),Zi.createClickHandlers()}return t.create=function(e){if(void 0!==t.instance)throw new Error("UI instance already exists");new t(e)},t.getInstance=function(){return t.instance},t.prototype.refresh=function(t){var e=this;console.log("Refreshing: "+JSON.stringify(t)),this.sidebarManager.refresh(),"spline"===this.sidebarManager.openedElement.type?(this.layoutEditor.hide(),this.gridEditor.hide(),this.splineEditor.refresh()):"grid"===this.sidebarManager.openedElement.type?(this.layoutEditor.hide(),this.gridEditor.refresh(),this.splineEditor.hide()):(this.gridEditor.hide(),this.layoutEditor.refresh(),this.splineEditor.hide()),this.splineDisplayManager.refresh(),setTimeout((function(){e.visualizationManager.refresh(t)}),5),this.settingsManager.refresh(),Zi.updateTitle()},t.prototype.setLabels=function(t,e){this.horizonalLabel.innerHTML=t,this.verticalLabel.innerHTML=e},t.instance=void 0,t}(),Ql=function(){function t(t){this.highlight_x=-1,this.highlight_y=-1,this.aImg=document.getElementById("aModeImg"),this.bImg=document.getElementById("bModeImg"),this.canvasSize=void 0,this.grid=t,this.gridCanvas=document.createElement("canvas"),this.overlayCanvas=document.createElement("canvas")}return t.prototype.lookup=function(t,e){return this.grid.lookup(this.grid.cellToIds(e,t),"Any")},t.prototype.getSize=function(){return this.grid.getSize()},t.prototype.setDirty=function(){this.canvasSize=void 0},t.prototype.refresh=function(t){this.gridCanvas.width=this.canvasSize[0],this.gridCanvas.height=this.canvasSize[1],this.overlayCanvas.width=this.canvasSize[0],this.overlayCanvas.height=this.canvasSize[1];var e=this.getSize(),n=0;"dimension"===this.grid.getType()&&(e[1]+=1,n=1);var i=this.canvasSize[0]/e[0],r=this.canvasSize[1]/e[1],o=Math.min(i,r),s=-(o*e[0]-this.canvasSize[0])/2,a=-(o*e[1]-this.canvasSize[1])/2,l=this.gridCanvas.getContext("2d"),u=this.overlayCanvas.getContext("2d");if(l.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),u.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),"dimension"===this.grid.getType())for(var h=0;h<e[0];h++)l.drawImage("A"===$l.getInstance().builder.modes[h]?this.aImg:this.bImg,s+(h+.25)*o,a+.25*o,.5*o,.5*o);for(var c=n;c<e[1];c++)for(h=0;h<e[0];h++){var d=this.lookup(h,c-n);void 0===d&&console.log("undefined at: "+(c-n)+", "+h);var f=d.getRenderer();f instanceof ru&&(f.setParentType(this.grid.getType()),f.drawOverlay(u,s+h*o,a+c*o,o,o,this.grid.cellToIds(c,h))),!t&&d instanceof iu&&d.getType()!==this.grid.getType()?f.draw(l,s+(h+.05)*o,a+(c+.05)*o,.9*o,.9*o,this.grid.cellToIds(c,h),!0):f.draw(l,s+h*o,a+c*o,o,o,this.grid.cellToIds(c,h),!0),d instanceof iu&&d.getType()===this.grid.getType()&&(u.fillStyle="rgb(255,255,255,0.8)",u.beginPath(),u.rect(s+h*o,a+c*o,o,o),u.fill(),u.fillStyle="rgb(0,0,0,1)",u.textAlign="center",u.textBaseline="middle",u.font="100px serif",u.fillText(d.name.charAt(0),s+(h+.4)*o,a+(c+.4)*o),u.font="140px serif",u.fillText("↵",s+(h+.65)*o,a+(c+.75)*o)),u.strokeStyle="black",u.lineWidth=o/30,u.beginPath(),u.rect(s+h*o,a+c*o,o,o),u.stroke(),l.strokeStyle="black",l.lineWidth=o/30,l.beginPath(),l.rect(s+h*o,a+c*o,o,o),l.stroke()}},t.prototype.draw=function(t,e,n,i,r,o,s){void 0===s&&(s=!1);var a=this.grid.idsToCell(o);if("all"===a){if(void 0!==this.canvasSize&&this.canvasSize[0]===i&&this.canvasSize[1]===r||(this.canvasSize=[i,r],this.refresh(s)),t.drawImage(this.gridCanvas,e,n,i,r),s||t.drawImage(this.overlayCanvas,e,n,i,r),this.highlight_y>=0&&this.highlight_x>=0&&!s){var l=this.getSize();"dimension"===this.grid.getType()&&(l[1]+=1);var u=this.canvasSize[0]/l[0],h=this.canvasSize[1]/l[1],c=Math.min(u,h),d=-(c*l[0]-this.canvasSize[0])/2,f=-(c*l[1]-this.canvasSize[1])/2;t.strokeStyle="red",t.lineWidth=c/15,t.beginPath(),t.rect(d+this.highlight_x*c,f+this.highlight_y*c,c,c),t.stroke(),this.highlight_y=-1,this.highlight_x=-1}}else this.lookup(a[1],a[0]).getRenderer().draw(t,e,n,i,r,o,s)},t.prototype.getIdsFromPosition=function(t,e,n,i,r,o){var s=this.getSize(),a=0;"dimension"===this.grid.getType()&&(s[1]+=1,a=1);var l=n/s[0],u=i/s[1],h=Math.min(l,u),c=-(h*s[0]-n)/2+t,d=-(h*s[1]-i)/2+e;if(!(r<c||o<d||r>c+s[0]*h||o>d+s[1]*h)){var f=Math.floor((o-d)/h),p=Math.floor((r-c)/h),_=r-c-p*h,v=o-d-f*h,m=_>h-v?"B":"A";return{indexes:this.grid.cellToIds(f-a,p),local_h:_/h,local_t:v/h,mode:m}}},t.prototype.setHighlight=function(t,e){this.highlight_y=t,this.highlight_x=e},t}(),tu=function(){function t(t){this.builder=t,this.type="dimension"}return t.prototype.getSize=function(t){return[t.getNumWeirdnesses(),t.getNumDepths()]},t.prototype.cellToIds=function(t,e){return{d:t,w:e}},t.prototype.idsToCell=function(t){return void 0===t.w||void 0===t.d?"all":[t.d,t.w]},t.prototype.paramToAxis=function(t){if("depth"===t)return"x";if("weirdness"===t)return"y";throw new Error("Invalid Parameter")},t.prototype.modesetting=function(t){return void 0===t.w?"unchanged":this.builder.modes[t.w]},t}(),eu=function(){function t(){this.type="slice"}return t.prototype.getSize=function(t){return[t.getNumErosions(),t.getNumContinentalnesses()]},t.prototype.cellToIds=function(t,e){return{c:t,e}},t.prototype.idsToCell=function(t){return void 0===t.c||void 0===t.e?"all":[t.c,t.e]},t.prototype.paramToAxis=function(t){if("continentalness"===t)return"x";if("erosion"===t)return"y";throw new Error("Invalid Parameter")},t.prototype.modesetting=function(t){return"unchanged"},t}(),nu=function(){function t(){this.type="layout"}return t.prototype.getSize=function(t){return[t.getNumHumidities(),t.getNumTemperatures()]},t.prototype.cellToIds=function(t,e){return{t,h:e}},t.prototype.idsToCell=function(t){return void 0===t.t||void 0===t.h?"all":[t.t,t.h]},t.prototype.paramToAxis=function(t){if("temperature"===t)return"x";if("humidity"===t)return"y";throw new Error("Invalid Parameter")},t.prototype.modesetting=function(t){return"unchanged"},t}(),iu=function(){function t(t,e,n,i,r){this.allowEdit=!0,this.name=e,this.builder=t,this.accessor=n;var o=n.getSize(t);this.array=null!=i?i:new Array(o[1]).fill(0).map((function(){return new Array(o[0]).fill("unassigned")})),this.lookup_cache=new Array(o[1]).fill(0).map((function(){return new Array(o[0]).fill(void 0)})),this.key=null!=r?r:Ei("layout_"),this.undoActions=[]}return t.create=function(e,n,i,r,o){var s=new t(e,n,i,r,o);return"layout"===i.type?e.registerLayout(s):"slice"===i.type&&e.registerSlice(s),s},t.fromJSON=function(e,n,i){return t.create(e,n.name,i,n.array,n.key)},t.prototype.toJSON=function(){var t=this;return{key:this.key,name:this.name,array:this.array.map((function(e){return e.map((function(e){return t.builder.getLayoutElement(e).getKey()}))}))}},t.prototype.getSize=function(){return this.accessor.getSize(this.builder)},t.prototype.getType=function(){return this.accessor.type},t.prototype.set=function(t,e,n){void 0===n&&(n=!0);var i=this.accessor.idsToCell(t);if("all"===i)throw new Error("Trying to set element of Layout without proper ids");this.array[i[0]][i[1]]!==e&&(n&&this.undoActions.push({y_id:i[0],x_id:i[1],value:this.array[i[0]][i[1]]}),this.array[i[0]][i[1]]=e,this.builder.hasChanges=!0,this.getRenderer().setDirty())},t.prototype.undo=function(){if(this.undoActions.length>0){var t=this.undoActions.pop();this.array[t.y_id][t.x_id]=t.value}},t.prototype.deleteParam=function(t,e){var n=this;"x"===this.accessor.paramToAxis(t)?this.array.splice(e,1):this.array.forEach((function(t){return t.splice(e,1)})),this.lookup_cache=new Array(this.array.length).fill(0).map((function(){return new Array(n.array[0].length).fill(void 0)}))},t.prototype.splitParam=function(t,e){var n=this;"x"===this.accessor.paramToAxis(t)?this.array.splice(e,0,Array.from(this.array[e])):this.array.forEach((function(t){return t.splice(e,0,t[e])})),this.lookup_cache=new Array(this.array.length).fill(0).map((function(){return new Array(n.array[0].length).fill(void 0)}))},t.prototype.deleteGridElement=function(t){for(var e in this.array)for(var n in this.array[e])this.array[e][n]===t&&(this.array[e][n]="unassigned")},t.prototype.lookupKey=function(t,e){var n=this.accessor.idsToCell(t);return"all"===n?this.getKey():this.array[n[0]][n[1]]},t.prototype.lookup=function(t,e){var n=this.accessor.idsToCell(t);if("all"===n)return this;var i=this.array[n[0]][n[1]],r=this.lookup_cache[n[0]][n[1]];if(void 0!==r&&r.getKey()===i)return r;void 0===i&&console.log(t);var o=this.builder.getLayoutElement(i);return this.lookup_cache[n[0]][n[1]]=o,o},t.prototype.lookupRecursive=function(t,e,n){void 0===n&&(n=!1);var i=this.accessor.modesetting(t),r="unchanged"===i?e:i,o=this.lookup(t,r);return n&&o.hidden||o===this?o:o.lookupRecursive(t,r,n)},t.prototype.lookupRecursiveWithTracking=function(t,e,n){var i=this.accessor.modesetting(t),r="unchanged"===i?e:i,o=this.lookup(t,r);if(o.getKey()===this.getKey())throw new Error("Lookup resulted in same element: "+JSON.stringify(t)+" mode: "+e);if(n&&o.hidden){if("slice"===this.accessor.type)return{mode:r,slice:this,layout:void 0,biome:void 0};if("layout"===this.accessor.type)return{mode:r,slice:void 0,layout:this,biome:void 0};if("dimension"===this.accessor.type)return{mode:r,slice:void 0,layout:void 0,biome:void 0}}else{var s=o.lookupRecursiveWithTracking(t,r,n);if("slice"===this.accessor.type)return{mode:r,slice:this,layout:s.layout,biome:s.biome};if("layout"===this.accessor.type)return{mode:r,slice:void 0,layout:this,biome:s.biome};if("dimension"===this.accessor.type)return{mode:r,slice:s.slice,layout:s.layout,biome:s.biome}}},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new Ql(this)),this.renderer},t.prototype.cellToIds=function(t,e){return this.accessor.cellToIds(t,e)},t.prototype.idsToCell=function(t){return this.accessor.idsToCell(t)},t.prototype.getKey=function(){return this.key},t.prototype.has=function(t,e){var n=this;return t===this.getKey()||("all"===this.accessor.idsToCell(e)?this.array.findIndex((function(i){return i.findIndex((function(i){return n.builder.getLayoutElement(i).has(t,e)}))>=0}))>=0:this.lookup(e,"Any").has(t,e))},t}(),ru=function(){function t(t){this.ab_element=t}return t.prototype.setHighlight=function(t,e){},t.prototype.setParentType=function(t){this.parentType=t},t.prototype.draw=function(t,e,n,i,r,o,s){var a=this.ab_element.lookupRecursive(o,"A",!1),l=!1;a instanceof Ti?t.fillStyle=a.color:a instanceof Ni?t.fillStyle="gray":l=!0,l?a.getRenderer().draw(t,e+.1*i,n+.1*r,.38*i,.38*r,o,!0):(t.beginPath(),t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e,n+r),t.fill(),a instanceof Ni&&(t.fillStyle="white",t.textAlign="center",t.textBaseline="middle",t.font=.5*i+"px serif",t.fillText("?",e+.3*i,n+.4*r)));var u=this.ab_element.lookupRecursive(o,"B",!1),h=!1;u instanceof Ti?t.fillStyle=u.color:u instanceof Ni?t.fillStyle="gray":h=!0,h?u.getRenderer().draw(t,e+.52*i,n+.52*r,.38*i,.38*r,o,!0):(t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+i,n+r),t.lineTo(e,n+r),t.fill(),u instanceof Ni&&(t.fillStyle="white",t.font=.5*i+"px serif",t.textAlign="center",t.textBaseline="middle",t.fillText("?",e+.72*i,n+.75*r))),t.strokeStyle="black",t.lineWidth=i/30,t.beginPath(),t.moveTo(e+i,n),t.lineTo(e,n+r),t.stroke()},t.prototype.drawOverlay=function(t,e,n,i,r,o){var s=this.ab_element.getElement("A");s instanceof iu&&s.getType()===this.parentType&&(t.fillStyle="rgb(255,255,255,0.8)",t.beginPath(),t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e,n+r),t.fill(),t.fillStyle="rgb(0,0,0,1)",t.textAlign="center",t.textBaseline="middle",t.font="80px serif",t.fillText(this.ab_element.getElement("A").name.charAt(0),e+.2*i,n+.3*r),t.font="110px serif",t.fillText("↵",e+.3*i,n+.5*r));var a=this.ab_element.getElement("B");a instanceof iu&&a.getType()===this.parentType&&(t.fillStyle="rgb(255,255,255,0.8)",t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+i,n+r),t.lineTo(e,n+r),t.fill(),t.fillStyle="rgb(0,0,0,1)",t.textAlign="center",t.textBaseline="middle",t.font="80px serif",t.fillText(this.ab_element.getElement("B").name.charAt(0),e+.65*i,n+.7*r),t.font="110px serif",t.fillText("↵",e+.77*i,n+.85*r)),t.strokeStyle="black",t.lineWidth=i/30,t.beginPath(),t.moveTo(e+i,n),t.lineTo(e,n+r),t.stroke()},t}(),ou=function(){function t(t,e,n){this.allowEdit=!1,this.type_id=-1,this.elementA=e,this.elementB=n,this.builder=t}return t.create=function(e,n,i){var r=new t(e,n,i);return e.registerGridElement(r),r},t.prototype.lookupKey=function(t,e){return"A"===e?this.elementA:"B"===e?this.elementB:this.getKey()},t.prototype.lookup=function(t,e){return"A"===e?this.builder.getLayoutElement(this.elementA):"B"===e?this.builder.getLayoutElement(this.elementB):this},t.prototype.lookupRecursive=function(t,e,n){var i;return void 0===n&&(n=!1),"Any"===e?this:(i="A"===e?this.builder.getLayoutElement(this.elementA):this.builder.getLayoutElement(this.elementB),n&&i.hidden?i:i.lookupRecursive(t,e,n))},t.prototype.lookupRecursiveWithTracking=function(t,e,n){var i;return"Any"===e?{slice:void 0,layout:void 0,biome:void 0}:(i="A"===e?this.builder.getLayoutElement(this.elementA):this.builder.getLayoutElement(this.elementB),n&&i.hidden?{slice:void 0,layout:void 0,biome:void 0}:i.lookupRecursiveWithTracking(t,e,n))},t.prototype.getElement=function(t){return"A"===t?this.builder.getLayoutElement(this.elementA):this.builder.getLayoutElement(this.elementB)},t.prototype.getRenderer=function(){return void 0===this.renderer&&(this.renderer=new ru(this)),this.renderer},t.prototype.getKey=function(){return this.elementA+"/"+this.elementB},t.prototype.has=function(t,e){return t===this.getKey()||this.getElement("A").has(t,e)||this.getElement("B").has(t,e)},t}(),su=function(){function t(t,e,n){if(this.undoSteps=[],this.continentalnesses=t,this.erosions=e,n)this.splines=n;else{this.splines=[];for(var i=0;i<this.continentalnesses.length;i++){this.splines.push([]);for(var r=0;r<this.erosions.length;r++)this.splines[i].push(void 0)}this.createSpline(0,0)}}return t.prototype.apply=function(e,n,i){for(var r,o,s=0;s<this.continentalnesses.length;s++){for(var a=!1,l=0;l<this.erosions.length;l++)if(void 0!==this.splines[s][l]){a=!0;break}if(a){if(!(this.continentalnesses[s]<e)){o=s;break}r=s}}return void 0===r&&void 0===o?void 0:void 0===r?this.applyErosion(o,n,i):void 0===o?this.applyErosion(r,n,i):t.interpolateZeroGrad((e-this.continentalnesses[r])/(this.continentalnesses[o]-this.continentalnesses[r]),this.applyErosion(r,n,i),this.applyErosion(o,n,i))},t.prototype.undo=function(){this.undoSteps.length>0&&(this.splines=JSON.parse(this.undoSteps.pop()).map((function(t){return t.map((function(t){return t?Nl.fromJSON(t):void 0}))})))},t.prototype.addUndoStep=function(){this.undoSteps.push(JSON.stringify(this.splines.map((function(t){return t.map((function(t){return t?t.toJSON("weirdness"):void 0}))})))),this.undoSteps.length>500&&this.undoSteps.shift()},t.prototype.applyErosion=function(e,n,i){for(var r,o,s=0;s<this.erosions.length;s++)if(this.splines[e][s]){if(!(this.erosions[s]<n)){o=s;break}r=s}return void 0===r&&void 0===o?void 0:void 0===r?this.splines[e][o].apply(i):void 0===o?this.splines[e][r].apply(i):t.interpolateZeroGrad((n-this.erosions[r])/(this.erosions[o]-this.erosions[r]),this.splines[e][r].apply(i),this.splines[e][o].apply(i))},t.interpolateZeroGrad=function(t,e,n){return On(t,e,n)+t*(1-t)*On(t,e-n,n-e)},t.prototype.toJSON=function(){return{continentalnesses:this.continentalnesses,erosions:this.erosions,splines:this.splines.map((function(t){return t.map((function(t){return t?t.toJSON("weirdness"):void 0}))}))}},t.fromJSON=function(e){return new t(e.continentalnesses,e.erosions,e.splines.map((function(t){return t.map((function(t){return t?Nl.fromJSON(t):void 0}))})))},t.prototype.exportLegacy=function(t){var e,n,i=this;if(void 0!==t.continentalness){var r=(d=Dn(0,this.continentalnesses.length,(function(e){return t.continentalness<i.continentalnesses[e]}))-1)<this.continentalnesses.length-1&&d>=0?(t.continentalness-this.continentalnesses[d])/(t.continentalness-this.continentalnesses[d]):void 0;if(void 0!==t.erosion){var o=(h=Dn(0,this.erosions.length,(function(e){return t.erosion<i.erosions[e]}))-1)<this.erosions.length-1&&h>=0?(t.erosion-this.continentalnesses[h])/(t.erosion-this.continentalnesses[h]):void 0,s=this.interpolateSplinesZeroGrad(o,this.getErosionInterpolatedSpline(d,h),this.getErosionInterpolatedSpline(d,h+1)),a=this.interpolateSplinesZeroGrad(o,this.getErosionInterpolatedSpline(d+1,h),this.getErosionInterpolatedSpline(d+1,h+1)),l=this.interpolateSplinesZeroGrad(r,s,a);return void 0!==t.weirdness?l.apply(t.weirdness):l.toJSON("weirdness")}for(var u=[],h=0;h<this.erosions.length;h++)((null===(e=this.splines[d])||void 0===e?void 0:e[h])||(null===(n=this.splines[d+1])||void 0===n?void 0:n[h]))&&(l=this.interpolateSplinesZeroGrad(r,this.getErosionInterpolatedSpline(d,h),this.getErosionInterpolatedSpline(d+1,h)),u.push({location:this.erosions[h],derivative:0,value:void 0!==t.weirdness?l.apply(t.weirdness):l.toJSON("weirdness")}));return{coordinate:"erosion",points:u}}for(var c=[],d=0;d<this.continentalnesses.length;d++)if(void 0!==t.erosion)o=(h=Dn(0,this.erosions.length,(function(e){return t.erosion<i.erosions[e]}))-1)<this.erosions.length-1&&h>=0?(t.erosion-this.continentalnesses[h])/(t.erosion-this.continentalnesses[h]):void 0,l=this.interpolateSplinesZeroGrad(o,this.getErosionInterpolatedSpline(d,h),this.getErosionInterpolatedSpline(d,h+1)),c.push({location:this.continentalnesses[d],derivative:0,value:void 0!==t.weirdness?l.apply(t.weirdness):l.toJSON("weirdness")});else{for(u=[],h=0;h<this.erosions.length;h++)this.splines[d][h]&&u.push({location:this.erosions[h],derivative:0,value:void 0!==t.weirdness?this.splines[d][h].apply(t.weirdness):this.splines[d][h].toJSON("weirdness")});c.push({location:this.continentalnesses[d],derivative:0,value:{coordinate:"erosion",points:u}})}return{coordinate:"continents",points:c}},t.prototype.export=function(){for(var t=[],e=0;e<this.continentalnesses.length;e++){for(var n=[],i=0;i<this.erosions.length;i++)this.splines[e][i]&&n.push({location:this.erosions[i],derivative:0,value:this.splines[e][i].toJSON("minecraft:overworld/ridges")});t.push({location:this.continentalnesses[e],derivative:0,value:{coordinate:"minecraft:overworld/erosion",points:n}})}return{coordinate:"minecraft:overworld/continents",points:t}},t.fromMinecraftJSON=function(e){if("continents"===e.coordinate){var n=e.points.map((function(t){return t.location})),i=new Set;e.points.forEach((function(t){"number"!=typeof t.value&&"erosion"===t.value.coordinate&&t.value.points.forEach((function(t){i.add(t.location)}))}));for(var r=Array.from(i).sort((function(t,e){return t-e})),o=[],s=0;s<n.length;s++){o.push([]);for(var a=0;a<r.length;a++)o[s].push(void 0)}return e.points.forEach((function(t){var e=n.findIndex((function(e){return e===t.location}));"number"==typeof t.value?o[e][0]=new Nl([{location:0,value:t.value,derivative_left:0,derivative_right:0}]):"erosion"===t.value.coordinate&&t.value.points.forEach((function(t){var n=r.findIndex((function(e){return e===t.location}));"number"==typeof t.value?o[e][n]=new Nl([{location:0,value:t.value,derivative_left:0,derivative_right:0}]):o[e][n]=Nl.fromJSON(t.value)}))})),new t(n,r,o)}console.warn("Spline order not suppored")},t.prototype.interpolateSplinesZeroGrad=function(e,n,i){if(void 0===n)return i;if(void 0===i)return n;var r=new Set;n.points.map((function(t){return t.location})).forEach(r.add,r),i.points.map((function(t){return t.location})).forEach(r.add,r);var o=Array.from(r).sort((function(t,e){return t-e})).map((function(r){return{location:r,value:t.interpolateZeroGrad(e,n.apply(r),i.apply(r)),derivative_left:t.interpolateZeroGrad(e,n.derivative(r,"left"),i.derivative(r,"left")),derivative_right:t.interpolateZeroGrad(e,n.derivative(r,"right"),i.derivative(r,"right"))}}));return new Nl(o)},t.prototype.getErosionInterpolatedSpline=function(t,e){if(!(t<0||t>=this.continentalnesses.length||e<0||e>=this.erosions.length)){if(this.splines[t][e])return this.splines[t][e];for(var n,i,r=e-1;r>=0;r--)if(this.splines[t][r]){n=r;break}for(r=e+1;r<this.erosions.length;r++)if(this.splines[t][r]){i=r;break}if(void 0!==n||void 0!==i){if(void 0===i)return new Nl(Array.from(this.splines[t][n].points.map((function(t){return Object.create(t)}))));if(void 0===n)return new Nl(Array.from(this.splines[t][i].points.map((function(t){return Object.create(t)}))));var o=(this.erosions[e]-this.erosions[n])/(this.erosions[i]-this.erosions[n]);return this.interpolateSplinesZeroGrad(o,this.splines[t][n],this.splines[t][i])}}},t.prototype.createSpline=function(t,e){var n;this.splines[t][e]=null!==(n=this.getErosionInterpolatedSpline(t,e))&&void 0!==n?n:new Nl([{location:0,value:0,derivative_left:0,derivative_right:0}])},t}(),au=function(){function t(){}return t.fixJSON=function(t){var e;if(t.version=null!==(e=t.version)&&void 0!==e?e:0,0===t.version){for(var n=[],i=[],r=0;r<t.weirdnesses.length;r++){n[r]=[],i[r]=t.weirdnesses[r][3];for(var o=0;o<5;o++)n[r][o]=0===o||4===o?t.weirdnesses[r][2]:"unassigned"}t.dimension={key:"dimension",name:"Biomes",array:n},t.modes=i,t.continentalnesses=t.continentalnesses.map((function(t){return t[1]})),t.weirdnesses=t.weirdnesses.map((function(t){return t[1]})),t.erosions=t.erosions.map((function(t){return t[1]})),t.temperatures=t.temperatures.map((function(t){return t[1]})),t.humidities=t.humidities.map((function(t){return t[1]})),t.depths=[{min:-.2,max:0},{min:0,max:.2},{min:.2,max:.8},{min:.8,max:1},{min:1,max:1.2}],t.version=1}return 1===t.version&&(t.dimension.array=t.dimension.array[0].map((function(e,n){return t.dimension.array.map((function(t){return t[n]}))})),t.version=2,t.is_experimental_upgraded=!0),2===t.version&&(t.exportDimension=!0,t.exportNoises=!0,t.exportSplines=!0,t.noiseSettingsName="minecraft:overworld",t.version=3),3===t.version&&(t.targetVersion="1_18_1",t.version=4),t},t}(),lu={"1_18_1":{hasTerrainShaper:!0,hasDensityFunctions:!1,fixedSeed:!0},"1_18_2":{hasTerrainShaper:!0,hasDensityFunctions:!0,fixedSeed:!0},"1_19":{hasTerrainShaper:!1,hasDensityFunctions:!0,fixedSeed:!1}},uu=function(){function t(){this.splines={},this.noiseSettings=Ii.default(),this.fixedNoises={},this.vis_y_level="surface",this.seed=BigInt("1"),this.dimensionName="minecraft:overworld",this.targetVersion="1_18_2",this.exportDimension=!0,this.noiseSettingsName="minecraft:overworld",this.exportSplines=!0,this.exportNoises=!0,this.useLegacyRandom=!1,this.gridElements=new Map,this.vanillaBiomes=new Map,this.slices=[],this.layouts=[],this.biomes=[],this.layoutElementUnassigned=Ni.create(this),this.dimensionName="",this.seed=BigInt(1),this.noiseSettings={continentalness:{firstOctave:0,amplitudes:[1]},erosion:{firstOctave:0,amplitudes:[1]},weirdness:{firstOctave:0,amplitudes:[1]},temperature:{firstOctave:0,amplitudes:[1]},humidity:{firstOctave:0,amplitudes:[1]},shift:{firstOctave:0,amplitudes:[1]}}}return t.prototype.loadJSON=function(t){var e,n,i,r,o,s,a,l=this;if(4!==(t=au.fixJSON(t)).version)throw new Error("Datafixer did output json in version "+t.version+". Newest version is 4");this.dimensionName=null!==(e=t.dimensionName)&&void 0!==e?e:"minecraft:overworld",this.seed=BigInt(null!==(n=t.seed)&&void 0!==n?n:"1"),this.noiseSettings=null!==(i=t.noiseSettings)&&void 0!==i?i:Ii.default(),this.useLegacyRandom=null!==(r=t.useLegacyRandom)&&void 0!==r&&r,this.continentalnesses=t.continentalnesses,this.erosions=t.erosions,this.weirdnesses=t.weirdnesses,this.temperatures=t.temperatures,this.humidities=t.humidities,this.depths=t.depths,this.gridElements.clear(),this.vanillaBiomes.clear(),this.layouts.length=0,this.biomes.length=0,this.slices.length=0,this.targetVersion=t.targetVersion,this.exportDimension=t.exportDimension,this.exportNoises=t.exportNoises,this.exportSplines=t.exportSplines,this.noiseSettingsName=t.noiseSettingsName,this.dimension=iu.fromJSON(this,t.dimension,new tu(this)),this.modes=t.modes,Ai.registerVanillaBiomes(this),this.gridElements.set("unassigned",this.layoutElementUnassigned),null===(o=t.slices)||void 0===o||o.forEach((function(t){iu.fromJSON(l,t,new eu)})),null===(s=t.layouts)||void 0===s||s.forEach((function(t){iu.fromJSON(l,t,new nu)})),null===(a=t.biomes)||void 0===a||a.forEach((function(t){Ti.fromJSON(l,t)})),t.splines?(this.splines.offset=su.fromJSON(t.splines.offset),this.splines.factor=su.fromJSON(t.splines.factor),this.splines.jaggedness=su.fromJSON(t.splines.jaggedness)):(this.splines.offset=su.fromMinecraftJSON(Li.offset),this.splines.factor=su.fromMinecraftJSON(Li.factor),this.splines.jaggedness=su.fromMinecraftJSON(Li.jaggedness)),this.is_experimental_upgraded=t.is_experimental_upgraded},t.prototype.toJSON=function(){return{dimensionName:this.dimensionName,seed:this.seed.toString(),noiseSettings:this.noiseSettings,useLegacyRandom:this.useLegacyRandom,continentalnesses:this.continentalnesses,erosions:this.erosions,weirdnesses:this.weirdnesses,temperatures:this.temperatures,humidities:this.humidities,depths:this.depths,dimension:this.dimension,modes:this.modes,layouts:this.layouts,slices:this.slices,biomes:this.biomes,targetVersion:this.targetVersion,exportDimension:this.exportDimension,exportNoises:this.exportNoises,exportSplines:this.exportSplines,noiseSettingsName:this.noiseSettingsName,splines:{offset:this.splines.offset.toJSON(),factor:this.splines.factor.toJSON(),jaggedness:this.splines.jaggedness.toJSON()},version:4}},t.prototype.getSlice=function(t){var e;return null!==(e=this.gridElements.get(t))&&void 0!==e?e:this.layoutElementUnassigned},t.prototype.getLayoutElement=function(t){var e=this.gridElements.get(t);if(void 0===e){var n=t.split("/");if(2!==n.length)return this.layoutElementUnassigned;var i=this.getLayoutElement(n[0]),r=this.getLayoutElement(n[1]);return ou.create(this,i.getKey(),r.getKey())}return e},t.prototype.registerVanillaBiome=function(t){this.vanillaBiomes.set(t.getKey(),t)},t.prototype.registerGridElement=function(t){this.gridElements.set(t.getKey(),t)},t.prototype.registerSlice=function(t){this.gridElements.set(t.getKey(),t),this.slices.push(t)},t.prototype.registerLayout=function(t){this.gridElements.set(t.getKey(),t),this.layouts.push(t)},t.prototype.registerBiome=function(t){this.gridElements.set(t.getKey(),t),this.biomes.push(t)},t.prototype.removeGridElement=function(t){if(this.gridElements.delete(t.getKey()),this.slices.forEach((function(e){return e.deleteGridElement(t.getKey())})),this.layouts.forEach((function(e){return e.deleteGridElement(t.getKey())})),t instanceof iu){var e=this.slices.indexOf(t);e>=0&&this.slices.splice(e,1);var n=this.layouts.indexOf(t);n>=0&&this.layouts.splice(n,1)}if(t instanceof Ti){var i=this.biomes.indexOf(t);this.biomes.splice(i,1)}},t.prototype.findIndex=function(t,e){return e<t[0].min?0:e>t[t.length-1].max?t.length-1:t.findIndex((function(t){return t.min<=e&&t.max>e}))},t.prototype.getIndexes=function(t){var e,n=this.findIndex(this.weirdnesses,t.w),i=this.findIndex(this.continentalnesses,t.c),r=this.findIndex(this.erosions,t.e),o=this.findIndex(this.temperatures,t.t),s=this.findIndex(this.humidities,t.h);return e="surface"===this.vis_y_level?-.01:-(this.vis_y_level-64)/128+this.splines.offset.apply(t.c,t.e,t.w),{w:n,e:r,c:i,t:o,h:s,d:this.findIndex(this.depths,e)}},t.prototype.lookupRecursive=function(t){if(void 0!==t&&void 0!==this.weirdnesses[t.w]){var e=this.dimension.lookupRecursive(t,"Any",!1);return e instanceof Ti?e:void 0}},t.prototype.lookupRecursiveWithTracking=function(t){if(void 0!==t){if(void 0===this.weirdnesses[t.w])return{};var e=this.dimension.lookupRecursiveWithTracking(t,"Any",!0);return{slice:e.slice,layout:e.layout,biome:e.biome,mode:e.mode}}},t.prototype.deleteParam=function(t,e){"humidity"===t||"temperature"===t?(this.layouts.forEach((function(n){return n.deleteParam(t,e)})),"humidity"===t?this.humidities.splice(e,1):this.temperatures.splice(e,1)):"continentalness"===t||"erosion"===t?(this.slices.forEach((function(n){return n.deleteParam(t,e)})),"continentalness"===t?this.continentalnesses.splice(e,1):this.erosions.splice(e,1)):"weirdness"!==t&&"depth"!==t||(this.dimension.deleteParam(t,e),"weirdness"===t?this.weirdnesses.splice(e,1):this.depths.splice(e,1))},t.prototype.splitParam=function(t,e,n){if(void 0===n&&(n="mid"),"humidity"===t||"temperature"===t)if(this.layouts.forEach((function(n){return n.splitParam(t,e)})),"humidity"===t){var i=(this.humidities[e].min+this.humidities[e].max)/2,r=new pi.Param(this.humidities[e].min,i),o=new pi.Param(i,this.humidities[e].max);this.humidities.splice(e,1,r,o)}else{i=(this.temperatures[e].min+this.temperatures[e].max)/2;var s=new pi.Param(this.temperatures[e].min,i),a=new pi.Param(i,this.temperatures[e].max);this.temperatures.splice(e,1,s,a)}else if("continentalness"===t||"erosion"===t)if(this.slices.forEach((function(n){return n.splitParam(t,e)})),"continentalness"===t){i=(this.continentalnesses[e].min+this.continentalnesses[e].max)/2;var l=new pi.Param(this.continentalnesses[e].min,i),u=new pi.Param(i,this.continentalnesses[e].max);this.continentalnesses.splice(e,1,l,u)}else{i=(this.erosions[e].min+this.erosions[e].max)/2;var h=new pi.Param(this.erosions[e].min,i),c=new pi.Param(i,this.erosions[e].max);this.erosions.splice(e,1,h,c)}else"weirdness"!==t&&"depth"!==t||(this.dimension.splitParam(t,e),"weirdness"===t?(i=(this.weirdnesses[e].min+this.weirdnesses[e].max)/2,l=new pi.Param(this.weirdnesses[e].min,i),u=new pi.Param(i,this.weirdnesses[e].max),this.weirdnesses.splice(e,1,l,u)):(i="mid"===n?(this.depths[e].min+this.depths[e].max)/2:"start"===n?this.depths[e].min:this.depths[e].max,h=new pi.Param(this.depths[e].min,i),c=new pi.Param(i,this.depths[e].max),this.depths.splice(e,1,h,c)))},t.prototype.getNumTemperatures=function(){return this.temperatures.length},t.prototype.getNumHumidities=function(){return this.humidities.length},t.prototype.getNumContinentalnesses=function(){return this.continentalnesses.length},t.prototype.getNumErosions=function(){return this.erosions.length},t.prototype.getNumWeirdnesses=function(){return this.weirdnesses.length},t.prototype.getNumDepths=function(){return this.depths.length},t.prototype.getVersionInfo=function(){return lu[this.targetVersion]},t}(),hu=document.getElementsByClassName("closable"),cu=navigator.serviceWorker;cu&&cu.register("service-worker.js").then((function(){return console.log("ServiceWorker Registered to the Application!")})).catch((function(){return console.log("Failed to Register the ServiceWorker.")}));for(var du=function(t){hu[t].getElementsByClassName("button")[0].onclick=function(){void 0!==hu[t].onopenchange&&hu[t].onopenchange(),hu[t].classList.toggle("closed"),$l.getInstance().refresh({})}},fu=0;fu<hu.length;fu++)du(fu);Zl.preInitalize(!1);var pu=new uu;$l.create(pu),fetch("minecraft_overworld_1_19.snowcapped.json").then((function(t){return t.text()})).then((function(t){pu.loadJSON(JSON.parse(t)),$l.getInstance().refresh({biome:{},spline:!0,grids:!0,noises:!0})}))})()})();
//# sourceMappingURL=bundle.js.map